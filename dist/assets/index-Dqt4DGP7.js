(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Mg={exports:{}},kl={},Vg={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),Kv=Symbol.for("react.portal"),Yv=Symbol.for("react.fragment"),Xv=Symbol.for("react.strict_mode"),Jv=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),e_=Symbol.for("react.context"),t_=Symbol.for("react.forward_ref"),n_=Symbol.for("react.suspense"),r_=Symbol.for("react.memo"),i_=Symbol.for("react.lazy"),If=Symbol.iterator;function s_(t){return t===null||typeof t!="object"?null:(t=If&&t[If]||t["@@iterator"],typeof t=="function"?t:null)}var jg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lg=Object.assign,Og={};function is(t,e,n){this.props=t,this.context=e,this.refs=Og,this.updater=n||jg}is.prototype.isReactComponent={};is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fg(){}Fg.prototype=is.prototype;function fd(t,e,n){this.props=t,this.context=e,this.refs=Og,this.updater=n||jg}var pd=fd.prototype=new Fg;pd.constructor=fd;Lg(pd,is.prototype);pd.isPureReactComponent=!0;var Af=Array.isArray,zg=Object.prototype.hasOwnProperty,gd={current:null},Bg={key:!0,ref:!0,__self:!0,__source:!0};function Ug(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zg.call(e,r)&&!Bg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:No,type:t,key:s,ref:o,props:i,_owner:gd.current}}function o_(t,e){return{$$typeof:No,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function md(t){return typeof t=="object"&&t!==null&&t.$$typeof===No}function a_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cf=/\/+/g;function mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a_(""+t.key):e.toString(36)}function Ra(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case No:case Kv:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mu(o,0):r,Af(i)?(n="",t!=null&&(n=t.replace(Cf,"$&/")+"/"),Ra(i,e,n,"",function(h){return h})):i!=null&&(md(i)&&(i=o_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Af(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+mu(s,l);o+=Ra(s,e,n,u,i)}else if(u=s_(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+mu(s,l++),o+=Ra(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function la(t,e,n){if(t==null)return t;var r=[],i=0;return Ra(t,r,"","",function(s){return e.call(n,s,i++)}),r}function l_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Pa={transition:null},u_={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Pa,ReactCurrentOwner:gd};function $g(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:la,forEach:function(t,e,n){la(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!md(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=is;he.Fragment=Yv;he.Profiler=Jv;he.PureComponent=fd;he.StrictMode=Xv;he.Suspense=n_;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u_;he.act=$g;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)zg.call(e,u)&&!Bg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:No,type:t.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:e_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zv,_context:t},t.Consumer=t};he.createElement=Ug;he.createFactory=function(t){var e=Ug.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:t_,render:t}};he.isValidElement=md;he.lazy=function(t){return{$$typeof:i_,_payload:{_status:-1,_result:t},_init:l_}};he.memo=function(t,e){return{$$typeof:r_,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Pa.transition;Pa.transition={};try{t()}finally{Pa.transition=e}};he.unstable_act=$g;he.useCallback=function(t,e){return Dt.current.useCallback(t,e)};he.useContext=function(t){return Dt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Dt.current.useEffect(t,e)};he.useId=function(){return Dt.current.useId()};he.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Dt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};he.useRef=function(t){return Dt.current.useRef(t)};he.useState=function(t){return Dt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Dt.current.useTransition()};he.version="18.3.1";Vg.exports=he;var L=Vg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=L,d_=Symbol.for("react.element"),h_=Symbol.for("react.fragment"),f_=Object.prototype.hasOwnProperty,p_=c_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g_={key:!0,ref:!0,__self:!0,__source:!0};function Wg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f_.call(e,r)&&!g_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:d_,type:t,key:s,ref:o,props:i,_owner:p_.current}}kl.Fragment=h_;kl.jsx=Wg;kl.jsxs=Wg;Mg.exports=kl;var d=Mg.exports,Hg={exports:{}},nn={},qg={exports:{}},Gg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var W=M.length;M.push(F);e:for(;0<W;){var Z=W-1>>>1,ee=M[Z];if(0<i(ee,F))M[Z]=F,M[W]=ee,W=Z;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var F=M[0],W=M.pop();if(W!==F){M[0]=W;e:for(var Z=0,ee=M.length,se=ee>>>1;Z<se;){var Ae=2*(Z+1)-1,ge=M[Ae],de=Ae+1,ce=M[de];if(0>i(ge,W))de<ee&&0>i(ce,ge)?(M[Z]=ce,M[de]=W,Z=de):(M[Z]=ge,M[Ae]=W,Z=Ae);else if(de<ee&&0>i(ce,W))M[Z]=ce,M[de]=W,Z=de;else break e}}return F}function i(M,F){var W=M.sortIndex-F.sortIndex;return W!==0?W:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,g=null,v=3,k=!1,R=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=M)r(h),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(h)}}function b(M){if(D=!1,A(M),!R)if(n(u)!==null)R=!0,re(V);else{var F=n(h);F!==null&&$(b,F.startTime-M)}}function V(M,F){R=!1,D&&(D=!1,T(_),_=-1),k=!0;var W=v;try{for(A(F),g=n(u);g!==null&&(!(g.expirationTime>F)||M&&!S());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,v=g.priorityLevel;var ee=Z(g.expirationTime<=F);F=t.unstable_now(),typeof ee=="function"?g.callback=ee:g===n(u)&&r(u),A(F)}else r(u);g=n(u)}if(g!==null)var se=!0;else{var Ae=n(h);Ae!==null&&$(b,Ae.startTime-F),se=!1}return se}finally{g=null,v=W,k=!1}}var j=!1,E=null,_=-1,m=5,w=-1;function S(){return!(t.unstable_now()-w<m)}function C(){if(E!==null){var M=t.unstable_now();w=M;var F=!0;try{F=E(!0,M)}finally{F?x():(j=!1,E=null)}}else j=!1}var x;if(typeof I=="function")x=function(){I(C)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,X=Q.port2;Q.port1.onmessage=C,x=function(){X.postMessage(null)}}else x=function(){O(C,0)};function re(M){E=M,j||(j=!0,x())}function $(M,F){_=O(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){R||k||(R=!0,re(V))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var F=3;break;default:F=v}var W=v;v=F;try{return M()}finally{v=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=v;v=M;try{return F()}finally{v=W}},t.unstable_scheduleCallback=function(M,F,W){var Z=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,M={id:p++,callback:F,priorityLevel:M,startTime:W,expirationTime:ee,sortIndex:-1},W>Z?(M.sortIndex=W,e(h,M),n(u)===null&&M===n(h)&&(D?(T(_),_=-1):D=!0,$(b,W-Z))):(M.sortIndex=ee,e(u,M),R||k||(R=!0,re(V))),M},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(M){var F=v;return function(){var W=v;v=F;try{return M.apply(this,arguments)}finally{v=W}}}})(Gg);qg.exports=Gg;var m_=qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=L,tn=m_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qg=new Set,so={};function di(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(so[t]=e,t=0;t<e.length;t++)Qg.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=Object.prototype.hasOwnProperty,v_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kf={},Rf={};function __(t){return Yu.call(Rf,t)?!0:Yu.call(kf,t)?!1:v_.test(t)?Rf[t]=!0:(kf[t]=!0,!1)}function x_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w_(t,e,n,r){if(e===null||typeof e>"u"||x_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var yd=/[\-:]([a-z])/g;function vd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yd,vd);yt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yd,vd);yt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yd,vd);yt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _d(t,e,n,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(w_(e,n,i,r)&&(n=null),r||i===null?__(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),xd=Symbol.for("react.strict_mode"),Xu=Symbol.for("react.profiler"),Kg=Symbol.for("react.provider"),Yg=Symbol.for("react.context"),wd=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),Sd=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),Xg=Symbol.for("react.offscreen"),Pf=Symbol.iterator;function Rs(t){return t===null||typeof t!="object"?null:(t=Pf&&t[Pf]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,yu;function Os(t){if(yu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yu=e&&e[1]||""}return`
`+yu+t}var vu=!1;function _u(t,e){if(!t||vu)return"";vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Os(t):""}function S_(t){switch(t.tag){case 5:return Os(t.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return t=_u(t.type,!1),t;case 11:return t=_u(t.type.render,!1),t;case 1:return t=_u(t.type,!0),t;default:return""}}function ec(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ii:return"Fragment";case Ti:return"Portal";case Xu:return"Profiler";case xd:return"StrictMode";case Ju:return"Suspense";case Zu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yg:return(t.displayName||"Context")+".Consumer";case Kg:return(t._context.displayName||"Context")+".Provider";case wd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sd:return e=t.displayName||null,e!==null?e:ec(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return ec(t(e))}catch{}}return null}function E_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ec(e);case 8:return e===xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T_(t){var e=Jg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ca(t){t._valueTracker||(t._valueTracker=T_(t))}function Zg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tc(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function em(t,e){e=e.checked,e!=null&&_d(t,"checked",e,!1)}function nc(t,e){em(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rc(t,e.type,n):e.hasOwnProperty("defaultValue")&&rc(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Df(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rc(t,e,n){(e!=="number"||qa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fs=Array.isArray;function ji(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ic(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Fs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function tm(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var da,rm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I_=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){I_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function im(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function sm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=im(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var A_=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oc(t,e){if(e){if(A_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ac(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=null;function Ed(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uc=null,Li=null,Oi=null;function Vf(t){if(t=jo(t)){if(typeof uc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Nl(e),uc(t.stateNode,t.type,e))}}function om(t){Li?Oi?Oi.push(t):Oi=[t]:Li=t}function am(){if(Li){var t=Li,e=Oi;if(Oi=Li=null,Vf(t),e)for(t=0;t<e.length;t++)Vf(e[t])}}function lm(t,e){return t(e)}function um(){}var xu=!1;function cm(t,e,n){if(xu)return t(e,n);xu=!0;try{return lm(t,e,n)}finally{xu=!1,(Li!==null||Oi!==null)&&(um(),am())}}function ao(t,e){var n=t.stateNode;if(n===null)return null;var r=Nl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var cc=!1;if(Xn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){cc=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{cc=!1}function C_(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Gs=!1,Ga=null,Qa=!1,dc=null,k_={onError:function(t){Gs=!0,Ga=t}};function R_(t,e,n,r,i,s,o,l,u){Gs=!1,Ga=null,C_.apply(k_,arguments)}function P_(t,e,n,r,i,s,o,l,u){if(R_.apply(this,arguments),Gs){if(Gs){var h=Ga;Gs=!1,Ga=null}else throw Error(U(198));Qa||(Qa=!0,dc=h)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jf(t){if(hi(t)!==t)throw Error(U(188))}function b_(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jf(i),t;if(s===r)return jf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function hm(t){return t=b_(t),t!==null?fm(t):null}function fm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fm(t);if(e!==null)return e;t=t.sibling}return null}var pm=tn.unstable_scheduleCallback,Lf=tn.unstable_cancelCallback,D_=tn.unstable_shouldYield,N_=tn.unstable_requestPaint,Ke=tn.unstable_now,M_=tn.unstable_getCurrentPriorityLevel,Td=tn.unstable_ImmediatePriority,gm=tn.unstable_UserBlockingPriority,Ka=tn.unstable_NormalPriority,V_=tn.unstable_LowPriority,mm=tn.unstable_IdlePriority,Rl=null,Nn=null;function j_(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Rl,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:F_,L_=Math.log,O_=Math.LN2;function F_(t){return t>>>=0,t===0?32:31-(L_(t)/O_|0)|0}var ha=64,fa=4194304;function zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ya(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=zs(l):(s&=o,s!==0&&(r=zs(s)))}else o=n&~i,o!==0?r=zs(o):s!==0&&(r=zs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),i=1<<n,r|=t[n],e&=~i;return r}function z_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=z_(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ym(){var t=ha;return ha<<=1,!(ha&4194240)&&(ha=64),t}function wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function U_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Id(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function vm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _m,Ad,xm,wm,Sm,fc=!1,pa=[],xr=null,wr=null,Sr=null,lo=new Map,uo=new Map,gr=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Of(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jo(e),e!==null&&Ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function W_(t,e,n,r,i){switch(e){case"focusin":return xr=bs(xr,t,e,n,r,i),!0;case"dragenter":return wr=bs(wr,t,e,n,r,i),!0;case"mouseover":return Sr=bs(Sr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lo.set(s,bs(lo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,uo.set(s,bs(uo.get(s)||null,t,e,n,r,i)),!0}return!1}function Em(t){var e=Yr(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=dm(n),e!==null){t.blockedOn=e,Sm(t.priority,function(){xm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ba(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lc=r,n.target.dispatchEvent(r),lc=null}else return e=jo(n),e!==null&&Ad(e),t.blockedOn=n,!1;e.shift()}return!0}function Ff(t,e,n){ba(t)&&n.delete(e)}function H_(){fc=!1,xr!==null&&ba(xr)&&(xr=null),wr!==null&&ba(wr)&&(wr=null),Sr!==null&&ba(Sr)&&(Sr=null),lo.forEach(Ff),uo.forEach(Ff)}function Ds(t,e){t.blockedOn===e&&(t.blockedOn=null,fc||(fc=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,H_)))}function co(t){function e(i){return Ds(i,t)}if(0<pa.length){Ds(pa[0],t);for(var n=1;n<pa.length;n++){var r=pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Ds(xr,t),wr!==null&&Ds(wr,t),Sr!==null&&Ds(Sr,t),lo.forEach(e),uo.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)Em(n),n.blockedOn===null&&gr.shift()}var Fi=sr.ReactCurrentBatchConfig,Xa=!0;function q_(t,e,n,r){var i=Ee,s=Fi.transition;Fi.transition=null;try{Ee=1,Cd(t,e,n,r)}finally{Ee=i,Fi.transition=s}}function G_(t,e,n,r){var i=Ee,s=Fi.transition;Fi.transition=null;try{Ee=4,Cd(t,e,n,r)}finally{Ee=i,Fi.transition=s}}function Cd(t,e,n,r){if(Xa){var i=pc(t,e,n,r);if(i===null)bu(t,e,r,Ja,n),Of(t,r);else if(W_(i,t,e,n,r))r.stopPropagation();else if(Of(t,r),e&4&&-1<$_.indexOf(t)){for(;i!==null;){var s=jo(i);if(s!==null&&_m(s),s=pc(t,e,n,r),s===null&&bu(t,e,r,Ja,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bu(t,e,r,null,n)}}var Ja=null;function pc(t,e,n,r){if(Ja=null,t=Ed(r),t=Yr(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ja=t,null}function Tm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M_()){case Td:return 1;case gm:return 4;case Ka:case V_:return 16;case mm:return 536870912;default:return 16}default:return 16}}var yr=null,kd=null,Da=null;function Im(){if(Da)return Da;var t,e=kd,n=e.length,r,i="value"in yr?yr.value:yr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Da=i.slice(t,1<r?1-r:void 0)}function Na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function zf(){return!1}function rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ga:zf,this.isPropagationStopped=zf,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rd=rn(ss),Vo=Be({},ss,{view:0,detail:0}),Q_=rn(Vo),Su,Eu,Ns,Pl=Be({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ns&&(Ns&&t.type==="mousemove"?(Su=t.screenX-Ns.screenX,Eu=t.screenY-Ns.screenY):Eu=Su=0,Ns=t),Su)},movementY:function(t){return"movementY"in t?t.movementY:Eu}}),Bf=rn(Pl),K_=Be({},Pl,{dataTransfer:0}),Y_=rn(K_),X_=Be({},Vo,{relatedTarget:0}),Tu=rn(X_),J_=Be({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),Z_=rn(J_),e1=Be({},ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t1=rn(e1),n1=Be({},ss,{data:0}),Uf=rn(n1),r1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s1[t])?!!e[t]:!1}function Pd(){return o1}var a1=Be({},Vo,{key:function(t){if(t.key){var e=r1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(t){return t.type==="keypress"?Na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l1=rn(a1),u1=Be({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=rn(u1),c1=Be({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),d1=rn(c1),h1=Be({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),f1=rn(h1),p1=Be({},Pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g1=rn(p1),m1=[9,13,27,32],bd=Xn&&"CompositionEvent"in window,Qs=null;Xn&&"documentMode"in document&&(Qs=document.documentMode);var y1=Xn&&"TextEvent"in window&&!Qs,Am=Xn&&(!bd||Qs&&8<Qs&&11>=Qs),Wf=" ",Hf=!1;function Cm(t,e){switch(t){case"keyup":return m1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function v1(t,e){switch(t){case"compositionend":return km(e);case"keypress":return e.which!==32?null:(Hf=!0,Wf);case"textInput":return t=e.data,t===Wf&&Hf?null:t;default:return null}}function _1(t,e){if(Ai)return t==="compositionend"||!bd&&Cm(t,e)?(t=Im(),Da=kd=yr=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Am&&e.locale!=="ko"?null:e.data;default:return null}}var x1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x1[t.type]:e==="textarea"}function Rm(t,e,n,r){om(r),e=Za(e,"onChange"),0<e.length&&(n=new Rd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ks=null,ho=null;function w1(t){zm(t,0)}function bl(t){var e=Ri(t);if(Zg(e))return t}function S1(t,e){if(t==="change")return e}var Pm=!1;if(Xn){var Iu;if(Xn){var Au="oninput"in document;if(!Au){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),Au=typeof Gf.oninput=="function"}Iu=Au}else Iu=!1;Pm=Iu&&(!document.documentMode||9<document.documentMode)}function Qf(){Ks&&(Ks.detachEvent("onpropertychange",bm),ho=Ks=null)}function bm(t){if(t.propertyName==="value"&&bl(ho)){var e=[];Rm(e,ho,t,Ed(t)),cm(w1,e)}}function E1(t,e,n){t==="focusin"?(Qf(),Ks=e,ho=n,Ks.attachEvent("onpropertychange",bm)):t==="focusout"&&Qf()}function T1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bl(ho)}function I1(t,e){if(t==="click")return bl(e)}function A1(t,e){if(t==="input"||t==="change")return bl(e)}function C1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:C1;function fo(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yu.call(e,i)||!In(t[i],e[i]))return!1}return!0}function Kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yf(t,e){var n=Kf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kf(n)}}function Dm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nm(){for(var t=window,e=qa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qa(t.document)}return e}function Dd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k1(t){var e=Nm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dm(n.ownerDocument.documentElement,n)){if(r!==null&&Dd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yf(n,s);var o=Yf(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var R1=Xn&&"documentMode"in document&&11>=document.documentMode,Ci=null,gc=null,Ys=null,mc=!1;function Xf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mc||Ci==null||Ci!==qa(r)||(r=Ci,"selectionStart"in r&&Dd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ys&&fo(Ys,r)||(Ys=r,r=Za(gc,"onSelect"),0<r.length&&(e=new Rd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ci)))}function ma(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ki={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Cu={},Mm={};Xn&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function Dl(t){if(Cu[t])return Cu[t];if(!ki[t])return t;var e=ki[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mm)return Cu[t]=e[n];return t}var Vm=Dl("animationend"),jm=Dl("animationiteration"),Lm=Dl("animationstart"),Om=Dl("transitionend"),Fm=new Map,Jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Fm.set(t,e),di(e,[t])}for(var ku=0;ku<Jf.length;ku++){var Ru=Jf[ku],P1=Ru.toLowerCase(),b1=Ru[0].toUpperCase()+Ru.slice(1);Lr(P1,"on"+b1)}Lr(Vm,"onAnimationEnd");Lr(jm,"onAnimationIteration");Lr(Lm,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(Om,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Zf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,P_(r,e,void 0,t),t.currentTarget=null}function zm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Zf(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Zf(i,l,h),s=u}}}if(Qa)throw t=dc,Qa=!1,dc=null,t}function Ne(t,e){var n=e[wc];n===void 0&&(n=e[wc]=new Set);var r=t+"__bubble";n.has(r)||(Bm(e,t,2,!1),n.add(r))}function Pu(t,e,n){var r=0;e&&(r|=4),Bm(n,t,r,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[ya]){t[ya]=!0,Qg.forEach(function(n){n!=="selectionchange"&&(D1.has(n)||Pu(n,!1,t),Pu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,Pu("selectionchange",!1,e))}}function Bm(t,e,n,r){switch(Tm(e)){case 1:var i=q_;break;case 4:i=G_;break;default:i=Cd}n=i.bind(null,e,n,t),i=void 0,!cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Yr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}cm(function(){var h=s,p=Ed(n),g=[];e:{var v=Fm.get(t);if(v!==void 0){var k=Rd,R=t;switch(t){case"keypress":if(Na(n)===0)break e;case"keydown":case"keyup":k=l1;break;case"focusin":R="focus",k=Tu;break;case"focusout":R="blur",k=Tu;break;case"beforeblur":case"afterblur":k=Tu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=d1;break;case Vm:case jm:case Lm:k=Z_;break;case Om:k=f1;break;case"scroll":k=Q_;break;case"wheel":k=g1;break;case"copy":case"cut":case"paste":k=t1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=$f}var D=(e&4)!==0,O=!D&&t==="scroll",T=D?v!==null?v+"Capture":null:v;D=[];for(var I=h,A;I!==null;){A=I;var b=A.stateNode;if(A.tag===5&&b!==null&&(A=b,T!==null&&(b=ao(I,T),b!=null&&D.push(go(I,b,A)))),O)break;I=I.return}0<D.length&&(v=new k(v,R,null,n,p),g.push({event:v,listeners:D}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",v&&n!==lc&&(R=n.relatedTarget||n.fromElement)&&(Yr(R)||R[Jn]))break e;if((k||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,k?(R=n.relatedTarget||n.toElement,k=h,R=R?Yr(R):null,R!==null&&(O=hi(R),R!==O||R.tag!==5&&R.tag!==6)&&(R=null)):(k=null,R=h),k!==R)){if(D=Bf,b="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(D=$f,b="onPointerLeave",T="onPointerEnter",I="pointer"),O=k==null?v:Ri(k),A=R==null?v:Ri(R),v=new D(b,I+"leave",k,n,p),v.target=O,v.relatedTarget=A,b=null,Yr(p)===h&&(D=new D(T,I+"enter",R,n,p),D.target=A,D.relatedTarget=O,b=D),O=b,k&&R)t:{for(D=k,T=R,I=0,A=D;A;A=xi(A))I++;for(A=0,b=T;b;b=xi(b))A++;for(;0<I-A;)D=xi(D),I--;for(;0<A-I;)T=xi(T),A--;for(;I--;){if(D===T||T!==null&&D===T.alternate)break t;D=xi(D),T=xi(T)}D=null}else D=null;k!==null&&ep(g,v,k,D,!1),R!==null&&O!==null&&ep(g,O,R,D,!0)}}e:{if(v=h?Ri(h):window,k=v.nodeName&&v.nodeName.toLowerCase(),k==="select"||k==="input"&&v.type==="file")var V=S1;else if(qf(v))if(Pm)V=A1;else{V=T1;var j=E1}else(k=v.nodeName)&&k.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(V=I1);if(V&&(V=V(t,h))){Rm(g,V,n,p);break e}j&&j(t,v,h),t==="focusout"&&(j=v._wrapperState)&&j.controlled&&v.type==="number"&&rc(v,"number",v.value)}switch(j=h?Ri(h):window,t){case"focusin":(qf(j)||j.contentEditable==="true")&&(Ci=j,gc=h,Ys=null);break;case"focusout":Ys=gc=Ci=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Xf(g,n,p);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":Xf(g,n,p)}var E;if(bd)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ai?Cm(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Am&&n.locale!=="ko"&&(Ai||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ai&&(E=Im()):(yr=p,kd="value"in yr?yr.value:yr.textContent,Ai=!0)),j=Za(h,_),0<j.length&&(_=new Uf(_,t,null,n,p),g.push({event:_,listeners:j}),E?_.data=E:(E=km(n),E!==null&&(_.data=E)))),(E=y1?v1(t,n):_1(t,n))&&(h=Za(h,"onBeforeInput"),0<h.length&&(p=new Uf("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=E))}zm(g,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Za(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ao(t,n),s!=null&&r.unshift(go(t,s,i)),s=ao(t,e),s!=null&&r.push(go(t,s,i))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ep(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=ao(n,s),u!=null&&o.unshift(go(n,u,l))):i||(u=ao(n,s),u!=null&&o.push(go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var N1=/\r\n?/g,M1=/\u0000|\uFFFD/g;function tp(t){return(typeof t=="string"?t:""+t).replace(N1,`
`).replace(M1,"")}function va(t,e,n){if(e=tp(e),tp(t)!==e&&n)throw Error(U(425))}function el(){}var yc=null,vc=null;function _c(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xc=typeof setTimeout=="function"?setTimeout:void 0,V1=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(t){return np.resolve(null).then(t).catch(L1)}:xc;function L1(t){setTimeout(function(){throw t})}function Du(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);co(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var os=Math.random().toString(36).slice(2),Dn="__reactFiber$"+os,mo="__reactProps$"+os,Jn="__reactContainer$"+os,wc="__reactEvents$"+os,O1="__reactListeners$"+os,F1="__reactHandles$"+os;function Yr(t){var e=t[Dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[Dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rp(t);t!==null;){if(n=t[Dn])return n;t=rp(t)}return e}t=n,n=t.parentNode}return null}function jo(t){return t=t[Dn]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Nl(t){return t[mo]||null}var Sc=[],Pi=-1;function Or(t){return{current:t}}function Ve(t){0>Pi||(t.current=Sc[Pi],Sc[Pi]=null,Pi--)}function be(t,e){Pi++,Sc[Pi]=t.current,t.current=e}var Nr={},Ct=Or(Nr),Ft=Or(!1),ri=Nr;function Wi(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function tl(){Ve(Ft),Ve(Ct)}function ip(t,e,n){if(Ct.current!==Nr)throw Error(U(168));be(Ct,e),be(Ft,n)}function Um(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,E_(t)||"Unknown",i));return Be({},n,r)}function nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,ri=Ct.current,be(Ct,t),be(Ft,Ft.current),!0}function sp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Um(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Ve(Ft),Ve(Ct),be(Ct,t)):Ve(Ft),be(Ft,n)}var Wn=null,Ml=!1,Nu=!1;function $m(t){Wn===null?Wn=[t]:Wn.push(t)}function z1(t){Ml=!0,$m(t)}function Fr(){if(!Nu&&Wn!==null){Nu=!0;var t=0,e=Ee;try{var n=Wn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,Ml=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),pm(Td,Fr),i}finally{Ee=e,Nu=!1}}return null}var bi=[],Di=0,rl=null,il=0,an=[],ln=0,ii=null,qn=1,Gn="";function Gr(t,e){bi[Di++]=il,bi[Di++]=rl,rl=t,il=e}function Wm(t,e,n){an[ln++]=qn,an[ln++]=Gn,an[ln++]=ii,ii=t;var r=qn;t=Gn;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var s=32-Sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qn=1<<32-Sn(e)+i|n<<i|r,Gn=s+t}else qn=1<<s|n<<i|r,Gn=t}function Nd(t){t.return!==null&&(Gr(t,1),Wm(t,1,0))}function Md(t){for(;t===rl;)rl=bi[--Di],bi[Di]=null,il=bi[--Di],bi[Di]=null;for(;t===ii;)ii=an[--ln],an[ln]=null,Gn=an[--ln],an[ln]=null,qn=an[--ln],an[ln]=null}var en=null,Xt=null,je=!1,wn=null;function Hm(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function op(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Xt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:qn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Xt=null,!0):!1;default:return!1}}function Ec(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tc(t){if(je){var e=Xt;if(e){var n=e;if(!op(t,e)){if(Ec(t))throw Error(U(418));e=Er(n.nextSibling);var r=en;e&&op(t,e)?Hm(r,n):(t.flags=t.flags&-4097|2,je=!1,en=t)}}else{if(Ec(t))throw Error(U(418));t.flags=t.flags&-4097|2,je=!1,en=t}}}function ap(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function _a(t){if(t!==en)return!1;if(!je)return ap(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_c(t.type,t.memoizedProps)),e&&(e=Xt)){if(Ec(t))throw qm(),Error(U(418));for(;e;)Hm(t,e),e=Er(e.nextSibling)}if(ap(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=en?Er(t.stateNode.nextSibling):null;return!0}function qm(){for(var t=Xt;t;)t=Er(t.nextSibling)}function Hi(){Xt=en=null,je=!1}function Vd(t){wn===null?wn=[t]:wn.push(t)}var B1=sr.ReactCurrentBatchConfig;function Ms(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function xa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lp(t){var e=t._init;return e(t._payload)}function Gm(t){function e(T,I){if(t){var A=T.deletions;A===null?(T.deletions=[I],T.flags|=16):A.push(I)}}function n(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function r(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function i(T,I){return T=Cr(T,I),T.index=0,T.sibling=null,T}function s(T,I,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<I?(T.flags|=2,I):A):(T.flags|=2,I)):(T.flags|=1048576,I)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,I,A,b){return I===null||I.tag!==6?(I=zu(A,T.mode,b),I.return=T,I):(I=i(I,A),I.return=T,I)}function u(T,I,A,b){var V=A.type;return V===Ii?p(T,I,A.props.children,b,A.key):I!==null&&(I.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===fr&&lp(V)===I.type)?(b=i(I,A.props),b.ref=Ms(T,I,A),b.return=T,b):(b=za(A.type,A.key,A.props,null,T.mode,b),b.ref=Ms(T,I,A),b.return=T,b)}function h(T,I,A,b){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=Bu(A,T.mode,b),I.return=T,I):(I=i(I,A.children||[]),I.return=T,I)}function p(T,I,A,b,V){return I===null||I.tag!==7?(I=ti(A,T.mode,b,V),I.return=T,I):(I=i(I,A),I.return=T,I)}function g(T,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=zu(""+I,T.mode,A),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ua:return A=za(I.type,I.key,I.props,null,T.mode,A),A.ref=Ms(T,null,I),A.return=T,A;case Ti:return I=Bu(I,T.mode,A),I.return=T,I;case fr:var b=I._init;return g(T,b(I._payload),A)}if(Fs(I)||Rs(I))return I=ti(I,T.mode,A,null),I.return=T,I;xa(T,I)}return null}function v(T,I,A,b){var V=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return V!==null?null:l(T,I,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ua:return A.key===V?u(T,I,A,b):null;case Ti:return A.key===V?h(T,I,A,b):null;case fr:return V=A._init,v(T,I,V(A._payload),b)}if(Fs(A)||Rs(A))return V!==null?null:p(T,I,A,b,null);xa(T,A)}return null}function k(T,I,A,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(A)||null,l(I,T,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ua:return T=T.get(b.key===null?A:b.key)||null,u(I,T,b,V);case Ti:return T=T.get(b.key===null?A:b.key)||null,h(I,T,b,V);case fr:var j=b._init;return k(T,I,A,j(b._payload),V)}if(Fs(b)||Rs(b))return T=T.get(A)||null,p(I,T,b,V,null);xa(I,b)}return null}function R(T,I,A,b){for(var V=null,j=null,E=I,_=I=0,m=null;E!==null&&_<A.length;_++){E.index>_?(m=E,E=null):m=E.sibling;var w=v(T,E,A[_],b);if(w===null){E===null&&(E=m);break}t&&E&&w.alternate===null&&e(T,E),I=s(w,I,_),j===null?V=w:j.sibling=w,j=w,E=m}if(_===A.length)return n(T,E),je&&Gr(T,_),V;if(E===null){for(;_<A.length;_++)E=g(T,A[_],b),E!==null&&(I=s(E,I,_),j===null?V=E:j.sibling=E,j=E);return je&&Gr(T,_),V}for(E=r(T,E);_<A.length;_++)m=k(E,T,_,A[_],b),m!==null&&(t&&m.alternate!==null&&E.delete(m.key===null?_:m.key),I=s(m,I,_),j===null?V=m:j.sibling=m,j=m);return t&&E.forEach(function(S){return e(T,S)}),je&&Gr(T,_),V}function D(T,I,A,b){var V=Rs(A);if(typeof V!="function")throw Error(U(150));if(A=V.call(A),A==null)throw Error(U(151));for(var j=V=null,E=I,_=I=0,m=null,w=A.next();E!==null&&!w.done;_++,w=A.next()){E.index>_?(m=E,E=null):m=E.sibling;var S=v(T,E,w.value,b);if(S===null){E===null&&(E=m);break}t&&E&&S.alternate===null&&e(T,E),I=s(S,I,_),j===null?V=S:j.sibling=S,j=S,E=m}if(w.done)return n(T,E),je&&Gr(T,_),V;if(E===null){for(;!w.done;_++,w=A.next())w=g(T,w.value,b),w!==null&&(I=s(w,I,_),j===null?V=w:j.sibling=w,j=w);return je&&Gr(T,_),V}for(E=r(T,E);!w.done;_++,w=A.next())w=k(E,T,_,w.value,b),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?_:w.key),I=s(w,I,_),j===null?V=w:j.sibling=w,j=w);return t&&E.forEach(function(C){return e(T,C)}),je&&Gr(T,_),V}function O(T,I,A,b){if(typeof A=="object"&&A!==null&&A.type===Ii&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ua:e:{for(var V=A.key,j=I;j!==null;){if(j.key===V){if(V=A.type,V===Ii){if(j.tag===7){n(T,j.sibling),I=i(j,A.props.children),I.return=T,T=I;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===fr&&lp(V)===j.type){n(T,j.sibling),I=i(j,A.props),I.ref=Ms(T,j,A),I.return=T,T=I;break e}n(T,j);break}else e(T,j);j=j.sibling}A.type===Ii?(I=ti(A.props.children,T.mode,b,A.key),I.return=T,T=I):(b=za(A.type,A.key,A.props,null,T.mode,b),b.ref=Ms(T,I,A),b.return=T,T=b)}return o(T);case Ti:e:{for(j=A.key;I!==null;){if(I.key===j)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(T,I.sibling),I=i(I,A.children||[]),I.return=T,T=I;break e}else{n(T,I);break}else e(T,I);I=I.sibling}I=Bu(A,T.mode,b),I.return=T,T=I}return o(T);case fr:return j=A._init,O(T,I,j(A._payload),b)}if(Fs(A))return R(T,I,A,b);if(Rs(A))return D(T,I,A,b);xa(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(T,I.sibling),I=i(I,A),I.return=T,T=I):(n(T,I),I=zu(A,T.mode,b),I.return=T,T=I),o(T)):n(T,I)}return O}var qi=Gm(!0),Qm=Gm(!1),sl=Or(null),ol=null,Ni=null,jd=null;function Ld(){jd=Ni=ol=null}function Od(t){var e=sl.current;Ve(sl),t._currentValue=e}function Ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zi(t,e){ol=t,jd=Ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(jd!==t)if(t={context:t,memoizedValue:e,next:null},Ni===null){if(ol===null)throw Error(U(308));Ni=t,ol.dependencies={lanes:0,firstContext:t}}else Ni=Ni.next=t;return e}var Xr=null;function Fd(t){Xr===null?Xr=[t]:Xr.push(t)}function Km(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function zd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zn(t,n)}return i=r.interleaved,i===null?(e.next=e,Fd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zn(t,n)}function Ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Id(t,n)}}function up(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function al(t,e,n,r){var i=t.updateQueue;pr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,p=h=u=null,l=s;do{var v=l.lane,k=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,D=l;switch(v=e,k=n,D.tag){case 1:if(R=D.payload,typeof R=="function"){g=R.call(k,g,v);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=D.payload,v=typeof R=="function"?R.call(k,g,v):R,v==null)break e;g=Be({},g,v);break e;case 2:pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else k={eventTime:k,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,u=g):p=p.next=k,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=g}}function cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Lo={},Mn=Or(Lo),yo=Or(Lo),vo=Or(Lo);function Jr(t){if(t===Lo)throw Error(U(174));return t}function Bd(t,e){switch(be(vo,e),be(yo,t),be(Mn,Lo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sc(e,t)}Ve(Mn),be(Mn,e)}function Gi(){Ve(Mn),Ve(yo),Ve(vo)}function Xm(t){Jr(vo.current);var e=Jr(Mn.current),n=sc(e,t.type);e!==n&&(be(yo,t),be(Mn,n))}function Ud(t){yo.current===t&&(Ve(Mn),Ve(yo))}var Fe=Or(0);function ll(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mu=[];function $d(){for(var t=0;t<Mu.length;t++)Mu[t]._workInProgressVersionPrimary=null;Mu.length=0}var Va=sr.ReactCurrentDispatcher,Vu=sr.ReactCurrentBatchConfig,si=0,ze=null,nt=null,lt=null,ul=!1,Xs=!1,_o=0,U1=0;function St(){throw Error(U(321))}function Wd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function Hd(t,e,n,r,i,s){if(si=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Va.current=t===null||t.memoizedState===null?q1:G1,t=n(r,i),Xs){s=0;do{if(Xs=!1,_o=0,25<=s)throw Error(U(301));s+=1,lt=nt=null,e.updateQueue=null,Va.current=Q1,t=n(r,i)}while(Xs)}if(Va.current=cl,e=nt!==null&&nt.next!==null,si=0,lt=nt=ze=null,ul=!1,e)throw Error(U(300));return t}function qd(){var t=_o!==0;return _o=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?ze.memoizedState=lt=t:lt=lt.next=t,lt}function fn(){if(nt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=lt===null?ze.memoizedState:lt.next;if(e!==null)lt=e,nt=t;else{if(t===null)throw Error(U(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},lt===null?ze.memoizedState=lt=t:lt=lt.next=t}return lt}function xo(t,e){return typeof e=="function"?e(t):e}function ju(t){var e=fn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((si&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,ze.lanes|=p,oi|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,In(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lu(t){var e=fn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);In(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Jm(){}function Zm(t,e){var n=ze,r=fn(),i=e(),s=!In(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,Gd(ny.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,wo(9,ty.bind(null,n,r,i,e),void 0,null),ut===null)throw Error(U(349));si&30||ey(n,e,i)}return i}function ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ty(t,e,n,r){e.value=n,e.getSnapshot=r,ry(e)&&iy(t)}function ny(t,e,n){return n(function(){ry(e)&&iy(t)})}function ry(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function iy(t){var e=Zn(t,1);e!==null&&En(e,t,1,-1)}function dp(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=H1.bind(null,ze,t),[e.memoizedState,t]}function wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sy(){return fn().memoizedState}function ja(t,e,n,r){var i=bn();ze.flags|=t,i.memoizedState=wo(1|e,n,void 0,r===void 0?null:r)}function Vl(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(nt!==null){var o=nt.memoizedState;if(s=o.destroy,r!==null&&Wd(r,o.deps)){i.memoizedState=wo(e,n,s,r);return}}ze.flags|=t,i.memoizedState=wo(1|e,n,s,r)}function hp(t,e){return ja(8390656,8,t,e)}function Gd(t,e){return Vl(2048,8,t,e)}function oy(t,e){return Vl(4,2,t,e)}function ay(t,e){return Vl(4,4,t,e)}function ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uy(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4,4,ly.bind(null,e,t),n)}function Qd(){}function cy(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dy(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hy(t,e,n){return si&21?(In(n,e)||(n=ym(),ze.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function $1(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Vu.transition;Vu.transition={};try{t(!1),e()}finally{Ee=n,Vu.transition=r}}function fy(){return fn().memoizedState}function W1(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},py(t))gy(e,n);else if(n=Km(t,e,n,r),n!==null){var i=Pt();En(n,t,r,i),my(n,e,r)}}function H1(t,e,n){var r=Ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(t))gy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,In(l,o)){var u=e.interleaved;u===null?(i.next=i,Fd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Km(t,e,i,r),n!==null&&(i=Pt(),En(n,t,r,i),my(n,e,r))}}function py(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function gy(t,e){Xs=ul=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function my(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Id(t,n)}}var cl={readContext:hn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},q1={readContext:hn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:hp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ja(4194308,4,ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return ja(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W1.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:dp,useDebugValue:Qd,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=dp(!1),e=t[0];return t=$1.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=bn();if(je){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ut===null)throw Error(U(349));si&30||ey(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hp(ny.bind(null,r,s,t),[t]),r.flags|=2048,wo(9,ty.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=ut.identifierPrefix;if(je){var n=Gn,r=qn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G1={readContext:hn,useCallback:cy,useContext:hn,useEffect:Gd,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:dy,useReducer:ju,useRef:sy,useState:function(){return ju(xo)},useDebugValue:Qd,useDeferredValue:function(t){var e=fn();return hy(e,nt.memoizedState,t)},useTransition:function(){var t=ju(xo)[0],e=fn().memoizedState;return[t,e]},useMutableSource:Jm,useSyncExternalStore:Zm,useId:fy,unstable_isNewReconciler:!1},Q1={readContext:hn,useCallback:cy,useContext:hn,useEffect:Gd,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:dy,useReducer:Lu,useRef:sy,useState:function(){return Lu(xo)},useDebugValue:Qd,useDeferredValue:function(t){var e=fn();return nt===null?e.memoizedState=t:hy(e,nt.memoizedState,t)},useTransition:function(){var t=Lu(xo)[0],e=fn().memoizedState;return[t,e]},useMutableSource:Jm,useSyncExternalStore:Zm,useId:fy,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ac(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jl={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Ar(t),s=Qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Tr(t,s,i),e!==null&&(En(e,t,i,r),Ma(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Ar(t),s=Qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Tr(t,s,i),e!==null&&(En(e,t,i,r),Ma(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Ar(t),i=Qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Tr(t,i,r),e!==null&&(En(e,t,r,n),Ma(e,t,r))}};function fp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fo(n,r)||!fo(i,s):!0}function yy(t,e,n){var r=!1,i=Nr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=zt(e)?ri:Ct.current,r=e.contextTypes,s=(r=r!=null)?Wi(t,i):Nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jl.enqueueReplaceState(e,e.state,null)}function Cc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=zt(e)?ri:Ct.current,i.context=Wi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ac(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jl.enqueueReplaceState(i,i.state,null),al(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qi(t,e){try{var n="",r=e;do n+=S_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ou(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K1=typeof WeakMap=="function"?WeakMap:Map;function vy(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hl||(hl=!0,Oc=r),kc(t,e)},n}function _y(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kc(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ux.bind(null,t,e,n),e.then(t,t))}function mp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var Y1=sr.ReactCurrentOwner,Ot=!1;function Rt(t,e,n,r){e.child=t===null?Qm(e,null,n,r):qi(e,t.child,n,r)}function vp(t,e,n,r,i){n=n.render;var s=e.ref;return zi(e,i),r=Hd(t,e,n,r,s,i),n=qd(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(je&&n&&Nd(e),e.flags|=1,Rt(t,e,r,i),e.child)}function _p(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!nh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xy(t,e,s,r,i)):(t=za(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fo,n(o,r)&&t.ref===e.ref)return er(t,e,i)}return e.flags|=1,t=Cr(s,r),t.ref=e.ref,t.return=e,e.child=t}function xy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fo(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,er(t,e,i)}return Rc(t,e,n,r,i)}function wy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Vi,Yt),Yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Vi,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(Vi,Yt),Yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(Vi,Yt),Yt|=r;return Rt(t,e,i,n),e.child}function Sy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rc(t,e,n,r,i){var s=zt(n)?ri:Ct.current;return s=Wi(e,s),zi(e,i),n=Hd(t,e,n,r,s,i),r=qd(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(je&&r&&Nd(e),e.flags|=1,Rt(t,e,n,i),e.child)}function xp(t,e,n,r,i){if(zt(n)){var s=!0;nl(e)}else s=!1;if(zi(e,i),e.stateNode===null)La(t,e),yy(e,n,r),Cc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=hn(h):(h=zt(n)?ri:Ct.current,h=Wi(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&pp(e,o,r,h),pr=!1;var v=e.memoizedState;o.state=v,al(e,r,o,i),u=e.memoizedState,l!==r||v!==u||Ft.current||pr?(typeof p=="function"&&(Ac(e,n,p,r),u=e.memoizedState),(l=pr||fp(e,n,l,r,v,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ym(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:_n(e.type,l),o.props=h,g=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=zt(n)?ri:Ct.current,u=Wi(e,u));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||v!==u)&&pp(e,o,r,u),pr=!1,v=e.memoizedState,o.state=v,al(e,r,o,i);var R=e.memoizedState;l!==g||v!==R||Ft.current||pr?(typeof k=="function"&&(Ac(e,n,k,r),R=e.memoizedState),(h=pr||fp(e,n,h,r,v,R,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Pc(t,e,n,r,s,i)}function Pc(t,e,n,r,i,s){Sy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sp(e,n,!1),er(t,e,s);r=e.stateNode,Y1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qi(e,t.child,null,s),e.child=qi(e,null,l,s)):Rt(t,e,l,s),e.memoizedState=r.state,i&&sp(e,n,!0),e.child}function Ey(t){var e=t.stateNode;e.pendingContext?ip(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ip(t,e.context,!1),Bd(t,e.containerInfo)}function wp(t,e,n,r,i){return Hi(),Vd(i),e.flags|=256,Rt(t,e,n,r),e.child}var bc={dehydrated:null,treeContext:null,retryLane:0};function Dc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ty(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Fe,i&1),t===null)return Tc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fl(o,r,0,null),t=ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dc(n),e.memoizedState=bc,t):Kd(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return X1(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Cr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Cr(l,s):(s=ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Dc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bc,r}return s=t.child,t=s.sibling,r=Cr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kd(t,e){return e=Fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wa(t,e,n,r){return r!==null&&Vd(r),qi(e,t.child,null,n),t=Kd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ou(Error(U(422))),wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fl({mode:"visible",children:r.children},i,0,null),s=ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qi(e,t.child,null,o),e.child.memoizedState=Dc(o),e.memoizedState=bc,s);if(!(e.mode&1))return wa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Ou(s,r,void 0),wa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ot||l){if(r=ut,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(t,i),En(r,t,i,-1))}return th(),r=Ou(Error(U(421))),wa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=cx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xt=Er(i.nextSibling),en=e,je=!0,wn=null,t!==null&&(an[ln++]=qn,an[ln++]=Gn,an[ln++]=ii,qn=t.id,Gn=t.overflow,ii=e),e=Kd(e,r.children),e.flags|=4096,e)}function Sp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ic(t.return,e,n)}function Fu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Iy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sp(t,n,e);else if(t.tag===19)Sp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ll(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ll(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fu(e,!0,n,null,s);break;case"together":Fu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function La(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J1(t,e,n){switch(e.tag){case 3:Ey(e),Hi();break;case 5:Xm(e);break;case 1:zt(e.type)&&nl(e);break;case 4:Bd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(sl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?Ty(t,e,n):(be(Fe,Fe.current&1),t=er(t,e,n),t!==null?t.sibling:null);be(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Iy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,wy(t,e,n)}return er(t,e,n)}var Ay,Nc,Cy,ky;Ay=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nc=function(){};Cy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jr(Mn.current);var s=null;switch(n){case"input":i=tc(t,i),r=tc(t,r),s=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),s=[];break;case"textarea":i=ic(t,i),r=ic(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=el)}oc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(so.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(so.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ne("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vs(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z1(t,e,n){var r=e.pendingProps;switch(Md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return zt(e.type)&&tl(),Et(e),null;case 3:return r=e.stateNode,Gi(),Ve(Ft),Ve(Ct),$d(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Bc(wn),wn=null))),Nc(t,e),Et(e),null;case 5:Ud(e);var i=Jr(vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Cy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Et(e),null}if(t=Jr(Mn.current),_a(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Dn]=e,r[mo]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<Bs.length;i++)Ne(Bs[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":bf(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Nf(r,s),Ne("invalid",r)}oc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&va(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&va(r.textContent,l,t),i=["children",""+l]):so.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":ca(r),Df(r,s,!0);break;case"textarea":ca(r),Mf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=el)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dn]=e,t[mo]=r,Ay(t,e,!1,!1),e.stateNode=t;e:{switch(o=ac(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bs.length;i++)Ne(Bs[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":bf(t,r),i=tc(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Nf(t,r),i=ic(t,r),Ne("invalid",t);break;default:i=r}oc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?sm(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rm(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&oo(t,u):typeof u=="number"&&oo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(so.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ne("scroll",t):u!=null&&_d(t,s,u,o))}switch(n){case"input":ca(t),Df(t,r,!1);break;case"textarea":ca(t),Mf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ji(t,!!r.multiple,s,!1):r.defaultValue!=null&&ji(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=el)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Jr(vo.current),Jr(Mn.current),_a(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dn]=e,(s=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ve(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Xt!==null&&e.mode&1&&!(e.flags&128))qm(),Hi(),e.flags|=98560,s=!1;else if(s=_a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Dn]=e}else Hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else wn!==null&&(Bc(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?rt===0&&(rt=3):th())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Gi(),Nc(t,e),t===null&&po(e.stateNode.containerInfo),Et(e),null;case 10:return Od(e.type._context),Et(e),null;case 17:return zt(e.type)&&tl(),Et(e),null;case 19:if(Ve(Fe),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vs(s,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ll(t),o!==null){for(e.flags|=128,Vs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>Ki&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304)}else{if(!r)if(t=ll(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Et(e),null}else 2*Ke()-s.renderingStartTime>Ki&&n!==1073741824&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,be(Fe,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return eh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function ex(t,e){switch(Md(e),e.tag){case 1:return zt(e.type)&&tl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),Ve(Ft),Ve(Ct),$d(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ud(e),null;case 13:if(Ve(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Fe),null;case 4:return Gi(),null;case 10:return Od(e.type._context),null;case 22:case 23:return eh(),null;case 24:return null;default:return null}}var Sa=!1,It=!1,tx=typeof WeakSet=="function"?WeakSet:Set,J=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Mc(t,e,n){try{n()}catch(r){qe(t,e,r)}}var Ep=!1;function nx(t,e){if(yc=Xa,t=Nm(),Dd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,g=t,v=null;t:for(;;){for(var k;g!==n||i!==0&&g.nodeType!==3||(l=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(k=g.firstChild)!==null;)v=g,g=k;for(;;){if(g===t)break t;if(v===n&&++h===i&&(l=o),v===s&&++p===r&&(u=o),(k=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vc={focusedElem:t,selectionRange:n},Xa=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var D=R.memoizedProps,O=R.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?D:_n(e.type,D),O);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){qe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return R=Ep,Ep=!1,R}function Js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Mc(e,n,s)}i=i.next}while(i!==r)}}function Ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ry(t){var e=t.alternate;e!==null&&(t.alternate=null,Ry(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[mo],delete e[wc],delete e[O1],delete e[F1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Py(t){return t.tag===5||t.tag===3||t.tag===4}function Tp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=el));else if(r!==4&&(t=t.child,t!==null))for(jc(t,e,n),t=t.sibling;t!==null;)jc(t,e,n),t=t.sibling}function Lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}var dt=null,xn=!1;function hr(t,e,n){for(n=n.child;n!==null;)by(t,e,n),n=n.sibling}function by(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:It||Mi(n,e);case 6:var r=dt,i=xn;dt=null,hr(t,e,n),dt=r,xn=i,dt!==null&&(xn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(xn?(t=dt,n=n.stateNode,t.nodeType===8?Du(t.parentNode,n):t.nodeType===1&&Du(t,n),co(t)):Du(dt,n.stateNode));break;case 4:r=dt,i=xn,dt=n.stateNode.containerInfo,xn=!0,hr(t,e,n),dt=r,xn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Mc(n,e,o),i=i.next}while(i!==r)}hr(t,e,n);break;case 1:if(!It&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,hr(t,e,n),It=r):hr(t,e,n);break;default:hr(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tx),e.forEach(function(r){var i=dx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,xn=!1;break e;case 3:dt=l.stateNode.containerInfo,xn=!0;break e;case 4:dt=l.stateNode.containerInfo,xn=!0;break e}l=l.return}if(dt===null)throw Error(U(160));by(s,o,i),dt=null,xn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){qe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dy(e,t),e=e.sibling}function Dy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Pn(t),r&4){try{Js(3,t,t.return),Ll(3,t)}catch(D){qe(t,t.return,D)}try{Js(5,t,t.return)}catch(D){qe(t,t.return,D)}}break;case 1:vn(e,t),Pn(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(vn(e,t),Pn(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var i=t.stateNode;try{oo(i,"")}catch(D){qe(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&em(i,s),ac(l,o);var h=ac(l,s);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?sm(i,g):p==="dangerouslySetInnerHTML"?rm(i,g):p==="children"?oo(i,g):_d(i,p,g,h)}switch(l){case"input":nc(i,s);break;case"textarea":tm(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?ji(i,!!s.multiple,k,!1):v!==!!s.multiple&&(s.defaultValue!=null?ji(i,!!s.multiple,s.defaultValue,!0):ji(i,!!s.multiple,s.multiple?[]:"",!1))}i[mo]=s}catch(D){qe(t,t.return,D)}}break;case 6:if(vn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(D){qe(t,t.return,D)}}break;case 3:if(vn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(D){qe(t,t.return,D)}break;case 4:vn(e,t),Pn(t);break;case 13:vn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jd=Ke())),r&4&&Ip(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(It=(h=It)||p,vn(e,t),It=h):vn(e,t),Pn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(g=J=p;J!==null;){switch(v=J,k=v.child,v.tag){case 0:case 11:case 14:case 15:Js(4,v,v.return);break;case 1:Mi(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(D){qe(r,n,D)}}break;case 5:Mi(v,v.return);break;case 22:if(v.memoizedState!==null){Cp(g);continue}}k!==null?(k.return=v,J=k):Cp(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=im("display",o))}catch(D){qe(t,t.return,D)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(D){qe(t,t.return,D)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:vn(e,t),Pn(t),r&4&&Ip(t);break;case 21:break;default:vn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Py(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oo(i,""),r.flags&=-33);var s=Tp(t);Lc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Tp(t);jc(t,l,o);break;default:throw Error(U(161))}}catch(u){qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rx(t,e,n){J=t,Ny(t)}function Ny(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sa;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||It;l=Sa;var h=It;if(Sa=o,(It=u)&&!h)for(J=i;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?kp(i):u!==null?(u.return=o,J=u):kp(i);for(;s!==null;)J=s,Ny(s),s=s.sibling;J=i,Sa=l,It=h}Ap(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):Ap(t)}}function Ap(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&co(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}It||e.flags&512&&Vc(e)}catch(v){qe(e,e.return,v)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Cp(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function kp(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ll(4,e)}catch(u){qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){qe(e,i,u)}}var s=e.return;try{Vc(e)}catch(u){qe(e,s,u)}break;case 5:var o=e.return;try{Vc(e)}catch(u){qe(e,o,u)}}}catch(u){qe(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var ix=Math.ceil,dl=sr.ReactCurrentDispatcher,Yd=sr.ReactCurrentOwner,dn=sr.ReactCurrentBatchConfig,ve=0,ut=null,Je=null,gt=0,Yt=0,Vi=Or(0),rt=0,So=null,oi=0,Ol=0,Xd=0,Zs=null,jt=null,Jd=0,Ki=1/0,$n=null,hl=!1,Oc=null,Ir=null,Ea=!1,vr=null,fl=0,eo=0,Fc=null,Oa=-1,Fa=0;function Pt(){return ve&6?Ke():Oa!==-1?Oa:Oa=Ke()}function Ar(t){return t.mode&1?ve&2&&gt!==0?gt&-gt:B1.transition!==null?(Fa===0&&(Fa=ym()),Fa):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Tm(t.type)),t):1}function En(t,e,n,r){if(50<eo)throw eo=0,Fc=null,Error(U(185));Mo(t,n,r),(!(ve&2)||t!==ut)&&(t===ut&&(!(ve&2)&&(Ol|=n),rt===4&&mr(t,gt)),Bt(t,r),n===1&&ve===0&&!(e.mode&1)&&(Ki=Ke()+500,Ml&&Fr()))}function Bt(t,e){var n=t.callbackNode;B_(t,e);var r=Ya(t,t===ut?gt:0);if(r===0)n!==null&&Lf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lf(n),e===1)t.tag===0?z1(Rp.bind(null,t)):$m(Rp.bind(null,t)),j1(function(){!(ve&6)&&Fr()}),n=null;else{switch(vm(r)){case 1:n=Td;break;case 4:n=gm;break;case 16:n=Ka;break;case 536870912:n=mm;break;default:n=Ka}n=By(n,My.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function My(t,e){if(Oa=-1,Fa=0,ve&6)throw Error(U(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var r=Ya(t,t===ut?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pl(t,r);else{e=r;var i=ve;ve|=2;var s=jy();(ut!==t||gt!==e)&&($n=null,Ki=Ke()+500,ei(t,e));do try{ax();break}catch(l){Vy(t,l)}while(!0);Ld(),dl.current=s,ve=i,Je!==null?e=0:(ut=null,gt=0,e=rt)}if(e!==0){if(e===2&&(i=hc(t),i!==0&&(r=i,e=zc(t,i))),e===1)throw n=So,ei(t,0),mr(t,r),Bt(t,Ke()),n;if(e===6)mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!sx(i)&&(e=pl(t,r),e===2&&(s=hc(t),s!==0&&(r=s,e=zc(t,s))),e===1))throw n=So,ei(t,0),mr(t,r),Bt(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Qr(t,jt,$n);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Jd+500-Ke(),10<e)){if(Ya(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xc(Qr.bind(null,t,jt,$n),e);break}Qr(t,jt,$n);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ix(r/1960))-r,10<r){t.timeoutHandle=xc(Qr.bind(null,t,jt,$n),r);break}Qr(t,jt,$n);break;case 5:Qr(t,jt,$n);break;default:throw Error(U(329))}}}return Bt(t,Ke()),t.callbackNode===n?My.bind(null,t):null}function zc(t,e){var n=Zs;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=pl(t,e),t!==2&&(e=jt,jt=n,e!==null&&Bc(e)),t}function Bc(t){jt===null?jt=t:jt.push.apply(jt,t)}function sx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!In(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Xd,e&=~Ol,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Rp(t){if(ve&6)throw Error(U(327));Bi();var e=Ya(t,0);if(!(e&1))return Bt(t,Ke()),null;var n=pl(t,e);if(t.tag!==0&&n===2){var r=hc(t);r!==0&&(e=r,n=zc(t,r))}if(n===1)throw n=So,ei(t,0),mr(t,e),Bt(t,Ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qr(t,jt,$n),Bt(t,Ke()),null}function Zd(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Ki=Ke()+500,Ml&&Fr())}}function ai(t){vr!==null&&vr.tag===0&&!(ve&6)&&Bi();var e=ve;ve|=1;var n=dn.transition,r=Ee;try{if(dn.transition=null,Ee=1,t)return t()}finally{Ee=r,dn.transition=n,ve=e,!(ve&6)&&Fr()}}function eh(){Yt=Vi.current,Ve(Vi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V1(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tl();break;case 3:Gi(),Ve(Ft),Ve(Ct),$d();break;case 5:Ud(r);break;case 4:Gi();break;case 13:Ve(Fe);break;case 19:Ve(Fe);break;case 10:Od(r.type._context);break;case 22:case 23:eh()}n=n.return}if(ut=t,Je=t=Cr(t.current,null),gt=Yt=e,rt=0,So=null,Xd=Ol=oi=0,jt=Zs=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xr=null}return t}function Vy(t,e){do{var n=Je;try{if(Ld(),Va.current=cl,ul){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ul=!1}if(si=0,lt=nt=ze=null,Xs=!1,_o=0,Yd.current=null,n===null||n.return===null){rt=1,So=e,Je=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=gt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=mp(o);if(k!==null){k.flags&=-257,yp(k,o,l,s,e),k.mode&1&&gp(s,h,e),e=k,u=h;var R=e.updateQueue;if(R===null){var D=new Set;D.add(u),e.updateQueue=D}else R.add(u);break e}else{if(!(e&1)){gp(s,h,e),th();break e}u=Error(U(426))}}else if(je&&l.mode&1){var O=mp(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),yp(O,o,l,s,e),Vd(Qi(u,l));break e}}s=u=Qi(u,l),rt!==4&&(rt=2),Zs===null?Zs=[s]:Zs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=vy(s,u,e);up(s,T);break e;case 1:l=u;var I=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ir===null||!Ir.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=_y(s,l,e);up(s,b);break e}}s=s.return}while(s!==null)}Oy(n)}catch(V){e=V,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function jy(){var t=dl.current;return dl.current=cl,t===null?cl:t}function th(){(rt===0||rt===3||rt===2)&&(rt=4),ut===null||!(oi&268435455)&&!(Ol&268435455)||mr(ut,gt)}function pl(t,e){var n=ve;ve|=2;var r=jy();(ut!==t||gt!==e)&&($n=null,ei(t,e));do try{ox();break}catch(i){Vy(t,i)}while(!0);if(Ld(),ve=n,dl.current=r,Je!==null)throw Error(U(261));return ut=null,gt=0,rt}function ox(){for(;Je!==null;)Ly(Je)}function ax(){for(;Je!==null&&!D_();)Ly(Je)}function Ly(t){var e=zy(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?Oy(t):Je=e,Yd.current=null}function Oy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ex(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Je=null;return}}else if(n=Z1(n,e,Yt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);rt===0&&(rt=5)}function Qr(t,e,n){var r=Ee,i=dn.transition;try{dn.transition=null,Ee=1,lx(t,e,n,r)}finally{dn.transition=i,Ee=r}return null}function lx(t,e,n,r){do Bi();while(vr!==null);if(ve&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(U_(t,s),t===ut&&(Je=ut=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ea||(Ea=!0,By(Ka,function(){return Bi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=dn.transition,dn.transition=null;var o=Ee;Ee=1;var l=ve;ve|=4,Yd.current=null,nx(t,n),Dy(n,t),k1(vc),Xa=!!yc,vc=yc=null,t.current=n,rx(n),N_(),ve=l,Ee=o,dn.transition=s}else t.current=n;if(Ea&&(Ea=!1,vr=t,fl=i),s=t.pendingLanes,s===0&&(Ir=null),j_(n.stateNode),Bt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hl)throw hl=!1,t=Oc,Oc=null,t;return fl&1&&t.tag!==0&&Bi(),s=t.pendingLanes,s&1?t===Fc?eo++:(eo=0,Fc=t):eo=0,Fr(),null}function Bi(){if(vr!==null){var t=vm(fl),e=dn.transition,n=Ee;try{if(dn.transition=null,Ee=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,fl=0,ve&6)throw Error(U(331));var i=ve;for(ve|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(J=h;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:Js(8,p,s)}var g=p.child;if(g!==null)g.return=p,J=g;else for(;J!==null;){p=J;var v=p.sibling,k=p.return;if(Ry(p),p===h){J=null;break}if(v!==null){v.return=k,J=v;break}J=k}}}var R=s.alternate;if(R!==null){var D=R.child;if(D!==null){R.child=null;do{var O=D.sibling;D.sibling=null,D=O}while(D!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Js(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,J=T;break e}J=s.return}}var I=t.current;for(J=I;J!==null;){o=J;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,J=A;else e:for(o=I;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ll(9,l)}}catch(V){qe(l,l.return,V)}if(l===o){J=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,J=b;break e}J=l.return}}if(ve=i,Fr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Rl,t)}catch{}r=!0}return r}finally{Ee=n,dn.transition=e}}return!1}function Pp(t,e,n){e=Qi(n,e),e=vy(t,e,1),t=Tr(t,e,1),e=Pt(),t!==null&&(Mo(t,1,e),Bt(t,e))}function qe(t,e,n){if(t.tag===3)Pp(t,t,n);else for(;e!==null;){if(e.tag===3){Pp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=Qi(n,t),t=_y(e,t,1),e=Tr(e,t,1),t=Pt(),e!==null&&(Mo(e,1,t),Bt(e,t));break}}e=e.return}}function ux(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(gt&n)===n&&(rt===4||rt===3&&(gt&130023424)===gt&&500>Ke()-Jd?ei(t,0):Xd|=n),Bt(t,e)}function Fy(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var n=Pt();t=Zn(t,e),t!==null&&(Mo(t,e,n),Bt(t,n))}function cx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fy(t,n)}function dx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Fy(t,n)}var zy;zy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,J1(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,je&&e.flags&1048576&&Wm(e,il,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;La(t,e),t=e.pendingProps;var i=Wi(e,Ct.current);zi(e,n),i=Hd(null,e,r,t,i,n);var s=qd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,nl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zd(e),i.updater=jl,e.stateNode=i,i._reactInternals=e,Cc(e,r,t,n),e=Pc(null,e,r,!0,s,n)):(e.tag=0,je&&s&&Nd(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(La(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fx(r),t=_n(r,t),i){case 0:e=Rc(null,e,r,t,n);break e;case 1:e=xp(null,e,r,t,n);break e;case 11:e=vp(null,e,r,t,n);break e;case 14:e=_p(null,e,r,_n(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Rc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),xp(t,e,r,i,n);case 3:e:{if(Ey(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ym(t,e),al(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qi(Error(U(423)),e),e=wp(t,e,r,n,i);break e}else if(r!==i){i=Qi(Error(U(424)),e),e=wp(t,e,r,n,i);break e}else for(Xt=Er(e.stateNode.containerInfo.firstChild),en=e,je=!0,wn=null,n=Qm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hi(),r===i){e=er(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Xm(e),t===null&&Tc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_c(r,i)?o=null:s!==null&&_c(r,s)&&(e.flags|=32),Sy(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Tc(e),null;case 13:return Ty(t,e,n);case 4:return Bd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),vp(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(sl,r._currentValue),r._currentValue=o,s!==null)if(In(s.value,o)){if(s.children===i.children&&!Ft.current){e=er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Qn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ic(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ic(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zi(e,n),i=hn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),_p(t,e,r,i,n);case 15:return xy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),La(t,e),e.tag=1,zt(r)?(t=!0,nl(e)):t=!1,zi(e,n),yy(e,r,i),Cc(e,r,i,n),Pc(null,e,r,!0,t,n);case 19:return Iy(t,e,n);case 22:return wy(t,e,n)}throw Error(U(156,e.tag))};function By(t,e){return pm(t,e)}function hx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new hx(t,e,n,r)}function nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fx(t){if(typeof t=="function")return nh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wd)return 11;if(t===Sd)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function za(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")nh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ii:return ti(n.children,i,s,e);case xd:o=8,i|=8;break;case Xu:return t=cn(12,n,e,i|2),t.elementType=Xu,t.lanes=s,t;case Ju:return t=cn(13,n,e,i),t.elementType=Ju,t.lanes=s,t;case Zu:return t=cn(19,n,e,i),t.elementType=Zu,t.lanes=s,t;case Xg:return Fl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kg:o=10;break e;case Yg:o=9;break e;case wd:o=11;break e;case Sd:o=14;break e;case fr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ti(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function Fl(t,e,n,r){return t=cn(22,t,r,e),t.elementType=Xg,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function px(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rh(t,e,n,r,i,s,o,l,u){return t=new px(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(s),t}function gx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uy(t){if(!t)return Nr;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(zt(n))return Um(t,n,e)}return e}function $y(t,e,n,r,i,s,o,l,u){return t=rh(n,r,!0,t,i,s,o,l,u),t.context=Uy(null),n=t.current,r=Pt(),i=Ar(n),s=Qn(r,i),s.callback=e??null,Tr(n,s,i),t.current.lanes=i,Mo(t,i,r),Bt(t,r),t}function zl(t,e,n,r){var i=e.current,s=Pt(),o=Ar(i);return n=Uy(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tr(i,e,o),t!==null&&(En(t,i,o,s),Ma(t,i,o)),o}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ih(t,e){bp(t,e),(t=t.alternate)&&bp(t,e)}function mx(){return null}var Wy=typeof reportError=="function"?reportError:function(t){console.error(t)};function sh(t){this._internalRoot=t}Bl.prototype.render=sh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));zl(t,e,null,null)};Bl.prototype.unmount=sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){zl(null,t,null,null)}),e[Jn]=null}};function Bl(t){this._internalRoot=t}Bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=wm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&Em(t)}};function oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ul(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function yx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=gl(o);s.call(h)}}var o=$y(e,r,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=o,t[Jn]=o.current,po(t.nodeType===8?t.parentNode:t),ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=gl(u);l.call(h)}}var u=rh(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=u,t[Jn]=u.current,po(t.nodeType===8?t.parentNode:t),ai(function(){zl(e,u,n,r)}),u}function $l(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=gl(o);l.call(u)}}zl(e,o,t,i)}else o=yx(n,e,t,i,r);return gl(o)}_m=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zs(e.pendingLanes);n!==0&&(Id(e,n|1),Bt(e,Ke()),!(ve&6)&&(Ki=Ke()+500,Fr()))}break;case 13:ai(function(){var r=Zn(t,1);if(r!==null){var i=Pt();En(r,t,1,i)}}),ih(t,1)}};Ad=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=Pt();En(e,t,134217728,n)}ih(t,134217728)}};xm=function(t){if(t.tag===13){var e=Ar(t),n=Zn(t,e);if(n!==null){var r=Pt();En(n,t,e,r)}ih(t,e)}};wm=function(){return Ee};Sm=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};uc=function(t,e,n){switch(e){case"input":if(nc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nl(r);if(!i)throw Error(U(90));Zg(r),nc(r,i)}}}break;case"textarea":tm(t,n);break;case"select":e=n.value,e!=null&&ji(t,!!n.multiple,e,!1)}};lm=Zd;um=ai;var vx={usingClientEntryPoint:!1,Events:[jo,Ri,Nl,om,am,Zd]},js={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_x={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hm(t),t===null?null:t.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Rl=Ta.inject(_x),Nn=Ta}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vx;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oh(e))throw Error(U(200));return gx(t,e,null,n)};nn.createRoot=function(t,e){if(!oh(t))throw Error(U(299));var n=!1,r="",i=Wy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rh(t,1,!1,null,null,n,!1,r,i),t[Jn]=e.current,po(t.nodeType===8?t.parentNode:t),new sh(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=hm(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return ai(t)};nn.hydrate=function(t,e,n){if(!Ul(e))throw Error(U(200));return $l(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!oh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$y(e,null,t,1,n??null,i,!1,s,o),t[Jn]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bl(e)};nn.render=function(t,e,n){if(!Ul(e))throw Error(U(200));return $l(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Ul(t))throw Error(U(40));return t._reactRootContainer?(ai(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};nn.unstable_batchedUpdates=Zd;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ul(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return $l(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function Hy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hy)}catch(t){console.error(t)}}Hy(),Hg.exports=nn;var xx=Hg.exports,qy,Np=xx;qy=Np.createRoot,Np.hydrateRoot;var Mp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,k=h&63;u||(k=64,o||(v=64)),r.push(n[p],n[g],n[v],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new Sx;const v=s<<2|l>>4;if(r.push(v),h!==64){const k=l<<4&240|h>>2;if(r.push(k),g!==64){const R=h<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ex=function(t){const e=Gy(t);return Qy.encodeByteArray(e,!0)},Ky=function(t){return Ex(t).replace(/\./g,"")},Tx=function(t){try{return Qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=()=>Ix().__FIREBASE_DEFAULTS__,Cx=()=>{if(typeof process>"u"||typeof Mp>"u")return;const t=Mp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tx(t[1]);return e&&JSON.parse(e)},ah=()=>{try{return Ax()||Cx()||kx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rx=t=>{var e,n;return(n=(e=ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Px=t=>{const e=Rx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yy=()=>{var t;return(t=ah())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nx(){var t;const e=(t=ah())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mx(){return!Nx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vx(){try{return typeof indexedDB=="object"}catch{return!1}}function jx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="FirebaseError";class as extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Lx,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xy.prototype.create)}}class Xy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Ox(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new as(i,l,r)}}function Ox(t,e){return t.replace(Fx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Fx=/\{\$([^}]+)}/g;function ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vp(s)&&Vp(o)){if(!ml(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ux(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bx(t){return t===Kr?void 0:t}function Ux(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Wx={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},Hx=ye.INFO,qx={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Gx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jy{constructor(e){this.name=e,this._logLevel=Hx,this._logHandler=Gx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const Qx=(t,e)=>e.some(n=>t instanceof n);let jp,Lp;function Kx(){return jp||(jp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yx(){return Lp||(Lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zy=new WeakMap,Uc=new WeakMap,e0=new WeakMap,Uu=new WeakMap,lh=new WeakMap;function Xx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zy.set(n,t)}).catch(()=>{}),lh.set(e,t),e}function Jx(t){if(Uc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uc.set(t,e)}let $c={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||e0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zx(t){$c=t($c)}function ew(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($u(this),e,...n);return e0.set(r,e.sort?e.sort():[e]),kr(r)}:Yx().includes(t)?function(...e){return t.apply($u(this),e),kr(Zy.get(this))}:function(...e){return kr(t.apply($u(this),e))}}function tw(t){return typeof t=="function"?ew(t):(t instanceof IDBTransaction&&Jx(t),Qx(t,Kx())?new Proxy(t,$c):t)}function kr(t){if(t instanceof IDBRequest)return Xx(t);if(Uu.has(t))return Uu.get(t);const e=tw(t);return e!==t&&(Uu.set(t,e),lh.set(e,t)),e}const $u=t=>lh.get(t);function nw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(kr(o.result),u.oldVersion,u.newVersion,kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const rw=["get","getKey","getAll","getAllKeys","count"],iw=["put","add","delete","clear"],Wu=new Map;function Op(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wu.get(e))return Wu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rw.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Wu.set(e,s),s}Zx(t=>({...t,get:(e,n,r)=>Op(e,n)||t.get(e,n,r),has:(e,n)=>!!Op(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ow(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ow(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wc="@firebase/app",Fp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Jy("@firebase/app"),aw="@firebase/app-compat",lw="@firebase/analytics-compat",uw="@firebase/analytics",cw="@firebase/app-check-compat",dw="@firebase/app-check",hw="@firebase/auth",fw="@firebase/auth-compat",pw="@firebase/database",gw="@firebase/data-connect",mw="@firebase/database-compat",yw="@firebase/functions",vw="@firebase/functions-compat",_w="@firebase/installations",xw="@firebase/installations-compat",ww="@firebase/messaging",Sw="@firebase/messaging-compat",Ew="@firebase/performance",Tw="@firebase/performance-compat",Iw="@firebase/remote-config",Aw="@firebase/remote-config-compat",Cw="@firebase/storage",kw="@firebase/storage-compat",Rw="@firebase/firestore",Pw="@firebase/vertexai-preview",bw="@firebase/firestore-compat",Dw="firebase",Nw="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="[DEFAULT]",Mw={[Wc]:"fire-core",[aw]:"fire-core-compat",[uw]:"fire-analytics",[lw]:"fire-analytics-compat",[dw]:"fire-app-check",[cw]:"fire-app-check-compat",[hw]:"fire-auth",[fw]:"fire-auth-compat",[pw]:"fire-rtdb",[gw]:"fire-data-connect",[mw]:"fire-rtdb-compat",[yw]:"fire-fn",[vw]:"fire-fn-compat",[_w]:"fire-iid",[xw]:"fire-iid-compat",[ww]:"fire-fcm",[Sw]:"fire-fcm-compat",[Ew]:"fire-perf",[Tw]:"fire-perf-compat",[Iw]:"fire-rc",[Aw]:"fire-rc-compat",[Cw]:"fire-gcs",[kw]:"fire-gcs-compat",[Rw]:"fire-fst",[bw]:"fire-fst-compat",[Pw]:"fire-vertex","fire-js":"fire-js",[Dw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new Map,Vw=new Map,qc=new Map;function zp(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(qc.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;qc.set(e,t);for(const n of yl.values())zp(n,t);for(const n of Vw.values())zp(n,t);return!0}function t0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Xy("app","Firebase",jw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=Nw;function n0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=Yy()),!n)throw Rr.create("no-options");const s=yl.get(i);if(s){if(ml(n,s.options)&&ml(r,s.config))return s;throw Rr.create("duplicate-app",{appName:i})}const o=new $x(i);for(const u of qc.values())o.addComponent(u);const l=new Lw(n,r,o);return yl.set(i,l),l}function Fw(t=Hc){const e=yl.get(t);if(!e&&t===Hc&&Yy())return n0();if(!e)throw Rr.create("no-app",{appName:t});return e}function Pr(t,e,n){var r;let i=(r=Mw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(l.join(" "));return}Eo(new Yi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="firebase-heartbeat-database",Bw=1,To="firebase-heartbeat-store";let Hu=null;function r0(){return Hu||(Hu=nw(zw,Bw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Hu}async function Uw(t){try{const n=(await r0()).transaction(To),r=await n.objectStore(To).get(i0(t));return await n.done,r}catch(e){if(e instanceof as)tr.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(n.message)}}}async function Bp(t,e){try{const r=(await r0()).transaction(To,"readwrite");await r.objectStore(To).put(e,i0(t)),await r.done}catch(n){if(n instanceof as)tr.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tr.warn(r.message)}}}function i0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=1024,Ww=30*24*60*60*1e3;class Hw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Up();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Ww}),this._storage.overwrite(this._heartbeatsCache))}catch(r){tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Up(),{heartbeatsToSend:r,unsentEntries:i}=qw(this._heartbeatsCache.heartbeats),s=Ky(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return tr.warn(n),""}}}function Up(){return new Date().toISOString().substring(0,10)}function qw(t,e=$w){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$p(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$p(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Gw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vx()?jx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $p(t){return Ky(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){Eo(new Yi("platform-logger",e=>new sw(e),"PRIVATE")),Eo(new Yi("heartbeat",e=>new Hw(e),"PRIVATE")),Pr(Wc,Fp,t),Pr(Wc,Fp,"esm2017"),Pr("fire-js","")}Qw("");var Kw="firebase",Yw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(Kw,Yw,"app");var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,s0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function m(){}m.prototype=_.prototype,E.D=_.prototype,E.prototype=new m,E.prototype.constructor=E,E.C=function(w,S,C){for(var x=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)x[Q-2]=arguments[Q];return _.prototype[S].apply(w,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,m){m||(m=0);var w=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)w[S]=_.charCodeAt(m++)|_.charCodeAt(m++)<<8|_.charCodeAt(m++)<<16|_.charCodeAt(m++)<<24;else for(S=0;16>S;++S)w[S]=_[m++]|_[m++]<<8|_[m++]<<16|_[m++]<<24;_=E.g[0],m=E.g[1],S=E.g[2];var C=E.g[3],x=_+(C^m&(S^C))+w[0]+3614090360&4294967295;_=m+(x<<7&4294967295|x>>>25),x=C+(S^_&(m^S))+w[1]+3905402710&4294967295,C=_+(x<<12&4294967295|x>>>20),x=S+(m^C&(_^m))+w[2]+606105819&4294967295,S=C+(x<<17&4294967295|x>>>15),x=m+(_^S&(C^_))+w[3]+3250441966&4294967295,m=S+(x<<22&4294967295|x>>>10),x=_+(C^m&(S^C))+w[4]+4118548399&4294967295,_=m+(x<<7&4294967295|x>>>25),x=C+(S^_&(m^S))+w[5]+1200080426&4294967295,C=_+(x<<12&4294967295|x>>>20),x=S+(m^C&(_^m))+w[6]+2821735955&4294967295,S=C+(x<<17&4294967295|x>>>15),x=m+(_^S&(C^_))+w[7]+4249261313&4294967295,m=S+(x<<22&4294967295|x>>>10),x=_+(C^m&(S^C))+w[8]+1770035416&4294967295,_=m+(x<<7&4294967295|x>>>25),x=C+(S^_&(m^S))+w[9]+2336552879&4294967295,C=_+(x<<12&4294967295|x>>>20),x=S+(m^C&(_^m))+w[10]+4294925233&4294967295,S=C+(x<<17&4294967295|x>>>15),x=m+(_^S&(C^_))+w[11]+2304563134&4294967295,m=S+(x<<22&4294967295|x>>>10),x=_+(C^m&(S^C))+w[12]+1804603682&4294967295,_=m+(x<<7&4294967295|x>>>25),x=C+(S^_&(m^S))+w[13]+4254626195&4294967295,C=_+(x<<12&4294967295|x>>>20),x=S+(m^C&(_^m))+w[14]+2792965006&4294967295,S=C+(x<<17&4294967295|x>>>15),x=m+(_^S&(C^_))+w[15]+1236535329&4294967295,m=S+(x<<22&4294967295|x>>>10),x=_+(S^C&(m^S))+w[1]+4129170786&4294967295,_=m+(x<<5&4294967295|x>>>27),x=C+(m^S&(_^m))+w[6]+3225465664&4294967295,C=_+(x<<9&4294967295|x>>>23),x=S+(_^m&(C^_))+w[11]+643717713&4294967295,S=C+(x<<14&4294967295|x>>>18),x=m+(C^_&(S^C))+w[0]+3921069994&4294967295,m=S+(x<<20&4294967295|x>>>12),x=_+(S^C&(m^S))+w[5]+3593408605&4294967295,_=m+(x<<5&4294967295|x>>>27),x=C+(m^S&(_^m))+w[10]+38016083&4294967295,C=_+(x<<9&4294967295|x>>>23),x=S+(_^m&(C^_))+w[15]+3634488961&4294967295,S=C+(x<<14&4294967295|x>>>18),x=m+(C^_&(S^C))+w[4]+3889429448&4294967295,m=S+(x<<20&4294967295|x>>>12),x=_+(S^C&(m^S))+w[9]+568446438&4294967295,_=m+(x<<5&4294967295|x>>>27),x=C+(m^S&(_^m))+w[14]+3275163606&4294967295,C=_+(x<<9&4294967295|x>>>23),x=S+(_^m&(C^_))+w[3]+4107603335&4294967295,S=C+(x<<14&4294967295|x>>>18),x=m+(C^_&(S^C))+w[8]+1163531501&4294967295,m=S+(x<<20&4294967295|x>>>12),x=_+(S^C&(m^S))+w[13]+2850285829&4294967295,_=m+(x<<5&4294967295|x>>>27),x=C+(m^S&(_^m))+w[2]+4243563512&4294967295,C=_+(x<<9&4294967295|x>>>23),x=S+(_^m&(C^_))+w[7]+1735328473&4294967295,S=C+(x<<14&4294967295|x>>>18),x=m+(C^_&(S^C))+w[12]+2368359562&4294967295,m=S+(x<<20&4294967295|x>>>12),x=_+(m^S^C)+w[5]+4294588738&4294967295,_=m+(x<<4&4294967295|x>>>28),x=C+(_^m^S)+w[8]+2272392833&4294967295,C=_+(x<<11&4294967295|x>>>21),x=S+(C^_^m)+w[11]+1839030562&4294967295,S=C+(x<<16&4294967295|x>>>16),x=m+(S^C^_)+w[14]+4259657740&4294967295,m=S+(x<<23&4294967295|x>>>9),x=_+(m^S^C)+w[1]+2763975236&4294967295,_=m+(x<<4&4294967295|x>>>28),x=C+(_^m^S)+w[4]+1272893353&4294967295,C=_+(x<<11&4294967295|x>>>21),x=S+(C^_^m)+w[7]+4139469664&4294967295,S=C+(x<<16&4294967295|x>>>16),x=m+(S^C^_)+w[10]+3200236656&4294967295,m=S+(x<<23&4294967295|x>>>9),x=_+(m^S^C)+w[13]+681279174&4294967295,_=m+(x<<4&4294967295|x>>>28),x=C+(_^m^S)+w[0]+3936430074&4294967295,C=_+(x<<11&4294967295|x>>>21),x=S+(C^_^m)+w[3]+3572445317&4294967295,S=C+(x<<16&4294967295|x>>>16),x=m+(S^C^_)+w[6]+76029189&4294967295,m=S+(x<<23&4294967295|x>>>9),x=_+(m^S^C)+w[9]+3654602809&4294967295,_=m+(x<<4&4294967295|x>>>28),x=C+(_^m^S)+w[12]+3873151461&4294967295,C=_+(x<<11&4294967295|x>>>21),x=S+(C^_^m)+w[15]+530742520&4294967295,S=C+(x<<16&4294967295|x>>>16),x=m+(S^C^_)+w[2]+3299628645&4294967295,m=S+(x<<23&4294967295|x>>>9),x=_+(S^(m|~C))+w[0]+4096336452&4294967295,_=m+(x<<6&4294967295|x>>>26),x=C+(m^(_|~S))+w[7]+1126891415&4294967295,C=_+(x<<10&4294967295|x>>>22),x=S+(_^(C|~m))+w[14]+2878612391&4294967295,S=C+(x<<15&4294967295|x>>>17),x=m+(C^(S|~_))+w[5]+4237533241&4294967295,m=S+(x<<21&4294967295|x>>>11),x=_+(S^(m|~C))+w[12]+1700485571&4294967295,_=m+(x<<6&4294967295|x>>>26),x=C+(m^(_|~S))+w[3]+2399980690&4294967295,C=_+(x<<10&4294967295|x>>>22),x=S+(_^(C|~m))+w[10]+4293915773&4294967295,S=C+(x<<15&4294967295|x>>>17),x=m+(C^(S|~_))+w[1]+2240044497&4294967295,m=S+(x<<21&4294967295|x>>>11),x=_+(S^(m|~C))+w[8]+1873313359&4294967295,_=m+(x<<6&4294967295|x>>>26),x=C+(m^(_|~S))+w[15]+4264355552&4294967295,C=_+(x<<10&4294967295|x>>>22),x=S+(_^(C|~m))+w[6]+2734768916&4294967295,S=C+(x<<15&4294967295|x>>>17),x=m+(C^(S|~_))+w[13]+1309151649&4294967295,m=S+(x<<21&4294967295|x>>>11),x=_+(S^(m|~C))+w[4]+4149444226&4294967295,_=m+(x<<6&4294967295|x>>>26),x=C+(m^(_|~S))+w[11]+3174756917&4294967295,C=_+(x<<10&4294967295|x>>>22),x=S+(_^(C|~m))+w[2]+718787259&4294967295,S=C+(x<<15&4294967295|x>>>17),x=m+(C^(S|~_))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,E.g[2]=E.g[2]+S&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var m=_-this.blockSize,w=this.B,S=this.h,C=0;C<_;){if(S==0)for(;C<=m;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<_;)if(w[S++]=E.charCodeAt(C++),S==this.blockSize){i(this,w),S=0;break}}else for(;C<_;)if(w[S++]=E[C++],S==this.blockSize){i(this,w),S=0;break}}this.h=S,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var m=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=m&255,m/=256;for(this.u(E),E=Array(16),_=m=0;4>_;++_)for(var w=0;32>w;w+=8)E[m++]=this.g[_]>>>w&255;return E};function s(E,_){var m=l;return Object.prototype.hasOwnProperty.call(m,E)?m[E]:m[E]=_(E)}function o(E,_){this.h=_;for(var m=[],w=!0,S=E.length-1;0<=S;S--){var C=E[S]|0;w&&C==_||(m[S]=C,w=!1)}this.g=m}var l={};function u(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return O(h(-E));for(var _=[],m=1,w=0;E>=m;w++)_[w]=E/m|0,m*=4294967296;return new o(_,0)}function p(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return O(p(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=h(Math.pow(_,8)),w=g,S=0;S<E.length;S+=8){var C=Math.min(8,E.length-S),x=parseInt(E.substring(S,S+C),_);8>C?(C=h(Math.pow(_,C)),w=w.j(C).add(h(x))):(w=w.j(m),w=w.add(h(x)))}return w}var g=u(0),v=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(D(this))return-O(this).m();for(var E=0,_=1,m=0;m<this.g.length;m++){var w=this.i(m);E+=(0<=w?w:4294967296+w)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(D(this))return"-"+O(this).toString(E);for(var _=h(Math.pow(E,6)),m=this,w="";;){var S=b(m,_).g;m=T(m,S.j(_));var C=((0<m.g.length?m.g[0]:m.h)>>>0).toString(E);if(m=S,R(m))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function D(E){return E.h==-1}t.l=function(E){return E=T(this,E),D(E)?-1:R(E)?0:1};function O(E){for(var _=E.g.length,m=[],w=0;w<_;w++)m[w]=~E.g[w];return new o(m,~E.h).add(v)}t.abs=function(){return D(this)?O(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),m=[],w=0,S=0;S<=_;S++){var C=w+(this.i(S)&65535)+(E.i(S)&65535),x=(C>>>16)+(this.i(S)>>>16)+(E.i(S)>>>16);w=x>>>16,C&=65535,x&=65535,m[S]=x<<16|C}return new o(m,m[m.length-1]&-2147483648?-1:0)};function T(E,_){return E.add(O(_))}t.j=function(E){if(R(this)||R(E))return g;if(D(this))return D(E)?O(this).j(O(E)):O(O(this).j(E));if(D(E))return O(this.j(O(E)));if(0>this.l(k)&&0>E.l(k))return h(this.m()*E.m());for(var _=this.g.length+E.g.length,m=[],w=0;w<2*_;w++)m[w]=0;for(w=0;w<this.g.length;w++)for(var S=0;S<E.g.length;S++){var C=this.i(w)>>>16,x=this.i(w)&65535,Q=E.i(S)>>>16,X=E.i(S)&65535;m[2*w+2*S]+=x*X,I(m,2*w+2*S),m[2*w+2*S+1]+=C*X,I(m,2*w+2*S+1),m[2*w+2*S+1]+=x*Q,I(m,2*w+2*S+1),m[2*w+2*S+2]+=C*Q,I(m,2*w+2*S+2)}for(w=0;w<_;w++)m[w]=m[2*w+1]<<16|m[2*w];for(w=_;w<2*_;w++)m[w]=0;return new o(m,0)};function I(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function A(E,_){this.g=E,this.h=_}function b(E,_){if(R(_))throw Error("division by zero");if(R(E))return new A(g,g);if(D(E))return _=b(O(E),_),new A(O(_.g),O(_.h));if(D(_))return _=b(E,O(_)),new A(O(_.g),_.h);if(30<E.g.length){if(D(E)||D(_))throw Error("slowDivide_ only works with positive integers.");for(var m=v,w=_;0>=w.l(E);)m=V(m),w=V(w);var S=j(m,1),C=j(w,1);for(w=j(w,2),m=j(m,2);!R(w);){var x=C.add(w);0>=x.l(E)&&(S=S.add(m),C=x),w=j(w,1),m=j(m,1)}return _=T(E,S.j(_)),new A(S,_)}for(S=g;0<=E.l(_);){for(m=Math.max(1,Math.floor(E.m()/_.m())),w=Math.ceil(Math.log(m)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=h(m),x=C.j(_);D(x)||0<x.l(E);)m-=w,C=h(m),x=C.j(_);R(C)&&(C=v),S=S.add(C),E=T(E,x)}return new A(S,E)}t.A=function(E){return b(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),m=[],w=0;w<_;w++)m[w]=this.i(w)&E.i(w);return new o(m,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),m=[],w=0;w<_;w++)m[w]=this.i(w)|E.i(w);return new o(m,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),m=[],w=0;w<_;w++)m[w]=this.i(w)^E.i(w);return new o(m,this.h^E.h)};function V(E){for(var _=E.g.length+1,m=[],w=0;w<_;w++)m[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(m,E.h)}function j(E,_){var m=_>>5;_%=32;for(var w=E.g.length-m,S=[],C=0;C<w;C++)S[C]=0<_?E.i(C+m)>>>_|E.i(C+m+1)<<32-_:E.i(C+m);return new o(S,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ni=o}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});var Ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o0,Us,a0,Ba,Gc,l0,u0,c0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,f){return a==Array.prototype||a==Object.prototype||(a[c]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ia=="object"&&Ia];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in f))break e;f=f[P]}a=a[a.length-1],y=f[a],c=c(y),c!=y&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var f=0,y=!1,P={next:function(){if(!y&&f<a.length){var N=f++;return{value:c(N,a[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,f){return a.call.apply(a.bind,arguments)}function g(a,c,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(c,P)}}return function(){return a.apply(c,arguments)}}function v(a,c,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function k(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function R(a,c){function f(){}f.prototype=c.prototype,a.aa=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,P,N){for(var G=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)G[Ce-2]=arguments[Ce];return c.prototype[P].apply(y,G)}}function D(a){const c=a.length;if(0<c){const f=Array(c);for(let y=0;y<c;y++)f[y]=a[y];return f}return[]}function O(a,c){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const P=a.length||0,N=y.length||0;a.length=P+N;for(let G=0;G<N;G++)a[P+G]=y[G]}else a.push(y)}}class T{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function I(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var V=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function j(a,c,f){for(const y in a)c.call(f,a[y],y,a)}function E(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function _(a){const c={};for(const f in a)c[f]=a[f];return c}const m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,c){let f,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(f in y)a[f]=y[f];for(let N=0;N<m.length;N++)f=m[N],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function S(a){var c=1;a=a.split(":");const f=[];for(;0<c&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function x(){var a=F;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Q{constructor(){this.h=this.g=null}add(c,f){const y=X.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var X=new T(()=>new re,a=>a.reset());class re{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $,M=!1,F=new Q,W=()=>{const a=l.Promise.resolve(void 0);$=()=>{a.then(Z)}};var Z=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(f){C(f)}var c=X;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}M=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return a}();function ge(a,c){if(se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(V){e:{try{b(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:de[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ge.aa.h.call(this)}}R(ge,se);var de={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Le=0;function we(a,c,f,y,P){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=P,this.key=++Le,this.da=this.fa=!1}function ne(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ke(a){this.src=a,this.g={},this.h=0}ke.prototype.add=function(a,c,f,y,P){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var G=Re(a,c,y,P);return-1<G?(c=a[G],f||(c.fa=!1)):(c=new we(c,this.src,N,!!y,P),c.fa=f,a.push(c)),c};function Ge(a,c){var f=c.type;if(f in a.g){var y=a.g[f],P=Array.prototype.indexOf.call(y,c,void 0),N;(N=0<=P)&&Array.prototype.splice.call(y,P,1),N&&(ne(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Re(a,c,f,y){for(var P=0;P<a.length;++P){var N=a[P];if(!N.da&&N.listener==c&&N.capture==!!f&&N.ha==y)return P}return-1}var _t="closure_lm_"+(1e6*Math.random()|0),Ut={};function $t(a,c,f,y,P){if(Array.isArray(c)){for(var N=0;N<c.length;N++)$t(a,c[N],f,y,P);return null}return f=qo(f),a&&a[ce]?a.K(c,f,h(y)?!!y.capture:!1,P):Wt(a,c,f,!1,y,P)}function Wt(a,c,f,y,P,N){if(!c)throw Error("Invalid event type");var G=h(P)?!!P.capture:!!P,Ce=$e(a);if(Ce||(a[_t]=Ce=new ke(a)),f=Ce.add(c,f,y,G,N),f.proxy)return f;if(y=Ht(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Ae||(P=G),P===void 0&&(P=!1),a.addEventListener(c.toString(),y,P);else if(a.attachEvent)a.attachEvent(kn(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ht(){function a(f){return c.call(a.src,a.listener,f)}const c=ar;return a}function qt(a,c,f,y,P){if(Array.isArray(c))for(var N=0;N<c.length;N++)qt(a,c[N],f,y,P);else y=h(y)?!!y.capture:!!y,f=qo(f),a&&a[ce]?(a=a.i,c=String(c).toString(),c in a.g&&(N=a.g[c],f=Re(N,f,y,P),-1<f&&(ne(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete a.g[c],a.h--)))):a&&(a=$e(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Re(c,f,y,P)),(f=-1<a?c[a]:null)&&or(f))}function or(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[ce])Ge(c.i,a);else{var f=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(f,y,a.capture):c.detachEvent?c.detachEvent(kn(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=$e(c))?(Ge(f,a),f.h==0&&(f.src=null,c[_t]=null)):ne(a)}}}function kn(a){return a in Ut?Ut[a]:Ut[a]="on"+a}function ar(a,c){if(a.da)a=!0;else{c=new ge(c,this);var f=a.listener,y=a.ha||a.src;a.fa&&or(a),a=f.call(y,c)}return a}function $e(a){return a=a[_t],a instanceof ke?a:null}var fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function qo(a){return typeof a=="function"?a:(a[fs]||(a[fs]=function(c){return a.handleEvent(c)}),a[fs])}function st(){ee.call(this),this.i=new ke(this),this.M=this,this.F=null}R(st,ee),st.prototype[ce]=!0,st.prototype.removeEventListener=function(a,c,f,y){qt(this,a,c,f,y)};function et(a,c){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new se(c,a);else if(c instanceof se)c.target=c.target||a;else{var P=c;c=new se(y,a),w(c,P)}if(P=!0,f)for(var N=f.length-1;0<=N;N--){var G=c.g=f[N];P=Br(G,y,!0,c)&&P}if(G=c.g=a,P=Br(G,y,!0,c)&&P,P=Br(G,y,!1,c)&&P,f)for(N=0;N<f.length;N++)G=c.g=f[N],P=Br(G,y,!1,c)&&P}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var f=a.g[c],y=0;y<f.length;y++)ne(f[y]);delete a.g[c],a.h--}}this.F=null},st.prototype.K=function(a,c,f,y){return this.i.add(String(a),c,!1,f,y)},st.prototype.L=function(a,c,f,y){return this.i.add(String(a),c,!0,f,y)};function Br(a,c,f,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,N=0;N<c.length;++N){var G=c[N];if(G&&!G.da&&G.capture==f){var Ce=G.listener,ct=G.ha||G.src;G.fa&&Ge(a.i,G),P=Ce.call(ct,y)!==!1&&P}}return P&&!y.defaultPrevented}function su(a,c,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Go(a){a.g=su(()=>{a.g=null,a.i&&(a.i=!1,Go(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Se extends ee{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(a){ee.call(this),this.h=a,this.g={}}R(Rn,ee);var ou=[];function ps(a){j(a.g,function(c,f){this.g.hasOwnProperty(f)&&or(c)},a),a.g={}}Rn.prototype.N=function(){Rn.aa.N.call(this),ps(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=l.JSON.stringify,Qo=l.JSON.parse,ms=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function On(){}On.prototype.h=null;function lr(a){return a.h||(a.h=a.i())}function Gt(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gn(){se.call(this,"d")}R(gn,se);function ys(){se.call(this,"c")}R(ys,se);var Fn={},vs=null;function Ur(){return vs=vs||new st}Fn.La="serverreachability";function _s(a){se.call(this,Fn.La,a)}R(_s,se);function zn(a){const c=Ur();et(c,new _s(c))}Fn.STAT_EVENT="statevent";function xs(a,c){se.call(this,Fn.STAT_EVENT,a),this.stat=c}R(xs,se);function We(a){const c=Ur();et(c,new xs(c,a))}Fn.Ma="timingevent";function Ko(a,c){se.call(this,Fn.Ma,a),this.size=c}R(Ko,se);function Qt(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function H(a,c,f,y,P,N){a.info(function(){if(a.g)if(N)for(var G="",Ce=N.split("&"),ct=0;ct<Ce.length;ct++){var _e=Ce[ct].split("=");if(1<_e.length){var xt=_e[0];_e=_e[1];var wt=xt.split("_");G=2<=wt.length&&wt[1]=="type"?G+(xt+"="+_e+"&"):G+(xt+"=redacted&")}}else G=null;else G=N;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+c+`
`+f+`
`+G})}function K(a,c,f,y,P,N,G){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+c+`
`+f+`
`+N+" "+G})}function q(a,c,f,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Ie(a,f)+(y?" "+y:"")})}function oe(a,c){a.info(function(){return"TIMEOUT: "+c})}$r.prototype.info=function(){};function Ie(a,c){if(!a.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var N=P[0];if(N!="noop"&&N!="stop"&&N!="close")for(var G=1;G<P.length;G++)P[G]=""}}}}return gs(f)}catch{return c}}var Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kt;function ot(){}R(ot,On),ot.prototype.g=function(){return new XMLHttpRequest},ot.prototype.i=function(){return{}},kt=new ot;function Ye(a,c,f,y){this.j=a,this.i=c,this.l=f,this.R=y||1,this.U=new Rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gi}function gi(){this.i=null,this.g="",this.h=!1}var mi={},ur={};function Mt(a,c,f){a.L=1,a.v=Zo(Bn(c)),a.m=f,a.P=!0,pe(a,null)}function pe(a,c){a.F=Date.now(),Yo(a),a.A=Bn(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),nf(f.i,"t",y),a.C=0,f=a.j.J,a.h=new gi,a.g=wf(a.j,f?c:null,!a.m),0<a.O&&(a.M=new Se(v(a.Y,a,a.g),a.O)),c=a.U,f=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(ou[0]=P.toString()),P=ou);for(var N=0;N<P.length;N++){var G=$t(f,P[N],y||c.handleEvent,!1,c.h||c);if(!G)break;c.g[G.key]=G}c=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),zn(),H(a.i,a.u,a.A,a.l,a.R,a.m)}Ye.prototype.ca=function(a){a=a.target;const c=this.M;c&&Un(a)==3?c.j():this.Y(a)},Ye.prototype.Y=function(a){try{if(a==this.g)e:{const wt=Un(this.g);var c=this.g.Ba();const _i=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||cf(this.g)))){this.J||wt!=4||c==7||(c==8||0>=_i?zn(3):zn(2)),au(this);var f=this.g.Z();this.X=f;t:if(sn(this)){var y=cf(this.g);a="";var P=y.length,N=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),ws(this);var G="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(N&&c==P-1)});y.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,K(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,ct=this.g;if((Ce=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ce)){var _e=Ce;break t}}_e=null}if(f=_e)q(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lu(this,f);else{this.o=!1,this.s=3,We(12),Wr(this),ws(this);break e}}if(this.P){f=!0;let yn;for(;!this.J&&this.C<G.length;)if(yn=mn(this,G),yn==ur){wt==4&&(this.s=4,We(14),f=!1),q(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==mi){this.s=4,We(15),q(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else q(this.i,this.l,yn,null),lu(this,yn);if(sn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||G.length!=0||this.h.h||(this.s=1,We(16),f=!1),this.o=this.o&&f,!f)q(this.i,this.l,G,"[Invalid Chunked Response]"),Wr(this),ws(this);else if(0<G.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),pu(xt),xt.M=!0,We(11))}}else q(this.i,this.l,G,null),lu(this,G);wt==4&&Wr(this),this.o&&!this.J&&(wt==4?yf(this.j,this):(this.o=!1,Yo(this)))}else Gv(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),Wr(this),ws(this)}}}catch{}finally{}};function sn(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function mn(a,c){var f=a.C,y=c.indexOf(`
`,f);return y==-1?ur:(f=Number(c.substring(f,y)),isNaN(f)?mi:(y+=1,y+f>c.length?ur:(c=c.slice(y,y+f),a.C=y+f,c)))}Ye.prototype.cancel=function(){this.J=!0,Wr(this)};function Yo(a){a.S=Date.now()+a.I,Wh(a,a.I)}function Wh(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Qt(v(a.ba,a),c)}function au(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Ye.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(oe(this.i,this.A),this.L!=2&&(zn(),We(17)),Wr(this),this.s=2,ws(this)):Wh(this,this.S-a)};function ws(a){a.j.G==0||a.J||yf(a.j,a)}function Wr(a){au(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,ps(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function lu(a,c){try{var f=a.j;if(f.G!=0&&(f.g==a||uu(f.h,a))){if(!a.K&&uu(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)sa(f),ra(f);else break e;fu(f),We(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=Qt(v(f.Za,f),6e3));if(1>=Gh(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else qr(f,11)}else if((a.K||f.g==a)&&sa(f),!I(c))for(P=f.Da.g.parse(c),c=0;c<P.length;c++){let _e=P[c];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];const xt=_e[3];xt!=null&&(f.la=xt,f.j.info("VER="+f.la));const wt=_e[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));const _i=_e[5];_i!=null&&typeof _i=="number"&&0<_i&&(y=1.5*_i,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const yn=a.g;if(yn){const aa=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var N=y.h;N.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(cu(N,N.h),N.h=null))}if(y.D){const gu=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;gu&&(y.ya=gu,De(y.I,y.D,gu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var G=a;if(y.qa=xf(y,y.J?y.ia:null,y.W),G.K){Qh(y.h,G);var Ce=G,ct=y.L;ct&&(Ce.I=ct),Ce.B&&(au(Ce),Yo(Ce)),y.g=G}else gf(y);0<f.i.length&&ia(f)}else _e[0]!="stop"&&_e[0]!="close"||qr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?qr(f,7):hu(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}zn(4)}catch{}}var bv=class{constructor(a,c){this.g=a,this.map=c}};function Hh(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Gh(a){return a.h?1:a.g?a.g.size:0}function uu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function cu(a,c){a.g?a.g.add(c):a.h=c}function Qh(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Hh.prototype.cancel=function(){if(this.i=Kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Kh(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.D);return c}return D(a.i)}function Dv(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],f=a.length,y=0;y<f;y++)c.push(a[y]);return c}c=[],f=0;for(y in a)c[f++]=a[y];return c}function Nv(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var f=0;f<a;f++)c.push(f);return c}c=[],f=0;for(const y in a)c[f++]=y;return c}}}function Yh(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var f=Nv(a),y=Dv(a),P=y.length,N=0;N<P;N++)c.call(void 0,y[N],f&&f[N],a)}var Xh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mv(a,c){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),P=null;if(0<=y){var N=a[f].substring(0,y);P=a[f].substring(y+1)}else N=a[f];c(N,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Hr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hr){this.h=a.h,Xo(this,a.j),this.o=a.o,this.g=a.g,Jo(this,a.s),this.l=a.l;var c=a.i,f=new Ts;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Jh(this,f),this.m=a.m}else a&&(c=String(a).match(Xh))?(this.h=!1,Xo(this,c[1]||"",!0),this.o=Ss(c[2]||""),this.g=Ss(c[3]||"",!0),Jo(this,c[4]),this.l=Ss(c[5]||"",!0),Jh(this,c[6]||"",!0),this.m=Ss(c[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}Hr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Es(c,Zh,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Es(c,Zh,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Es(f,f.charAt(0)=="/"?Lv:jv,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Es(f,Fv)),a.join("")};function Bn(a){return new Hr(a)}function Xo(a,c,f){a.j=f?Ss(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Jo(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Jh(a,c,f){c instanceof Ts?(a.i=c,zv(a.i,a.h)):(f||(c=Es(c,Ov)),a.i=new Ts(c,a.h))}function De(a,c,f){a.i.set(c,f)}function Zo(a){return De(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ss(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Es(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,Vv),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Vv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Zh=/[#\/\?@]/g,jv=/[#\?:]/g,Lv=/[#\?]/g,Ov=/[#\?@]/g,Fv=/#/g;function Ts(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function cr(a){a.g||(a.g=new Map,a.h=0,a.i&&Mv(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Ts.prototype,t.add=function(a,c){cr(this),this.i=null,a=yi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function ef(a,c){cr(a),c=yi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function tf(a,c){return cr(a),c=yi(a,c),a.g.has(c)}t.forEach=function(a,c){cr(this),this.g.forEach(function(f,y){f.forEach(function(P){a.call(c,P,y,this)},this)},this)},t.na=function(){cr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let y=0;y<c.length;y++){const P=a[y];for(let N=0;N<P.length;N++)f.push(c[y])}return f},t.V=function(a){cr(this);let c=[];if(typeof a=="string")tf(this,a)&&(c=c.concat(this.g.get(yi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)c=c.concat(a[f])}return c},t.set=function(a,c){return cr(this),this.i=null,a=yi(this,a),tf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function nf(a,c,f){ef(a,c),0<f.length&&(a.i=null,a.g.set(yi(a,c),D(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var y=c[f];const N=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var P=N;G[y]!==""&&(P+="="+encodeURIComponent(String(G[y]))),a.push(P)}}return this.i=a.join("&")};function yi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function zv(a,c){c&&!a.j&&(cr(a),a.i=null,a.g.forEach(function(f,y){var P=y.toLowerCase();y!=P&&(ef(this,y),nf(this,P,f))},a)),a.j=c}function Bv(a,c){const f=new $r;if(l.Image){const y=new Image;y.onload=k(dr,f,"TestLoadImage: loaded",!0,c,y),y.onerror=k(dr,f,"TestLoadImage: error",!1,c,y),y.onabort=k(dr,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=k(dr,f,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function Uv(a,c){const f=new $r,y=new AbortController,P=setTimeout(()=>{y.abort(),dr(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(N=>{clearTimeout(P),N.ok?dr(f,"TestPingServer: ok",!0,c):dr(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),dr(f,"TestPingServer: error",!1,c)})}function dr(a,c,f,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(f)}catch{}}function $v(){this.g=new ms}function Wv(a,c,f){const y=f||"";try{Yh(a,function(P,N){let G=P;h(P)&&(G=gs(P)),c.push(y+N+"="+encodeURIComponent(G))})}catch(P){throw c.push(y+"type="+encodeURIComponent("_badmap")),P}}function ea(a){this.l=a.Ub||null,this.j=a.eb||!1}R(ea,On),ea.prototype.g=function(){return new ta(this.l,this.j)},ea.prototype.i=function(a){return function(){return a}}({});function ta(a,c){st.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ta,st),t=ta.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,As(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function rf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Is(this):As(this),this.readyState==3&&rf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Is(this))},t.Qa=function(a){this.g&&(this.response=a,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,As(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function As(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sf(a){let c="";return j(a,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function du(a,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=sf(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):De(a,c,f))}function He(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(He,st);var Hv=/^https?$/i,qv=["POST","PUT"];t=He.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kt.g(),this.v=this.o?lr(this.o):lr(kt),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(N){of(this,N);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)f.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const N of y.keys())f.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qv,c,void 0))||y||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,G]of f)this.g.setRequestHeader(N,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uf(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){of(this,N)}};function of(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,af(a),na(a)}function af(a){a.A||(a.A=!0,et(a,"complete"),et(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,et(this,"complete"),et(this,"abort"),na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lf(this):this.bb())},t.bb=function(){lf(this)};function lf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)su(a.Ea,0,a);else if(et(a,"readystatechange"),Un(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=G===0){var P=String(a.D).match(Xh)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),y=!Hv.test(P?P.toLowerCase():"")}f=y}if(f)et(a,"complete"),et(a,"success");else{a.m=6;try{var N=2<Un(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",af(a)}}finally{na(a)}}}}function na(a,c){if(a.g){uf(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||et(a,"ready");try{f.onreadystatechange=y}catch{}}}function uf(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Qo(c)}};function cf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Gv(a){const c={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(I(a[y]))continue;var f=S(a[y]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const N=c[P]||[];c[P]=N,N.push(f)}E(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function df(a){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cs("baseRetryDelayMs",5e3,a),this.cb=Cs("retryDelaySeedMs",1e4,a),this.Wa=Cs("forwardChannelMaxRetries",2,a),this.wa=Cs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Hh(a&&a.concurrentRequestLimit),this.Da=new $v,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=df.prototype,t.la=8,t.G=1,t.connect=function(a,c,f,y){We(0),this.W=a,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=xf(this,null,this.W),ia(this)};function hu(a){if(hf(a),a.G==3){var c=a.U++,f=Bn(a.I);if(De(f,"SID",a.K),De(f,"RID",c),De(f,"TYPE","terminate"),ks(a,f),c=new Ye(a,a.j,c),c.L=2,c.v=Zo(Bn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=wf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Yo(c)}_f(a)}function ra(a){a.g&&(pu(a),a.g.cancel(),a.g=null)}function hf(a){ra(a),a.u&&(l.clearTimeout(a.u),a.u=null),sa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ia(a){if(!qh(a.h)&&!a.s){a.s=!0;var c=a.Ga;$||W(),M||($(),M=!0),F.add(c,a),a.B=0}}function Qv(a,c){return Gh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Qt(v(a.Ga,a,c),vf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Ye(this,this.j,a);let N=this.o;if(this.S&&(N?(N=_(N),w(N,this.S)):N=this.S),this.m!==null||this.O||(P.H=N,N=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=pf(this,P,c),f=Bn(this.I),De(f,"RID",a),De(f,"CVER",22),this.D&&De(f,"X-HTTP-Session-Id",this.D),ks(this,f),N&&(this.O?c="headers="+encodeURIComponent(String(sf(N)))+"&"+c:this.m&&du(f,this.m,N)),cu(this.h,P),this.Ua&&De(f,"TYPE","init"),this.P?(De(f,"$req",c),De(f,"SID","null"),P.T=!0,Mt(P,f,null)):Mt(P,f,c),this.G=2}}else this.G==3&&(a?ff(this,a):this.i.length==0||qh(this.h)||ff(this))};function ff(a,c){var f;c?f=c.l:f=a.U++;const y=Bn(a.I);De(y,"SID",a.K),De(y,"RID",f),De(y,"AID",a.T),ks(a,y),a.m&&a.o&&du(y,a.m,a.o),f=new Ye(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),c&&(a.i=c.D.concat(a.i)),c=pf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),cu(a.h,f),Mt(f,y,c)}function ks(a,c){a.H&&j(a.H,function(f,y){De(c,y,f)}),a.l&&Yh({},function(f,y){De(c,y,f)})}function pf(a,c,f){f=Math.min(a.i.length,f);var y=a.l?v(a.l.Na,a.l,a):null;e:{var P=a.i;let N=-1;for(;;){const G=["count="+f];N==-1?0<f?(N=P[0].g,G.push("ofs="+N)):N=0:G.push("ofs="+N);let Ce=!0;for(let ct=0;ct<f;ct++){let _e=P[ct].g;const xt=P[ct].map;if(_e-=N,0>_e)N=Math.max(0,P[ct].g-100),Ce=!1;else try{Wv(xt,G,"req"+_e+"_")}catch{y&&y(xt)}}if(Ce){y=G.join("&");break e}}}return a=a.i.splice(0,f),c.D=a,y}function gf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;$||W(),M||($(),M=!0),F.add(c,a),a.v=0}}function fu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Qt(v(a.Fa,a),vf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Qt(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),ra(this),mf(this))};function pu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function mf(a){a.g=new Ye(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Bn(a.qa);De(c,"RID","rpc"),De(c,"SID",a.K),De(c,"AID",a.T),De(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&De(c,"TO",a.ja),De(c,"TYPE","xmlhttp"),ks(a,c),a.m&&a.o&&du(c,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Zo(Bn(c)),f.m=null,f.P=!0,pe(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ra(this),fu(this),We(19))};function sa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function yf(a,c){var f=null;if(a.g==c){sa(a),pu(a),a.g=null;var y=2}else if(uu(a.h,c))f=c.D,Qh(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var P=a.B;y=Ur(),et(y,new Ko(y,f)),ia(a)}else gf(a);else if(P=c.s,P==3||P==0&&0<c.X||!(y==1&&Qv(a,c)||y==2&&fu(a)))switch(f&&0<f.length&&(c=a.h,c.i=c.i.concat(f)),P){case 1:qr(a,5);break;case 4:qr(a,10);break;case 3:qr(a,6);break;default:qr(a,2)}}}function vf(a,c){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*c}function qr(a,c){if(a.j.info("Error code "+c),c==2){var f=v(a.fb,a),y=a.Xa;const P=!y;y=new Hr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xo(y,"https"),Zo(y),P?Bv(y.toString(),f):Uv(y.toString(),f)}else We(2);a.G=0,a.l&&a.l.sa(c),_f(a),hf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function _f(a){if(a.G=0,a.ka=[],a.l){const c=Kh(a.h);(c.length!=0||a.i.length!=0)&&(O(a.ka,c),O(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function xf(a,c,f){var y=f instanceof Hr?Bn(f):new Hr(f);if(y.g!="")c&&(y.g=c+"."+y.g),Jo(y,y.s);else{var P=l.location;y=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var N=new Hr(null);y&&Xo(N,y),c&&(N.g=c),P&&Jo(N,P),f&&(N.l=f),y=N}return f=a.D,c=a.ya,f&&c&&De(y,f,c),De(y,"VER",a.la),ks(a,y),y}function wf(a,c,f){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new He(new ea({eb:f})):new He(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sf(){}t=Sf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oa(){}oa.prototype.g=function(a,c){return new Kt(a,c)};function Kt(a,c){st.call(this),this.g=new df(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!I(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!I(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new vi(this)}R(Kt,st),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){hu(this.g)},Kt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=gs(a),a=f);c.i.push(new bv(c.Ya++,a)),c.G==3&&ia(c)},Kt.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,Kt.aa.N.call(this)};function Ef(a){gn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}R(Ef,gn);function Tf(){ys.call(this),this.status=1}R(Tf,ys);function vi(a){this.g=a}R(vi,Sf),vi.prototype.ua=function(){et(this.g,"a")},vi.prototype.ta=function(a){et(this.g,new Ef(a))},vi.prototype.sa=function(a){et(this.g,new Tf)},vi.prototype.ra=function(){et(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,c0=function(){return new oa},u0=function(){return Ur()},l0=Fn,Gc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Ba=Oe,tt.COMPLETE="complete",a0=tt,Gt.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",st.prototype.listen=st.prototype.K,Us=Gt,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,o0=He}).apply(typeof Ia<"u"?Ia:typeof self<"u"?self:typeof window<"u"?window:{});const Hp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ls="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Jy("@firebase/firestore");function Ls(){return li.logLevel}function te(t,...e){if(li.logLevel<=ye.DEBUG){const n=e.map(uh);li.debug(`Firestore (${ls}): ${t}`,...n)}}function nr(t,...e){if(li.logLevel<=ye.ERROR){const n=e.map(uh);li.error(`Firestore (${ls}): ${t}`,...n)}}function Io(t,...e){if(li.logLevel<=ye.WARN){const n=e.map(uh);li.warn(`Firestore (${ls}): ${t}`,...n)}}function uh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${ls}) INTERNAL ASSERTION FAILED: `+t;throw nr(e),new Error(e)}function Te(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends as{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class Zw{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new Xw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Vt(e)}}class eS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new nS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Xi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new it(0,0))}static max(){return new le(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ao?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Ao{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Ao{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Me.fromString(e))}static fromName(e){return new ie(Me.fromString(e).popFirst(5))}static empty(){return new ie(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Me(e.slice()))}}function oS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Mr(i,ie.empty(),e)}function aS(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(le.min(),ie.empty(),-1)}static max(){return new Mr(le.max(),ie.empty(),-1)}}function lS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==uS)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ch.oe=-1;function Wl(t){return t==null}function vl(t){return t===0&&1/t==-1/0}function hS(t){return typeof t=="number"&&Number.isInteger(t)&&!vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function h0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Aa(this.root,e,this.comparator,!0)}}class Aa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gp(this.data.getIterator())}getIteratorFrom(e){return new Gp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Gp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f0("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=fS.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ui(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hh(t){const e=t.mapValue.fields.__previous_value__;return dh(e)?hh(e):e}function Co(t){const e=Vr(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ko{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca={mapValue:{}};function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dh(t)?4:mS(t)?9007199254740991:gS(t)?10:11:ae()}function Ln(t,e){if(t===e)return!0;const n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Co(t).isEqual(Co(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Vr(i.timestampValue),l=Vr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ui(i.bytesValue).isEqual(ui(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),l=Qe(s.doubleValue);return o===l?vl(o)===vl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Xi(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(qp(o)!==qp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Ln(o[u],l[u])))return!1;return!0}(t,e);default:return ae()}}function Ro(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Ji(t,e){if(t===e)return 0;const n=ci(t),r=ci(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Qe(s.integerValue||s.doubleValue),u=Qe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Qp(t.timestampValue,e.timestampValue);case 4:return Qp(Co(t),Co(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ui(s),u=ui(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=xe(l[h],u[h]);if(p!==0)return p}return xe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=xe(Qe(s.latitude),Qe(o.latitude));return l!==0?l:xe(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kp(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,p;const g=s.fields||{},v=o.fields||{},k=(l=g.value)===null||l===void 0?void 0:l.arrayValue,R=(u=v.value)===null||u===void 0?void 0:u.arrayValue,D=xe(((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:Kp(k,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ca.mapValue&&o===Ca.mapValue)return 0;if(s===Ca.mapValue)return 1;if(o===Ca.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const v=xe(u[g],p[g]);if(v!==0)return v;const k=Ji(l[u[g]],h[p[g]]);if(k!==0)return k}return xe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Qp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Vr(t),r=Vr(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function Kp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ji(n[i],r[i]);if(s)return s}return xe(n.length,r.length)}function Zi(t){return Qc(t)}function Qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Qc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Qc(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kc(t){return!!t&&"integerValue"in t}function fh(t){return!!t&&"arrayValue"in t}function Xp(t){return!!t&&"nullValue"in t}function Jp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ua(t){return!!t&&"mapValue"in t}function gS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function to(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=to(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=to(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ua(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(to(this.value))}}function p0(t){const e=[];return fi(t.fields,(n,r)=>{const i=new ft([n]);if(Ua(r)){const s=p0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new At(e,0,le.min(),le.min(),le.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,le.min(),le.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,le.min(),le.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.position=e,this.inclusive=n}}function Zp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ji(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function yS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{}class Ze extends g0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _S(e,n,r):n==="array-contains"?new SS(e,r):n==="in"?new ES(e,r):n==="not-in"?new TS(e,r):n==="array-contains-any"?new IS(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xS(e,r):new wS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ji(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(Ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends g0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Cn(e,n)}matches(e){return m0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m0(t){return t.op==="and"}function y0(t){return vS(t)&&m0(t)}function vS(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Yc(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Zi(t.value);if(y0(t))return t.filters.map(e=>Yc(e)).join(",");{const e=t.filters.map(n=>Yc(n)).join(",");return`${t.op}(${e})`}}function v0(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(t,e):t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&v0(o,i.filters[l]),!0):!1}(t,e):void ae()}function _0(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Zi(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(_0).join(" ,")+"}"}(t):"Filter"}class _S extends Ze{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class xS extends Ze{constructor(e,n){super(e,"in",n),this.keys=x0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wS extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=x0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class SS extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fh(n)&&Ro(n.arrayValue,this.value)}}class ES extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class TS extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ro(this.value.arrayValue,n)}}class IS extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function tg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new AS(t,e,n,r,i,s,o)}function ph(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zi(r)).join(",")),e.ue=n}return e.ue}function gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eg(t.startAt,e.startAt)&&eg(t.endAt,e.endAt)}function Xc(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CS(t,e,n,r,i,s,o,l){return new zo(t,e,n,r,i,s,o,l)}function mh(t){return new zo(t)}function ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function w0(t){return t.collectionGroup!==null}function no(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xl(s,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new xl(ft.keyField(),r))}return e.ce}function Vn(t){const e=ue(t);return e.le||(e.le=kS(e,no(t))),e.le}function kS(t,e){if(t.limitType==="F")return tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xl(i.field,s)});const n=t.endAt?new _l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _l(t.startAt.position,t.startAt.inclusive):null;return tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jc(t,e){const n=t.filters.concat([e]);return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zc(t,e,n){return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return gh(Vn(t),Vn(e))&&t.limitType===e.limitType}function S0(t){return`${ph(Vn(t))}|lt:${t.limitType}`}function wi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_0(i)).join(", ")}]`),Wl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zi(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function ql(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of no(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Zp(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,no(r),i)||r.endAt&&!function(o,l,u){const h=Zp(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,no(r),i))}(t,e)}function RS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E0(t){return(e,n)=>{let r=!1;for(const i of no(t)){const s=PS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PS(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ji(u,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return h0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Ue(ie.comparator);function rr(){return bS}const T0=new Ue(ie.comparator);function $s(...t){let e=T0;for(const n of t)e=e.insert(n.key,n);return e}function I0(t){let e=T0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return ro()}function A0(){return ro()}function ro(){return new us(t=>t.toString(),(t,e)=>t.isEqual(e))}const DS=new Ue(ie.comparator),NS=new mt(ie.comparator);function fe(...t){let e=NS;for(const n of t)e=e.add(n);return e}const MS=new mt(xe);function VS(){return MS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function C0(t){return{integerValue:""+t}}function jS(t,e){return hS(e)?C0(e):yh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this._=void 0}}function LS(t,e,n){return t instanceof Po?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dh(s)&&(s=hh(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof bo?R0(t,e):t instanceof Do?P0(t,e):function(i,s){const o=k0(i,s),l=rg(o)+rg(i.Pe);return Kc(o)&&Kc(i.Pe)?C0(l):yh(i.serializer,l)}(t,e)}function OS(t,e,n){return t instanceof bo?R0(t,e):t instanceof Do?P0(t,e):n}function k0(t,e){return t instanceof wl?function(r){return Kc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Po extends Gl{}class bo extends Gl{constructor(e){super(),this.elements=e}}function R0(t,e){const n=b0(e);for(const r of t.elements)n.some(i=>Ln(i,r))||n.push(r);return{arrayValue:{values:n}}}class Do extends Gl{constructor(e){super(),this.elements=e}}function P0(t,e){let n=b0(e);for(const r of t.elements)n=n.filter(i=>!Ln(i,r));return{arrayValue:{values:n}}}class wl extends Gl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rg(t){return Qe(t.integerValue||t.doubleValue)}function b0(t){return fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n){this.field=e,this.transform=n}}function zS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bo&&i instanceof bo||r instanceof Do&&i instanceof Do?Xi(r.elements,i.elements,Ln):r instanceof wl&&i instanceof wl?Ln(r.Pe,i.Pe):r instanceof Po&&i instanceof Po}(t.transform,e.transform)}class BS{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $a(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ql{}function D0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new M0(t.key,Tn.none()):new Bo(t.key,t.data,Tn.none());{const n=t.data,r=Lt.empty();let i=new mt(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zr(t.key,r,new Jt(i.toArray()),Tn.none())}}function US(t,e,n){t instanceof Bo?function(i,s,o){const l=i.value.clone(),u=sg(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(i,s,o){if(!$a(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=sg(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(N0(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function io(t,e,n,r){return t instanceof Bo?function(s,o,l,u){if(!$a(s.precondition,o))return l;const h=s.value.clone(),p=og(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(s,o,l,u){if(!$a(s.precondition,o))return l;const h=og(s.fieldTransforms,u,o),p=o.data;return p.setAll(N0(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,l){return $a(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $S(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=k0(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function ig(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xi(r,i,(s,o)=>zS(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bo extends Ql{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zr extends Ql{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function N0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sg(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,OS(o,l,n[i]))}return r}function og(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,LS(s,o,e))}return r}class M0 extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WS extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&US(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=A0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=D0(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Xi(this.mutations,e.mutations,(n,r)=>ig(n,r))&&Xi(this.baseMutations,e.baseMutations,(n,r)=>ig(n,r))}}class vh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return DS}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,me;function QS(t){switch(t){default:return ae();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function V0(t){if(t===void 0)return nr("GRPC error has no .code"),z.UNKNOWN;switch(t){case Xe.OK:return z.OK;case Xe.CANCELLED:return z.CANCELLED;case Xe.UNKNOWN:return z.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return z.INTERNAL;case Xe.UNAVAILABLE:return z.UNAVAILABLE;case Xe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Xe.NOT_FOUND:return z.NOT_FOUND;case Xe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Xe.ABORTED:return z.ABORTED;case Xe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Xe.DATA_LOSS:return z.DATA_LOSS;default:return ae()}}(me=Xe||(Xe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new ni([4294967295,4294967295],0);function ag(t){const e=KS().encode(t),n=new s0;return n.update(e),new Uint8Array(n.digest())}function lg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ni([n,r],0),new ni([i,s],0)]}class _h{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ws(`Invalid padding: ${n}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ni.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ni.fromNumber(r)));return i.compare(YS)===1&&(i=new ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ag(e),[r,i]=lg(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _h(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=ag(e),[r,i]=lg(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kl(le.min(),i,new Ue(xe),rr(),fe())}}class Uo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uo(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class j0{constructor(e,n){this.targetId=e,this.me=n}}class L0{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ug{constructor(){this.fe=0,this.ge=dg(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Uo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XS{constructor(e){this.Le=e,this.Be=new Map,this.ke=rr(),this.qe=cg(),this.Qe=new Ue(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Xc(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,At.newNoDocument(o,le.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ui(r).toUint8Array()}catch(u){if(u instanceof f0)return Io("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new _h(o,i,s)}catch(u){return Io(u instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Xc(l.target)){const u=new ie(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,At.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=fe();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Kl(e,n,this.Qe,this.ke,r);return this.ke=rr(),this.qe=cg(),this.Qe=new Ue(xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ug,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ug),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cg(){return new Ue(ie.comparator)}function dg(){return new Ue(ie.comparator)}const JS={asc:"ASCENDING",desc:"DESCENDING"},ZS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eE={and:"AND",or:"OR"};class tE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ed(t,e){return t.useProto3Json||Wl(e)?e:{value:e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nE(t,e){return Sl(t,e.toTimestamp())}function jn(t){return Te(!!t),le.fromTimestamp(function(n){const r=Vr(n);return new it(r.seconds,r.nanos)}(t))}function xh(t,e){return td(t,e).canonicalString()}function td(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function F0(t){const e=Me.fromString(t);return Te(W0(e)),e}function nd(t,e){return xh(t.databaseId,e.path)}function qu(t,e){const n=F0(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(B0(n))}function z0(t,e){return xh(t.databaseId,e)}function rE(t){const e=F0(t);return e.length===4?Me.emptyPath():B0(e)}function rd(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B0(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hg(t,e,n){return{name:nd(t,e),fields:n.value.mapValue.fields}}function iE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Te(p===void 0||typeof p=="string"),vt.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array),vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?z.UNKNOWN:V0(h.code);return new Y(p,h.message||"")}(o);n=new L0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qu(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):le.min(),l=new Lt({mapValue:{fields:r.document.fields}}),u=At.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Wa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qu(t,r.document),s=r.readTime?jn(r.readTime):le.min(),o=At.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Wa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qu(t,r.document),s=r.removedTargetIds||[];n=new Wa([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GS(i,s),l=r.targetId;n=new j0(l,o)}}return n}function sE(t,e){let n;if(e instanceof Bo)n={update:hg(t,e.key,e.value)};else if(e instanceof M0)n={delete:nd(t,e.key)};else if(e instanceof zr)n={update:hg(t,e.key,e.data),updateMask:pE(e.fieldMask)};else{if(!(e instanceof WS))return ae();n={verify:nd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Po)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Do)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nE(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function oE(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(le.min())&&(o=jn(s)),new BS(o,i.transformResults||[])}(n,e))):[]}function aE(t,e){return{documents:[z0(t,e.path)]}}function lE(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z0(t,i);const s=function(h){if(h.length!==0)return $0(Cn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Si(v.field),direction:dE(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ed(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function uE(t){let e=rE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const v=U0(g);return v instanceof Cn&&y0(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(R){return new xl(Ei(R.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,Wl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,k=g.values||[];return new _l(k,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,k=g.values||[];return new _l(k,v)}(n.endAt)),CS(e,i,o,s,l,"F",u,h)}function cE(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ei(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ei(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ei(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ei(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ei(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>U0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function dE(t){return JS[t]}function hE(t){return ZS[t]}function fE(t){return eE[t]}function Si(t){return{fieldPath:t.canonicalString()}}function Ei(t){return ft.fromServerFormat(t.fieldPath)}function $0(t){return t instanceof Ze?function(n){if(n.op==="=="){if(Jp(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NAN"}};if(Xp(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jp(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NAN"}};if(Xp(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Si(n.field),op:hE(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(i=>$0(i));return r.length===1?r[0]:{compositeFilter:{op:fE(n.op),filters:r}}}(t):ae()}function pE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function W0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,i,s=le.min(),o=le.min(),l=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.ct=e}}function mE(t){const e=uE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.un=new vE}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Mr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class vE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mt(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new es(0)}static kn(){return new es(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.changes=new us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&io(r.mutation,i,Jt.empty(),it.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=$s();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=rr();const o=ro(),l=function(){return ro()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof zr)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),io(p.mutation,h,p.mutation.getFieldMask(),it.now())):o.set(h.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return l.set(h,new xE(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ro();let i=new Ue((o,l)=>o-l),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Jt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const g=(i.get(l.batchId)||fe()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,g=A0();p.forEach(v=>{if(!s.has(v)){const k=D0(n.get(v),r.get(v));k!==null&&g.set(v,k),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Zr());let l=-1,u=s;return o.next(h=>B.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?B.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,fe())).next(p=>({batchId:l,changes:I0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=$s();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=$s();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,u=>{const h=function(g,v){return new zo(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,At.newInvalidDocument(p)))});let l=$s();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&io(p.mutation,h,Jt.empty(),it.now()),ql(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:mE(i.bundledQuery),readTime:jn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.overlays=new Ue(ie.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Zr(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Zr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Zr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return B.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qS(n,r));let s=this.Ir.get(n);s===void 0&&(s=fe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.Tr=new mt(at.Er),this.dr=new mt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Me([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Me([])),r=new at(n,e),i=new at(n,e+1);let s=fe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new at(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(at.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HS(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new at(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(xe);return n.forEach(i=>{const s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new at(new ie(s),0);let l=new mt(xe);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),B.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new at(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.Mr=e,this.docs=function(){return new Ue(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=rr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rr();const o=n.path,l=new ie(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||lS(aS(p),r)<=0||(i.has(p.key)||ql(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CE(this)}getSize(e){return B.resolve(this.size)}}class CE extends _E{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.persistence=e,this.Nr=new us(n=>ph(n),gh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wh,this.targetCount=0,this.kr=es.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new es(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ch(0),this.Kr=!1,this.Kr=!0,this.$r=new TE,this.referenceDelegate=e(this),this.Ur=new kE(this),this.indexManager=new yE,this.remoteDocumentCache=function(i){return new AE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gE(n),this.Gr=new SE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new IE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new PE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class PE extends cS{constructor(e){super(),this.currentSequenceNumber=e}}class Sh{constructor(e){this.persistence=e,this.Jr=new wh,this.Yr=null}static Zr(e){return new Sh(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Eh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Mx()?8:dS(Dx())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bE;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ls()<=ye.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",wi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Ls()<=ye.DEBUG&&te("QueryEngine","Query:",wi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ls()<=ye.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",wi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):B.resolve())}Yi(e,n){if(ng(n))return B.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zc(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Zc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return ng(n)||i.isEqual(le.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(Ls()<=ye.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wi(n)),this.rs(e,o,n,oS(i,-1)).next(l=>l))})}ts(e,n){let r=new mt(E0(e));return n.forEach((i,s)=>{ql(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ls()<=ye.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",wi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(xe),this._s=new us(s=>ph(s),gh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ME(t,e,n,r){return new NE(t,e,n,r)}async function H0(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=fe();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function VE(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const g=h.batch,v=g.keys();let k=B.resolve();return v.forEach(R=>{k=k.next(()=>p.getEntry(u,R)).next(D=>{const O=h.docVersions.get(R);Te(O!==null),D.version.compareTo(O)<0&&(g.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=fe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function q0(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function jE(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const v=i.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,g)));let k=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?k=k.withResumeToken(vt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):p.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(p.resumeToken,r)),i=i.insert(g,k),function(D,O,T){return D.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(v,k,p)&&l.push(n.Ur.updateTargetData(s,k))});let u=rr(),h=fe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(LE(s,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(le.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return B.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function LE(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):te("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function OE(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FE(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function id(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fo(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function fg(t,e,n){const r=ue(t);let i=le.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=ue(u),v=g._s.get(p);return v!==void 0?B.resolve(g.os.get(v)):g.Ur.getTargetData(h,p)}(r,o,Vn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:fe())).next(l=>(zE(r,RS(e),l),{documents:l,Ts:s})))}function zE(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class pg{constructor(){this.activeTargetIds=VS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BE{constructor(){this.so=new pg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka=null;function Gu(){return ka===null?ka=function(){return 268435456+Math.round(2147483648*Math.random())}():ka++,"0x"+ka.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class HE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Gu(),u=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(p=>(te("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Io("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ls}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$E[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Gu();return new Promise((o,l)=>{const u=new o0;u.setWithCredentials(!0),u.listenOnce(a0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ba.NO_ERROR:const p=u.getResponseJson();te(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Ba.TIMEOUT:te(Tt,`RPC '${e}' ${s} timed out`),l(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ba.HTTP_ERROR:const g=u.getStatus();if(te(Tt,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const k=v==null?void 0:v.error;if(k&&k.status&&k.message){const R=function(O){const T=O.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(k.status);l(new Y(R,k.message))}else l(new Y(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(z.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{te(Tt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);te(Tt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Gu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=c0(),l=u0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");te(Tt,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let v=!1,k=!1;const R=new WE({Io:O=>{k?te(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(v||(te(Tt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),te(Tt,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},To:()=>g.close()}),D=(O,T,I)=>{O.listen(T,A=>{try{I(A)}catch(b){setTimeout(()=>{throw b},0)}})};return D(g,Us.EventType.OPEN,()=>{k||(te(Tt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),D(g,Us.EventType.CLOSE,()=>{k||(k=!0,te(Tt,`RPC '${e}' stream ${i} transport closed`),R.So())}),D(g,Us.EventType.ERROR,O=>{k||(k=!0,Io(Tt,`RPC '${e}' stream ${i} transport errored:`,O),R.So(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),D(g,Us.EventType.MESSAGE,O=>{var T;if(!k){const I=O.data[0];Te(!!I);const A=I,b=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(b){te(Tt,`RPC '${e}' stream ${i} received error:`,b);const V=b.status;let j=function(m){const w=Xe[m];if(w!==void 0)return V0(w)}(V),E=b.message;j===void 0&&(j=z.INTERNAL,E="Unknown error status: "+V+" with message "+b.message),k=!0,R.So(new Y(j,E)),g.close()}else te(Tt,`RPC '${e}' stream ${i} received:`,I),R.bo(I)}}),D(l,l0.STAT_EVENT,O=>{O.stat===Gc.PROXY?te(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Gc.NOPROXY&&te(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){return new tE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new G0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qE extends Q0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iE(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?jn(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=rd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Xc(u)?{documents:aE(s,u)}:{query:lE(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=O0(s,o.resumeToken);const h=ed(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(le.min())>0){l.readTime=Sl(s,o.snapshotVersion.toTimestamp());const h=ed(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=cE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=rd(this.serializer),n.removeTarget=e,this.a_(n)}}class GE extends Q0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oE(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=rd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sE(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,td(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,td(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class KE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{pi(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ue(u);h.L_.add(4),await $o(h),h.q_.set("Unknown"),h.L_.delete(4),await Xl(h)}(this))})}),this.q_=new KE(r,i)}}async function Xl(t){if(pi(t))for(const e of t.B_)await e(!0)}async function $o(t){for(const e of t.B_)await e(!1)}function K0(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ch(n)?Ah(n):cs(n).r_()&&Ih(n,e))}function Th(t,e){const n=ue(t),r=cs(n);n.N_.delete(e),r.r_()&&Y0(n,e),n.N_.size===0&&(r.r_()?r.o_():pi(n)&&n.q_.set("Unknown"))}function Ih(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cs(t).A_(e)}function Y0(t,e){t.Q_.xe(e),cs(t).R_(e)}function Ah(t){t.Q_=new XS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),cs(t).start(),t.q_.v_()}function Ch(t){return pi(t)&&!cs(t).n_()&&t.N_.size>0}function pi(t){return ue(t).L_.size===0}function X0(t){t.Q_=void 0}async function XE(t){t.q_.set("Online")}async function JE(t){t.N_.forEach((e,n)=>{Ih(t,e)})}async function ZE(t,e){X0(t),Ch(t)?(t.q_.M_(e),Ah(t)):t.q_.set("Unknown")}async function eT(t,e,n){if(t.q_.set("Online"),e instanceof L0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await El(t,r)}else if(e instanceof Wa?t.Q_.Ke(e):e instanceof j0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await q0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(vt.EMPTY_BYTE_STRING,p.snapshotVersion)),Y0(s,u);const g=new _r(p.target,u,h,p.sequenceNumber);Ih(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await El(t,r)}}async function El(t,e,n){if(!Fo(e))throw e;t.L_.add(1),await $o(t),t.q_.set("Offline"),n||(n=()=>q0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xl(t)})}function J0(t,e){return e().catch(n=>El(t,n,e))}async function Jl(t){const e=ue(t),n=jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tT(e);)try{const i=await OE(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,nT(e,i)}catch(i){await El(e,i)}Z0(e)&&ev(e)}function tT(t){return pi(t)&&t.O_.length<10}function nT(t,e){t.O_.push(e);const n=jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Z0(t){return pi(t)&&!jr(t).n_()&&t.O_.length>0}function ev(t){jr(t).start()}async function rT(t){jr(t).p_()}async function iT(t){const e=jr(t);for(const n of t.O_)e.m_(n.mutations)}async function sT(t,e,n){const r=t.O_.shift(),i=vh.from(r,e,n);await J0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Jl(t)}async function oT(t,e){e&&jr(t).V_&&await async function(r,i){if(function(o){return QS(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();jr(r).s_(),await J0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Jl(r)}}(t,e),Z0(t)&&ev(t)}async function mg(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=pi(n);n.L_.add(3),await $o(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xl(n)}async function aT(t,e){const n=ue(t);e?(n.L_.delete(2),await Xl(n)):e||(n.L_.add(2),await $o(n),n.q_.set("Unknown"))}function cs(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new qE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:XE.bind(null,t),Ro:JE.bind(null,t),mo:ZE.bind(null,t),d_:eT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ch(t)?Ah(t):t.q_.set("Unknown")):(await t.K_.stop(),X0(t))})),t.K_}function jr(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new GE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rT.bind(null,t),mo:oT.bind(null,t),f_:iT.bind(null,t),g_:sT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Jl(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new kh(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rh(t,e){if(nr("AsyncQueue",`${e}: ${t}`),Fo(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=$s(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.W_=new Ue(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ts{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ts(e,n,Ui.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uT{constructor(){this.queries=vg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=vg(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function vg(){return new us(t=>S0(t),Hl)}async function tv(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lT,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Rh(o,`Initialization of query '${wi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ph(n)}async function nv(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cT(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Ph(n)}function dT(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ph(t){t.Y_.forEach(e=>{e.next()})}var sd,_g;(_g=sd||(sd={})).ea="default",_g.Cache="cache";class rv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.key=e}}class sv{constructor(e){this.key=e}}class hT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=E0(e),this.Ra=new Ui(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new yg,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const v=i.get(p),k=ql(this.query,g)?g:null,R=!!v&&this.mutatedKeys.has(v.key),D=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let O=!1;v&&k?v.data.isEqual(k.data)?R!==D&&(r.track({type:3,doc:k}),O=!0):this.ga(v,k)||(r.track({type:2,doc:k}),O=!0,(u&&this.Aa(k,u)>0||h&&this.Aa(k,h)<0)&&(l=!0)):!v&&k?(r.track({type:0,doc:k}),O=!0):v&&!k&&(r.track({type:1,doc:v}),O=!0,(u||h)&&(l=!0)),O&&(k?(o=o.add(k),s=D?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(k,R){const D=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return D(k)-D(R)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new ts(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iv(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ts.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pT{constructor(e){this.key=e,this.va=!1}}class gT{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new us(l=>S0(l),Hl),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(ie.comparator),this.Na=new Map,this.La=new wh,this.Ba={},this.ka=new Map,this.qa=es.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mT(t,e,n=!0){const r=dv(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ov(r,e,n,!0),i}async function yT(t,e){const n=dv(t);await ov(n,e,!0,!1)}async function ov(t,e,n,r){const i=await FE(t.localStore,Vn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await vT(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&K0(t.remoteStore,i),l}async function vT(t,e,n,r,i){t.Ka=(g,v,k)=>async function(D,O,T,I){let A=O.view.ma(T);A.ns&&(A=await fg(D.localStore,O.query,!1).then(({documents:E})=>O.view.ma(E,A)));const b=I&&I.targetChanges.get(O.targetId),V=I&&I.targetMismatches.get(O.targetId)!=null,j=O.view.applyChanges(A,D.isPrimaryClient,b,V);return wg(D,O.targetId,j.wa),j.snapshot}(t,g,v,k);const s=await fg(t.localStore,e,!0),o=new hT(e,s.Ts),l=o.ma(s.documents),u=Uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);wg(t,n,h.wa);const p=new fT(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function _T(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Hl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await id(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Th(r.remoteStore,i.targetId),od(r,i.targetId)}).catch(Oo)):(od(r,i.targetId),await id(r.localStore,i.targetId,!0))}async function xT(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Th(n.remoteStore,r.targetId))}async function wT(t,e,n){const r=kT(t);try{const i=await function(o,l){const u=ue(o),h=it.now(),p=l.reduce((k,R)=>k.add(R.key),fe());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",k=>{let R=rr(),D=fe();return u.cs.getEntries(k,p).next(O=>{R=O,R.forEach((T,I)=>{I.isValidDocument()||(D=D.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(k,R)).next(O=>{g=O;const T=[];for(const I of l){const A=$S(I,g.get(I.key).overlayedDocument);A!=null&&T.push(new zr(I.key,A,p0(A.value.mapValue),Tn.exists(!0)))}return u.mutationQueue.addMutationBatch(k,h,T,l)}).next(O=>{v=O;const T=O.applyToLocalDocumentSet(g,D);return u.documentOverlayCache.saveOverlays(k,O.batchId,T)})}).then(()=>({batchId:v.batchId,changes:I0(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ue(xe)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Wo(r,i.changes),await Jl(r.remoteStore)}catch(i){const s=Rh(i,"Failed to persist write");n.reject(s)}}async function av(t,e){const n=ue(t);try{const r=await jE(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await Wo(n,r,e)}catch(r){await Oo(r)}}function xg(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ue(o);u.onlineState=l;let h=!1;u.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&Ph(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ST(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ue(ie.comparator);o=o.insert(s,At.newNoDocument(s,le.min()));const l=fe().add(s),u=new Kl(le.min(),new Map,new Ue(xe),o,l);await av(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),bh(r)}else await id(r.localStore,e,!1).then(()=>od(r,e,n)).catch(Oo)}async function ET(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await VE(n.localStore,e);uv(n,r,null),lv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wo(n,i)}catch(i){await Oo(i)}}async function TT(t,e,n){const r=ue(t);try{const i=await function(o,l){const u=ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(Te(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);uv(r,e,n),lv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wo(r,i)}catch(i){await Oo(i)}}function lv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uv(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function od(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cv(t,r)})}function cv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Th(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bh(t))}function wg(t,e,n){for(const r of n)r instanceof iv?(t.La.addReference(r.key,e),IT(t,r)):r instanceof sv?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cv(t,r.key)):ae()}function IT(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),bh(t))}function bh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new pT(n)),t.Oa=t.Oa.insert(n,r),K0(t.remoteStore,new _r(Vn(mh(n.path)),r,"TargetPurposeLimboResolution",ch.oe))}}async function Wo(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=Eh.Wi(u.targetId,h);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const p=ue(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>B.forEach(h,v=>B.forEach(v.$i,k=>p.persistence.referenceDelegate.addReference(g,v.targetId,k)).next(()=>B.forEach(v.Ui,k=>p.persistence.referenceDelegate.removeReference(g,v.targetId,k)))))}catch(g){if(!Fo(g))throw g;te("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const k=p.os.get(v),R=k.snapshotVersion,D=k.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(v,D)}}}(r.localStore,s))}async function AT(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await H0(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wo(n,r.hs)}}function CT(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let i=fe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function dv(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=av.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ST.bind(null,e),e.Ca.d_=cT.bind(null,e.eventManager),e.Ca.$a=dT.bind(null,e.eventManager),e}function kT(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ET.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TT.bind(null,e),e}class Tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ME(this.persistence,new DE,e.initialUser,this.serializer)}Ga(e){return new RE(Sh.Zr,this.serializer)}Wa(e){return new BE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tl.provider={build:()=>new Tl};class ad{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AT.bind(null,this.syncEngine),await aT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uT}()}createDatastore(e){const n=Yl(e.databaseInfo.databaseId),r=function(s){return new HE(s)}(e.databaseInfo);return function(s,o,l,u){return new QE(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new YE(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>xg(this.syncEngine,n,0),function(){return gg.D()?new gg:new UE}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const g=new gT(i,s,o,l,u,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await $o(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ad.provider={build:()=>new ad};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=d0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ku(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await H0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PT(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mg(e.remoteStore,i)),t._onlineComponents=e}async function PT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await Ku(t,new Tl)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Ku(t,new Tl);return t._offlineComponents}async function fv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Sg(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Sg(t,new ad))),t._onlineComponents}function bT(t){return fv(t).then(e=>e.syncEngine)}async function pv(t){const e=await fv(t),n=e.eventManager;return n.onListen=mT.bind(null,e.syncEngine),n.onUnlisten=_T.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xT.bind(null,e.syncEngine),n}function DT(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new hv({next:v=>{p.Za(),o.enqueueAndForget(()=>nv(s,g));const k=v.docs.has(l);!k&&v.fromCache?h.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&v.fromCache&&u&&u.source==="server"?h.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new rv(mh(l.path),p,{includeMetadataChanges:!0,_a:!0});return tv(s,g)}(await pv(t),t.asyncQueue,e,n,r)),r.promise}function NT(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new hv({next:v=>{p.Za(),o.enqueueAndForget(()=>nv(s,g)),v.fromCache&&u.source==="server"?h.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new rv(l,p,{includeMetadataChanges:!0,_a:!0});return tv(s,g)}(await pv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MT(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Tg(t){if(!ie.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ig(t){if(ie.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zl(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ag({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ag(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jw;switch(r.type){case"firstParty":return new tS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Eg.get(n);r&&(te("ComponentProvider","Removing Datastore"),Eg.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class br extends ds{constructor(e,n,r){super(e,n,mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ie(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function ns(t,e,...n){if(t=An(t),mv("collection","path",e),t instanceof Dh){const r=Me.fromString(e,...n);return Ig(r),new br(t,null,r)}{if(!(t instanceof bt||t instanceof br))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Ig(r),new br(t.firestore,null,r)}}function un(t,e,...n){if(t=An(t),arguments.length===1&&(e=d0.newId()),mv("doc","path",e),t instanceof Dh){const r=Me.fromString(e,...n);return Tg(r),new bt(t,null,new ie(r))}{if(!(t instanceof bt||t instanceof br))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Tg(r),new bt(t.firestore,t instanceof br?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new G0(this,"async_queue_retry"),this.Vu=()=>{const r=Qu();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fo(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw nr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=kh.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class hs extends Dh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cg(e),this._firestoreClient=void 0,await e}}}function VT(t,e,n){n||(n="(default)");const r=t0(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ml(s,e))return i;throw new Y(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Nh(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jT(t),t._firestoreClient}function jT(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,p){return new pS(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,gv(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RT(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(vt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rs(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=/^__.*__$/;class OT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bo(e,this.data,n,this.fieldTransforms)}}class yv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class jh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Il(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vv(this.Cu)&&LT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yl(e)}Qu(e,n,r,i=!1){return new jh({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nu(t){const e=t._freezeSettings(),n=Yl(t._databaseId);return new FT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _v(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Oh("Data must be an object, but it was:",o,r);const l=xv(r,o);let u,h;if(s.merge)u=new Jt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const v=ld(e,g,n);if(!o.contains(v))throw new Y(z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Sv(p,v)||p.push(v)}u=new Jt(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new OT(new Lt(l),u,h)}class ru extends tu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ru}}class Lh extends tu{_toFieldTransform(e){return new FS(e.path,new Po)}isEqual(e){return e instanceof Lh}}function zT(t,e,n,r){const i=t.Qu(1,e,n);Oh("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();fi(r,(u,h)=>{const p=Fh(e,u,n);h=An(h);const g=i.Nu(p);if(h instanceof ru)s.push(p);else{const v=Ho(h,g);v!=null&&(s.push(p),o.set(p,v))}});const l=new Jt(s);return new yv(o,l,i.fieldTransforms)}function BT(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[ld(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(ld(e,s[v])),u.push(s[v+1]);const h=[],p=Lt.empty();for(let v=l.length-1;v>=0;--v)if(!Sv(h,l[v])){const k=l[v];let R=u[v];R=An(R);const D=o.Nu(k);if(R instanceof ru)h.push(k);else{const O=Ho(R,D);O!=null&&(h.push(k),p.set(k,O))}}const g=new Jt(h);return new yv(p,g,o.fieldTransforms)}function UT(t,e,n,r=!1){return Ho(n,t.Qu(r?4:3,e))}function Ho(t,e){if(wv(t=An(t)))return Oh("Unsupported field value:",e,t),xv(t,e);if(t instanceof tu)return function(r,i){if(!vv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Ho(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=An(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=it.fromDate(r);return{timestampValue:Sl(i.serializer,s)}}if(r instanceof it){const s=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sl(i.serializer,s)}}if(r instanceof Mh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:O0(i.serializer,r._byteString)};if(r instanceof bt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vh)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return yh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zl(r)}`)}(t,e)}function xv(t,e){const n={};return h0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(r,i)=>{const s=Ho(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function wv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Mh||t instanceof rs||t instanceof bt||t instanceof tu||t instanceof Vh)}function Oh(t,e,n){if(!wv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ld(t,e,n){if((e=An(e))instanceof eu)return e._internalPath;if(typeof e=="string")return Fh(t,e);throw Il("Field path arguments must be of type string or ",t,!1,void 0,n)}const $T=new RegExp("[~\\*/\\[\\]]");function Fh(t,e,n){if(e.search($T)>=0)throw Il(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new eu(...e.split("."))._internalPath}catch{throw Il(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Il(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(z.INVALID_ARGUMENT,l+t+u)}function Sv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WT extends Ev{data(){return super.data()}}function zh(t,e){return typeof e=="string"?Fh(t,e):e instanceof eu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bh{}class qT extends Bh{}function GT(t,e,...n){let r=[];e instanceof Bh&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Uh).length,l=s.filter(u=>u instanceof iu).length;if(o>1||o>0&&l>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class iu extends qT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new iu(e,n,r)}_apply(e){const n=this._parse(e);return Tv(e._query,n),new ds(e.firestore,e.converter,Jc(e._query,n))}_parse(e){const n=nu(e.firestore);return function(s,o,l,u,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Pg(g,p);const k=[];for(const R of g)k.push(Rg(u,s,R));v={arrayValue:{values:k}}}else v=Rg(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Pg(g,p),v=UT(l,o,g,p==="in"||p==="not-in");return Ze.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kg(t,e,n){const r=e,i=zh("where",t);return iu._create(i,r,n)}class Uh extends Bh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)Tv(o,u),o=Jc(o,u)}(e._query,n),new ds(e.firestore,e.converter,Jc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Rg(t,e,n){if(typeof(n=An(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!ie.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yp(t,new ie(r))}if(n instanceof bt)return Yp(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zl(n)}.`)}function Pg(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tv(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QT{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Qe(o.doubleValue));return new Vh(s)}convertGeoPoint(e){return new Mh(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Te(W0(r));const i=new ko(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||nr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Av extends Ev{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ha extends Av{data(e={}){return super.data(e)}}class KT{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ha(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ha(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ha(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:YT(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){t=ir(t,bt);const e=ir(t.firestore,hs);return DT(Nh(e),t._key).then(n=>ZT(e,t,n))}class Cv extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function kv(t){t=ir(t,ds);const e=ir(t.firestore,hs),n=Nh(e),r=new Cv(e);return HT(t._query),NT(n,t._query).then(i=>new KT(e,r,t,i))}function JT(t,e,n){t=ir(t,bt);const r=ir(t.firestore,hs),i=Iv(t.converter,e);return $h(r,[_v(nu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tn.none())])}function Hn(t,e,n,...r){t=ir(t,bt);const i=ir(t.firestore,hs),s=nu(i);let o;return o=typeof(e=An(e))=="string"||e instanceof eu?BT(s,"updateDoc",t._key,e,n,r):zT(s,"updateDoc",t._key,e),$h(i,[o.toMutation(t._key,Tn.exists(!0))])}function Al(t,e){const n=ir(t.firestore,hs),r=un(t),i=Iv(t.converter,e);return $h(n,[_v(nu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function $h(t,e){return function(r,i){const s=new Kn;return r.asyncQueue.enqueueAndForget(async()=>wT(await bT(r),i,s)),s.promise}(Nh(t),e)}function ZT(t,e,n){const r=n.docs.get(e._key),i=new Cv(t);return new Av(t,i,e._key,r,new Hs(n.hasPendingWrites,n.fromCache),e.converter)}function Zt(){return new Lh("serverTimestamp")}(function(e,n=!0){(function(i){ls=i})(Ow),Eo(new Yi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new hs(new Zw(r.getProvider("auth-internal")),new rS(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Pr(Hp,"4.7.3",e),Pr(Hp,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="us-central1";class tI{constructor(e,n,r,i,s=ud,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new eI(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=ud}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function nI(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const bg="@firebase/functions",Dg="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="auth-internal",iI="app-check-internal",sI="messaging-internal";function oI(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(rI),l=r.getProvider(sI),u=r.getProvider(iI);return new tI(s,o,l,u,i,t)};Eo(new Yi(Rv,n,"PUBLIC").setMultipleInstances(!0)),Pr(bg,Dg,e),Pr(bg,Dg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t=Fw(),e=ud){const r=t0(An(t),Rv).getImmediate({identifier:e}),i=Px("functions");return i&&lI(r,...i),r}function lI(t,e,n){nI(An(t),e,n)}oI(fetch.bind(self));const uI={apiKey:'"AIzaSyDRdl4zhwoZumVtphmJ19orZ8HoR0WQQZM",',authDomain:'"qualtrics-game-backend.firebaseapp.com",',projectId:'"qualtrics-game-backend",',storageBucket:'"qualtrics-game-backend.firebasestorage.app",',messagingSenderId:'"441267092549",',appId:"1:441267092549:web:6ce075f5f3ea7cf958772c"},Pv=n0(uI),pt=VT(Pv,{experimentalForceLongPolling:!1,useFetchStreams:!1});aI(Pv);const Pe={async logEvent(t,e){const n=localStorage.getItem("sessionId"),r=parseInt(localStorage.getItem("sessionStartTime")||Date.now()),i=Date.now(),s=i-r,o=Math.floor(s/6e4),l=Math.floor(s%6e4/1e3),u=`${o}:${l.toString().padStart(2,"0")}`,h={sessionId:n,type:t,timestamp:Zt(),clientTimestamp:i,timeElapsed:s,readableTime:u,semesterTime:this.getSemesterTime(),...e,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`};try{await Al(ns(pt,"events"),h)}catch(p){console.error("Failed to log event:",p),this.storeOfflineEvent(h)}},storeOfflineEvent(t){const e=JSON.parse(localStorage.getItem("offlineEvents")||"[]");e.push(t),localStorage.setItem("offlineEvents",JSON.stringify(e))},async syncOfflineEvents(){const t=JSON.parse(localStorage.getItem("offlineEvents")||"[]");if(t.length>0){for(const e of t)try{await Al(ns(pt,"events"),e)}catch(n){console.error("Failed to sync offline event:",n)}localStorage.removeItem("offlineEvents")}},async trackPageSwitch(t,e,n=!1){const r=this.getTimeOnCurrentPage(t),i=this.getSwitchContext(t,e);return this.logEvent("page_switch",{from:t,to:e,isAutoAdvance:n,switchType:n?"auto":"manual",timeOnPreviousPage:r,gameFrom:t?t.substring(0,2):null,gameTo:e?e.substring(0,2):null,switchReason:n?"task_completed":"user_initiated",...i})},async trackTaskAttempt(t,e,n,r,i,s){const o=this.calculateAccuracy(t,i,s),l=t.substring(0,2),u=t[3],h=this.getAttemptHistory(t);h.push({attempt:e,accuracy:o,timeTaken:r,answer:i,expected:s,timestamp:Date.now()}),this.saveAttemptHistory(t,h);const p=this.categorizeError(t,i,s);return this.updateMistakeTracking(t,p),this.logEvent("task_attempt",{taskId:t,game:l,taskNum:u,attempt:e,isCorrect:n,timeTaken:r,answer:i,expected:s,accuracy:o,accuracyProgression:h.map(g=>g.accuracy),mistakeType:p,timeProgression:h.map(g=>g.timeTaken),averageTime:h.reduce((g,v)=>g+v.timeTaken,0)/h.length,bestAccuracy:Math.max(...h.map(g=>g.accuracy)),worstAccuracy:Math.min(...h.map(g=>g.accuracy)),improvementTrend:this.calculateImprovementTrend(h)})},async trackAITaskHelp(t,e,n,r,i){const s=Date.now(),o=t.startsWith("g1")?"research":t.startsWith("g2")?"materials":"engagement";return this.logEvent("ai_task_help",{taskId:t,taskCategory:o,helpType:e,aiSuggestion:n,wasCorrect:r,attemptNumber:i,helpRequestTime:s,aiAccuracy:r?"correct":"incorrect",context:this.getCurrentContext()})},async trackAIHelpResponse(t,e,n,r,i,s){return this.logEvent("ai_help_response",{taskId:t,helpType:e,aiSuggestion:n,playerAction:r,playerAnswer:i,aiAnswerUsed:n===i,timeBetweenHelpAndSubmit:s,playerModification:n!==i?{original:n,modified:i,difference:this.calculateDifference(n,i,e)}:null})},async trackChatInteraction(t,e,n,r){const i=Date.now(),s=r?r.substring(0,2):"none",o=this.analyzeQuery(t),l=this.getTaskProgress(r);return this.logEvent("chat_interaction",{fullInquiry:{query:t,queryTime:i,queryLength:t.length,queryWords:t.split(/\s+/).length,queryType:this.categorizeQuery(t),...o},response:e.text,responseId:e.id,responseLevel:e.level,responseType:e.type,matchedTriggers:e.triggers,responseScore:e.score,responseLength:e.text.length,promptNumber:n,currentTask:r,gameContext:s,taskPhase:this.getTaskPhase(r),promptsRemaining:this.getPromptsRemaining(n),action:"chat_query",actionContext:{beforeTask:r,taskAttempts:this.getAttemptHistory(r).length,currentAccuracy:this.getCurrentAccuracy(r),timeOnTask:this.getTimeOnCurrentPage(r),...l},queryEffectiveness:{relevanceToTask:this.assessQueryRelevance(t,r),specificity:o.specificity,helpSeeking:o.isHelpSeeking}})},async trackTaskComplete(t,e,n,r){const i=this.getAttemptHistory(t),s=this.getMistakesByType(t),o=this.calculatePerformanceMetrics(t,i,n);return this.logEvent("task_complete",{taskId:t,game:t.substring(0,2),taskNum:t[3],attempts:e,totalTime:n,finalAccuracy:r,accuracyProgression:i.map(l=>l.accuracy),timePerAttempt:i.map(l=>l.timeTaken),averageAccuracy:i.reduce((l,u)=>l+u.accuracy,0)/i.length,improvementRate:this.calculateImprovementRate(i),mistakesByType:s,performance:{speed:n/e,consistency:this.calculateConsistency(i),difficulty:this.assessDifficulty(t,e,n),efficiency:o.efficiency,learningCurve:o.learningCurve},insights:{struggledWith:this.identifyStrugglePoints(i,s),timeDistribution:this.analyzeTimeDistribution(i),accuracyTrend:o.accuracyTrend}})},async trackUserAction(t,e={}){return this.logEvent("user_action",{action:t,...e,timestamp:Date.now(),context:this.getCurrentContext()})},async trackGameStart(t){const e={practiceCompleted:t,browserInfo:this.getBrowserInfo(),deviceInfo:this.getDeviceInfo(),connectionQuality:await this.assessConnectionQuality()};return this.logEvent("game_start",e)},async trackGameComplete(t,e,n,r,i,s){const o=this.calculateGameStats();return this.logEvent("game_complete",{totalTime:t,totalSwitches:e,completedTasks:n,gameFlow:{averageTimePerTask:t/n,switchesPerTask:e/n,taskCompletionOrder:this.getTaskCompletionOrder(),dependenciesActivated:this.getDependenciesActivated()},performanceSummary:{overallAccuracy:o.overallAccuracy,bestTask:o.bestTask,worstTask:o.worstTask,mostAttempts:o.mostAttempts,leastAttempts:o.leastAttempts},chatUsage:{totalPrompts:i,promptsUsed:s,promptEfficiency:s/i,chatInteractions:this.getChatInteractionSummary()},finalContext:{practiceCompleted:r==="yes",totalFocusLosses:this.getFocusLossCount(),totalIdleWarnings:this.getIdleWarningCount(),sessionDuration:t}})},categorizeError(t,e,n){if(t.startsWith("g1")){const r=Math.abs(e-n),i=n>0?r/n*100:100;return r===0?"none":r===1?"off_by_one":r<=3?"minor_miscount":i<=10?"close_miscount":i<=25?"moderate_miscount":"major_miscount"}else if(t.startsWith("g2")){const r=Math.abs(e-n);return r===0?"none":r<.05?"extremely_close":r<.1?"very_close":r<.5?"close":r<1?"moderate":r<2?"far":"very_far"}else if(t.startsWith("g3")){if(e===n)return"none";const r=[];e.toLowerCase()===n.toLowerCase()&&r.push("case_only"),e.length!==n.length&&(e.length<n.length?r.push("missing_chars"):r.push("extra_chars"));const i=this.categorizeCharacters(e),s=this.categorizeCharacters(n);return i.symbols!==s.symbols&&r.push("symbol_error"),i.numbers!==s.numbers&&r.push("number_error"),i.spaces!==s.spaces&&r.push("space_error"),this.analyzePositionErrors(e,n).transposition&&r.push("transposition"),r.length>0?r.join(","):"general_mismatch"}return"unknown"},analyzeQuery(t){const e=t.toLowerCase().split(/\s+/),n=["what","how","why","when","where","which","who"],r=["help","stuck","cant","difficult","hard","struggling"];return{hasQuestion:n.some(i=>e.includes(i)),isHelpSeeking:r.some(i=>e.includes(i)),specificity:this.calculateSpecificity(t),sentiment:this.analyzeSentiment(t),urgency:this.assessUrgency(t)}},categorizeQuery(t){const e=t.toLowerCase();return e.includes("help")||e.includes("stuck")||e.includes("cant")?"help_request":e.includes("how")&&(e.includes("do")||e.includes("work"))?"how_to":e.includes("what")||e.includes("explain")?"explanation":e.includes("strategy")||e.includes("tip")||e.includes("trick")?"strategy":e.includes("rule")||e.includes("requirement")?"rules":e.includes("count")||e.includes("slider")||e.includes("typ")?"task_specific":e.includes("order")||e.includes("sequence")||e.includes("which first")?"task_order":e.includes("prompt")||e.includes("question")?"prompt_related":e.includes("accuracy")||e.includes("score")?"performance":"general"},getTaskPhase(t){if(!t)return"none";const e=this.getAttemptHistory(t).length,n=this.getCurrentAccuracy(t);return e===0?"not_started":e===1?"first_attempt":e<=3&&n>=70?"early_success":e<=3?"early_attempts":e<=5&&n>=80?"improving":e>5&&n<50?"struggling_badly":e>5?"struggling":"in_progress"},calculateAccuracy(t,e,n){if(t.startsWith("g1")){if(e===n)return 100;const r=Math.abs(e-n),i=Math.max(n*.1,1);if(r<=i)return Math.round(90*(1-r/i)+90);{const s=r-i,o=Math.max(n,20),l=Math.max(0,90*(1-s/o));return Math.round(l)}}else if(t.startsWith("g2")){const r=Math.abs(e-n),i=parseInt(t[3]),s=[.5,.05,.005][i-1];return r<=s?100:r<=s*2?Math.round(90+10*(1-(r-s)/s)):Math.max(0,Math.round(90*(1-r/10)))}else if(t.startsWith("g3")){if(e===n)return 100;const r=Math.max(e.length,n.length);if(r===0)return 0;let i=0;const s=Math.min(e.length,n.length);for(let l=0;l<s;l++)e[l]===n[l]?i+=1:n.includes(e[l])&&(i+=.5);const o=Math.abs(e.length-n.length)*.5;return i=Math.max(0,i-o),Math.round(i/r*100)}return 0},getAttemptHistory(t){const e=localStorage.getItem(`attemptHistory_${t}`);return e?JSON.parse(e):[]},saveAttemptHistory(t,e){localStorage.setItem(`attemptHistory_${t}`,JSON.stringify(e))},getCurrentAccuracy(t){const e=this.getAttemptHistory(t);return e.length>0?e[e.length-1].accuracy:null},getMistakesByType(t){const e=localStorage.getItem(`mistakes_${t}`);return e?JSON.parse(e):{}},updateMistakeTracking(t,e){const n=this.getMistakesByType(t);n[e]=(n[e]||0)+1,localStorage.setItem(`mistakes_${t}`,JSON.stringify(n))},calculateImprovementRate(t){if(t.length<2)return 0;const e=t[0].accuracy,r=t[t.length-1].accuracy-e,i=Math.floor(t.length/2),s=t.slice(0,i).reduce((u,h)=>u+h.accuracy,0)/i,l=t.slice(i).reduce((u,h)=>u+h.accuracy,0)/(t.length-i)-s;return{overall:r,trend:l,isImproving:l>0}},calculateConsistency(t){if(t.length<2)return 100;const e=t.map(s=>s.accuracy),n=e.reduce((s,o)=>s+o)/e.length,r=e.reduce((s,o)=>s+Math.pow(o-n,2),0)/e.length,i=Math.sqrt(r);return Math.max(0,Math.round(100-i))},assessDifficulty(t,e,n){const r=parseInt(t[3]),i=["easy","medium","hard"][r-1];return e===1&&n<1e4?i+"_mastered":e===1&&n<2e4?i+"_quick":e<=2&&n<3e4?i+"_smooth":e<=3?i+"_normal":e<=5?i+"_challenging":e>5&&n>12e4?i+"_very_challenging":i+"_struggled"},getTimeOnCurrentPage(t){const e=localStorage.getItem(`pageStartTime_${t}`);return e?Date.now()-parseInt(e):0},setPageStartTime(t){localStorage.setItem(`pageStartTime_${t}`,Date.now().toString())},calculatePerformanceMetrics(t,e,n){const r=e.map(s=>s.accuracy),i=e.map(s=>s.timeTaken);return{efficiency:this.calculateEfficiency(r,i),learningCurve:this.analyzeLearningCurve(e),accuracyTrend:this.calculateTrend(r),speedTrend:this.calculateTrend(i),plateauPoint:this.findPlateauPoint(r)}},calculateEfficiency(t,e){const n=t.reduce((i,s)=>i+s,0)/t.length,r=e.reduce((i,s)=>i+s,0)/e.length;return n/(r/1e3)},analyzeLearningCurve(t){if(t.length<3)return"insufficient_data";const e=t.map(s=>s.accuracy),n=[];for(let s=1;s<e.length;s++)n.push(e[s]-e[s-1]);const r=n.reduce((s,o)=>s+o,0)/n.length,i=n.slice(-3).reduce((s,o)=>s+o,0)/3;return r>10?"steep_improvement":r>5?"steady_improvement":r>0?"gradual_improvement":i<-5?"declining":"plateau"},calculateTrend(t){if(t.length<2)return 0;const e=t.length,n=t.reduce((l,u,h)=>l+h,0),r=t.reduce((l,u)=>l+u,0),i=t.reduce((l,u,h)=>l+h*u,0),s=t.reduce((l,u,h)=>l+h*h,0);return(e*i-n*r)/(e*s-n*n)},findPlateauPoint(t){if(t.length<4)return null;for(let e=3;e<t.length;e++){const n=t.slice(e-3,e+1);if(this.calculateVariance(n)<5&&n[n.length-1]>=85)return e-2}return null},calculateVariance(t){const e=t.reduce((n,r)=>n+r,0)/t.length;return t.reduce((n,r)=>n+Math.pow(r-e,2),0)/t.length},categorizeCharacters(t){return{letters:(t.match(/[a-zA-Z]/g)||[]).length,numbers:(t.match(/[0-9]/g)||[]).length,symbols:(t.match(/[^a-zA-Z0-9\s]/g)||[]).length,spaces:(t.match(/\s/g)||[]).length,uppercase:(t.match(/[A-Z]/g)||[]).length,lowercase:(t.match(/[a-z]/g)||[]).length}},analyzePositionErrors(t,e){const n={transposition:!1,insertion:!1,deletion:!1,substitution:!1};for(let r=0;r<t.length-1;r++)r<e.length-1&&t[r]===e[r+1]&&t[r+1]===e[r]&&(n.transposition=!0);return t.length>e.length&&(n.insertion=!0),t.length<e.length&&(n.deletion=!0),t.length===e.length&&t!==e&&(n.substitution=!0),n},getCurrentContext(){return{currentTask:localStorage.getItem("currentTask"),gameMode:localStorage.getItem("gameMode"),totalCompleted:this.getCompletedTaskCount(),currentStreak:this.getCurrentStreak(),sessionDuration:this.getSessionDuration()}},getCompletedTaskCount(){return["g1t1","g1t2","g1t3","g2t1","g2t2","g2t3","g3t1","g3t2","g3t3"].filter(e=>this.getAttemptHistory(e).some(r=>r.accuracy>=90)).length},getCurrentStreak(){return parseInt(localStorage.getItem("currentStreak")||"0")},updateStreak(t){const e=this.getCurrentStreak();t?localStorage.setItem("currentStreak",(e+1).toString()):localStorage.setItem("currentStreak","0")},getSessionDuration(){const t=localStorage.getItem("sessionStartTime");return t?Date.now()-parseInt(t):0},getTaskProgress(t){if(!t)return{};const e=this.getAttemptHistory(t),n=this.getCurrentAccuracy(t);return{attempts:e.length,currentAccuracy:n,bestAccuracy:e.length>0?Math.max(...e.map(r=>r.accuracy)):0,averageTime:e.length>0?e.reduce((r,i)=>r+i.timeTaken,0)/e.length:0,isImproving:e.length>=2?e[e.length-1].accuracy>e[e.length-2].accuracy:!1}},assessQueryRelevance(t,e){if(!e)return"no_task";const n=t.toLowerCase(),r=e.substring(0,2);return r==="g1"&&(n.includes("count")||n.includes("word")||n.includes("letter"))||r==="g2"&&(n.includes("slider")||n.includes("slide")||n.includes("target"))||r==="g3"&&(n.includes("type")||n.includes("typing")||n.includes("pattern"))?"highly_relevant":n.includes("task")||n.includes("help")||n.includes("how")?"relevant":n.includes("order")||n.includes("strategy")||n.includes("which")?"somewhat_relevant":"not_relevant"},analyzeSentiment(t){const e=["cant","wont","stuck","hard","difficult","impossible","wrong","bad"],n=["good","great","easy","got","understand","thanks","helpful"],r=["ugh","argh","damn","frustrat","annoying","stupid"],i=t.toLowerCase(),s=e.filter(u=>i.includes(u)).length,o=n.filter(u=>i.includes(u)).length;return r.filter(u=>i.includes(u)).length>0?"frustrated":s>o?"negative":o>s?"positive":"neutral"},assessUrgency(t){const e=["help","please","need","stuck","cant","now","!","??"],n=t.toLowerCase(),r=e.filter(i=>n.includes(i)).length;return r>=3?"high":r>=1?"medium":"low"},calculateSpecificity(t){const e=t.split(/\s+/),n=["count","slider","typing","word","letter","target","pattern","accuracy","decimal","case","symbol","highlight","enhanced"];return e.filter(i=>n.includes(i.toLowerCase())).length/e.length},identifyStrugglePoints(t,e){const n=[];t.reduce((o,l)=>o+l.accuracy,0)/t.length<50&&n.push("low_overall_accuracy");const i=this.calculateImprovementRate(t);i.overall<0&&n.push("declining_performance"),!i.isImproving&&t.length>3&&n.push("plateau");const s=Object.entries(e).sort(([,o],[,l])=>l-o)[0];return s&&s[1]>t.length/2&&n.push(`repeated_${s[0]}`),n},analyzeTimeDistribution(t){const e=t.map(n=>n.timeTaken);return{min:Math.min(...e),max:Math.max(...e),average:e.reduce((n,r)=>n+r,0)/e.length,median:this.calculateMedian(e),trend:this.calculateTrend(e),consistency:this.calculateConsistency(e)}},calculateMedian(t){const e=[...t].sort((r,i)=>r-i),n=Math.floor(e.length/2);return e.length%2===0?(e[n-1]+e[n])/2:e[n]},calculateGameStats(){const n=["g1t1","g1t2","g1t3","g2t1","g2t2","g2t3","g3t1","g3t2","g3t3"].map(r=>{const i=this.getAttemptHistory(r),s=i.length>0?Math.max(...i.map(o=>o.accuracy)):0;return{task:r,attempts:i.length,bestAccuracy:s,avgTime:i.length>0?i.reduce((o,l)=>o+l.timeTaken,0)/i.length:0}}).filter(r=>r.attempts>0);return{overallAccuracy:n.length>0?n.reduce((r,i)=>r+i.bestAccuracy,0)/n.length:0,bestTask:n.sort((r,i)=>i.bestAccuracy-r.bestAccuracy)[0],worstTask:n.sort((r,i)=>r.bestAccuracy-i.bestAccuracy)[0],mostAttempts:n.sort((r,i)=>i.attempts-r.attempts)[0],leastAttempts:n.sort((r,i)=>r.attempts-i.attempts)[0]}},getTaskCompletionOrder(){return JSON.parse(localStorage.getItem("taskCompletionOrder")||"[]")},updateTaskCompletionOrder(t){const e=this.getTaskCompletionOrder();e.includes(t)||(e.push(t),localStorage.setItem("taskCompletionOrder",JSON.stringify(e)))},getDependenciesActivated(){return JSON.parse(localStorage.getItem("dependenciesActivated")||"[]")},getChatInteractionSummary(){const t=JSON.parse(localStorage.getItem("chatInteractions")||"[]");return{total:t.length,byType:this.groupBy(t,"queryType"),averageResponseTime:t.length>0?t.reduce((e,n)=>e+(n.responseTime||0),0)/t.length:0,helpRequests:t.filter(e=>e.queryType==="help_request").length}},groupBy(t,e){return t.reduce((n,r)=>{const i=r[e];return n[i]||(n[i]=0),n[i]++,n},{})},getFocusLossCount(){return parseInt(localStorage.getItem("focusLossCount")||"0")},incrementFocusLoss(){const t=this.getFocusLossCount();localStorage.setItem("focusLossCount",(t+1).toString())},getIdleWarningCount(){return parseInt(localStorage.getItem("idleWarningCount")||"0")},incrementIdleWarning(){const t=this.getIdleWarningCount();localStorage.setItem("idleWarningCount",(t+1).toString())},getSwitchContext(t,e){const n=t?this.getAttemptHistory(t):[],r=e?this.getAttemptHistory(e):[];return{fromTaskStatus:{completed:n.some(i=>i.accuracy>=90),attempts:n.length,lastAccuracy:n.length>0?n[n.length-1].accuracy:0},toTaskStatus:{previousAttempts:r.length,bestAccuracy:r.length>0?Math.max(...r.map(i=>i.accuracy)):0},switchPattern:this.analyzeSwitchPattern(t,e)}},analyzeSwitchPattern(t,e){if(!t||!e)return"initial";const n=t.substring(0,2),r=e.substring(0,2),i=parseInt(t[3]),s=parseInt(e[3]);return n===r?s===i+1?"sequential_same_game":s<i?"backtrack_same_game":"skip_same_game":s===1?"new_game_start":"cross_game_jump"},getBrowserInfo(){const t=navigator.userAgent;let e="Unknown";return t.includes("Chrome")?e="Chrome":t.includes("Firefox")?e="Firefox":t.includes("Safari")?e="Safari":t.includes("Edge")&&(e="Edge"),{browser:e,userAgent:t,language:navigator.language,platform:navigator.platform,cookiesEnabled:navigator.cookieEnabled}},getDeviceInfo(){return{screenResolution:`${window.screen.width}x${window.screen.height}`,windowSize:`${window.innerWidth}x${window.innerHeight}`,devicePixelRatio:window.devicePixelRatio,touchSupport:"ontouchstart"in window,deviceMemory:navigator.deviceMemory||"unknown",hardwareConcurrency:navigator.hardwareConcurrency||"unknown"}},async assessConnectionQuality(){return navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}:"unknown"},getPromptsRemaining(t){return 3+this.getCompletedTaskCount()-t},calculateImprovementTrend(t){if(t.length<3)return"insufficient_data";const n=t.slice(-5).map(i=>i.accuracy),r=this.calculateTrend(n);return r>5?"rapid_improvement":r>2?"steady_improvement":r>0?"slight_improvement":r>-2?"stable":r>-5?"slight_decline":"rapid_decline"},getSemesterTime(){const t=parseInt(localStorage.getItem("semesterStartTime")||Date.now()),e=Date.now()-t,n=Math.floor(e/6e4),r=Math.floor(e%6e4/1e3);return{elapsed:e,readable:`${n}:${r.toString().padStart(2,"0")}`,minutes:n,seconds:r}},calculateDifference(t,e,n){return n==="slider"?{type:"numerical",difference:Math.abs(t-e),percentDiff:Math.abs(t-e)/10*100}:n==="counting"?{type:"numerical",difference:Math.abs(t-e),percentDiff:t>0?Math.abs(t-e)/t*100:100}:n==="typing"?{type:"textual",levenshteinDistance:this.calculateLevenshteinDistance(t,e),charDifference:Math.abs(t.length-e.length),exactMatch:t===e}:null},calculateLevenshteinDistance(t,e){const n=t.length,r=e.length,i=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let s=0;s<=n;s++)i[s][0]=s;for(let s=0;s<=r;s++)i[0][s]=s;for(let s=1;s<=n;s++)for(let o=1;o<=r;o++)t[s-1]===e[o-1]?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o]+1,i[s][o-1]+1,i[s-1][o-1]+1);return i[n][r]},trackClick(t,e){var r;const n={tagName:t.tagName,className:t.className,id:t.id,text:(r=t.textContent)==null?void 0:r.substring(0,50),dataAttributes:this.extractDataAttributes(t)};return this.logEvent("user_click",{element:n,context:e,coordinates:{pageX:event.pageX,pageY:event.pageY,clientX:event.clientX,clientY:event.clientY}})},extractDataAttributes(t){const e={};for(let n of t.attributes)n.name.startsWith("data-")&&(e[n.name]=n.value);return e}},Yn={seedRandom:null,currentSeed:null,initializeSeed(t){this.currentSeed=t;let e=t;this.seedRandom=function(){return e=(e*9301+49297)%233280,e/233280}},getRandom(){return this.seedRandom?this.seedRandom():Math.random()},generateCountingPattern(t){const e=t<=10?"easy":t<=25?"medium":"hard";let n;e==="easy"?n=(t-1)%5+1:e==="medium"?n=(t-11)%5+6:n=(t-26)%5+11;const i={easy:{1:{target:"the",type:"word"},2:{target:"and",type:"word"},3:{target:"of",type:"word"},4:{target:"a",type:"word"},5:{target:"in",type:"word"}},medium:{6:{target:"e",type:"letter"},7:{target:"a",type:"letter"},8:{target:"i",type:"letter"},9:{target:"o",type:"letter"},10:{target:"s",type:"letter"}},hard:{11:{targets:["a","e"],type:"multi-letter"},12:{targets:["i","o"],type:"multi-letter"},13:{targets:["s","t"],type:"multi-letter"},14:{targets:["n","r"],type:"multi-letter"},15:{targets:["l","d"],type:"multi-letter"}}}[e][n];let s="";return i.type==="word"?s=`Count how many times the word "${i.target}" appears:`:i.type==="letter"?s=`Count how many times the letter "${i.target}" appears (case-insensitive):`:s=`Count how many times the letters "${i.targets[0]}" and "${i.targets[1]}" appear in total:`,{...i,instruction:s,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1)}},generateSliderPattern(t){const e=t<=10?"easy":t<=25?"medium":"hard";let n,r,i;return e==="easy"?(n=Math.floor(this.getRandom()*11),r=1,i=!0):e==="medium"?(n=Math.round(this.getRandom()*10*10)/10,r=.1,i=!0):(n=Math.round(this.getRandom()*10*100)/100,r=.01,i=(t-26)%5!==0),{target:n,step:r,showValue:i,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1),precision:e==="easy"?0:e==="medium"?1:2}},generateTypingPattern(t){const e=t<=10?"easy":t<=25?"medium":"hard",n={easy:["hello world","quick test","type this","easy mode","simple text","good job","keep going","nice work","almost done","level up"],medium:["HeLLo WoRLd","QuIcK tEsT","TyPe ThIs","MeDiUm MoDe","MiXeD cAsE","KeEp GoInG","NiCe WoRk","AlMoSt DoNe","LeVeL uP","ChAlLeNgE","TeSt RuN","NeXt LeVeL","TrY aGaIn","GoOd LuCk","FiNaL tEsT"],hard:["Test@123","Go4It!Now","X9%Y8&Z7*","P6!Q5?R4+","Z1@Y2#X3$","M7&N8*O9!","J4%K5^L6&","D1!E2@F3#","A7$B8%C9^","V3*W4+X5=","Q2#R3$S4%","H5^I6&J7*","K8(L9)M0!","N1@O2#P3$","T4%U5^V6&","W7*X8(Y9)","C0!D1@E2#","F3$G4%H5^","I6&J7*K8(","L9)M0!N1@","O2#P3$Q4%","R5^S6&T7*","U8(V9)W0!","X1@Y2#Z3$","A4%B5^C6&"]};let r;if(e==="easy"){const i=(t-1)%n.easy.length;r=n.easy[i]}else if(e==="medium"){const i=(t-11)%n.medium.length;r=n.medium[i]}else{const i=(t-26)%n.hard.length;r=n.hard[i]}return{pattern:r,difficulty:e,difficultyLabel:e.charAt(0).toUpperCase()+e.slice(1)}},textPassages:["The University of California, Berkeley (UC Berkeley, Berkeley, Cal, or California) is a public land-grant research university in Berkeley, California, United States. Founded in 1868 and named after the Anglo-Irish philosopher George Berkeley, it is the state's first land-grant university and is the founding campus of the University of California system.","Berkeley has an enrollment of more than 45,000 students. The university is organized around fifteen schools of study on the same campus, including the College of Chemistry, the College of Engineering, College of Letters and Science, and the Haas School of Business.",'The Berkeley campus encompasses approximately 1,232 acres, though the "central campus" occupies only the low-lying western 178 acres. The campus contains numerous wooded areas, including the Eucalyptus Grove and Strawberry Creek, which runs through the center of campus.',"Oski the Bear (Oski) is the official mascot of the University of California, Berkeley, representing the California Golden Bears. Named after the Oski Yell, he made his debut at a freshman rally in the Greek Theatre on September 25, 1941.","Berkeley faculty, alumni, and researchers have won 111 Nobel laureates, 25 Turing Award winners, and 19 Academy Award winners. The university has produced many notable alumni in various fields including science, politics, business, and entertainment.","The university's athletic teams compete as the California Golden Bears and are members of the Atlantic Coast Conference for most sports. Berkeley teams have won 107 national championships, including 45 NCAA national championships.","Research at Berkeley is conducted within departments, organized research units, and interdisciplinary research centers. Berkeley operates Lawrence Berkeley National Laboratory, manages Los Alamos National Laboratory, and is a founding partner of the Space Sciences Laboratory.","The Berkeley campus offers over 350 degree programs through its 14 colleges and schools. Popular majors include Computer Science, Economics, Political Science, and Business Administration. The student-faculty ratio is 17:1.","Berkeley's libraries contain more than 13 million volumes and maintain special collections including the Mark Twain Papers, the Oral History Center, and the Bancroft Library, which houses the largest collection of materials on California history.","The campus is home to several museums including the Berkeley Art Museum and Pacific Film Archive, the Lawrence Hall of Science, and the UC Botanical Garden. These facilities serve both educational and public outreach purposes.","Notable Berkeley inventions and discoveries include the cyclotron, the atomic bomb, the flu vaccine, and vitamin E. Berkeley researchers discovered 16 chemical elements of the periodic table, more than any other university.","The Free Speech Movement, which took place during the 1964-65 academic year, was a pivotal moment in the history of civil liberties in the United States. It began when students protested a ban on political activities on campus.","Berkeley's Campanile, known as Sather Tower, is the third-tallest clock tower in the world at 307 feet. It was completed in 1914 and is visible for miles, serving as a symbol of the university.","The university operates on a semester system, with fall semester beginning in late August and spring semester beginning in mid-January. Berkeley offers over 5,000 courses each semester across all disciplines.",`Cal Bears have won at least one team national title in 13 different sports. The university's traditional rival is Stanford University, with the annual football game known as "The Big Game" dating back to 1892.`],getTextPassage(t){if(this.seedRandom){const e=Math.floor(this.getRandom()*this.textPassages.length),n=(t-1+e)%this.textPassages.length;return this.textPassages[n]}else{const e=(t-1)%this.textPassages.length;return this.textPassages[e]}}};function cd({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[i,s]=L.useState(""),[o,l]=L.useState(""),[u,h]=L.useState(null),[p,g]=L.useState(""),[v,k]=L.useState(null),[R,D]=L.useState(""),[O,T]=L.useState(""),[I]=L.useState(Date.now()),[A,b]=L.useState(""),[V,j]=L.useState(!1),[E,_]=L.useState(new Set),m=L.useRef(0);L.useRef(null);const w=(X,re=null,$=null)=>{const M=document.createElement("canvas"),F=M.getContext("2d");M.width=900,M.height=400,F.fillStyle="#fafafa",F.fillRect(0,0,M.width,M.height),F.strokeStyle="#e0e0e0",F.lineWidth=2,F.strokeRect(0,0,M.width,M.height),F.font="24px monospace",F.fillStyle="#333";const W=36,Z=25,ee=M.width-Z*2;return((ge,de)=>{const ce=ge.split(" "),Le=[];let we="";for(let ne of ce){const ke=we+(we?" ":"")+ne;F.measureText(ke).width>de&&we?(Le.push(we),we=ne):we=ke}return we&&Le.push(we),Le})(X,ee).forEach((ge,de)=>{const ce=Z+(de+1)*W;let Le=Z;if(t<=5){const we=ge.split(" ");let ne=0;we.forEach(ke=>{const Ge=$&&$.has(ne),Re=re&&re.some(_t=>ke.toLowerCase()===_t.toLowerCase());if(Ge){const _t=F.measureText(ke).width;F.fillStyle="yellow",F.fillRect(Le-2,ce-18,_t+4,24)}else if(Re){const _t=F.measureText(ke).width;F.fillStyle="rgba(255, 215, 0, 0.4)",F.fillRect(Le-2,ce-18,_t+4,24)}F.fillStyle="#333",F.fillText(ke,Le,ce),Le+=F.measureText(ke+" ").width,ne++})}else for(let we=0;we<ge.length;we++){const ne=ge[we],ke=F.measureText(ne).width;re&&re.some(Re=>ne.toLowerCase()===Re.toLowerCase())&&(F.fillStyle="rgba(255, 215, 0, 0.4)",F.fillRect(Le-1,ce-18,ke+2,24)),F.fillStyle="#333",F.fillText(ne,Le,ce),Le+=ke}}),M.toDataURL()};L.useEffect(()=>{g(0),k(null),m.current=0},[t]),L.useEffect(()=>{const X=async($,M)=>{const F=document.createElement("canvas"),W=F.getContext("2d");F.width=900,F.height=350,W.fillStyle="#fafafa",W.fillRect(0,0,F.width,F.height),W.strokeStyle="#e0e0e0",W.lineWidth=2,W.strokeRect(0,0,F.width,F.height),W.font="24px monospace";const Z=36,ee=20,se=F.width-ee*2,ge=((de,ce)=>{const Le=de.split(" "),we=[];let ne="";for(let ke of Le){const Ge=ne+(ne?" ":"")+ke;W.measureText(Ge).width>ce&&ne?(we.push(ne),ne=ke):ne=Ge}return ne&&we.push(ne),we})(R,se);for(let de=0;de<$.length;de++)$[de],ge.forEach((ce,Le)=>{const we=ee+(Le+1)*Z;let ne=ee;for(let ke=0;ke<ce.length;ke++){const Ge=ce[ke],Re=W.measureText(Ge).width;$.some(Ut=>Ge.toLowerCase()===Ut.toLowerCase())&&(W.fillStyle="rgba(255, 255, 0, 0.6)",W.fillRect(ne-1,we-20,Re+2,26)),W.fillStyle="#333",W.fillText(Ge,ne,we),ne+=Re}}),b(F.toDataURL()),await new Promise(ce=>setTimeout(ce,300));setTimeout(()=>{g(M.toString())},300)},re=async $=>{const{action:M,highlightWords:F,suggestedCount:W,animate:Z,isMultiLetter:ee,targetLetters:se}=$.detail||{};if(M==="highlightAndCount"){if(ee&&Array.isArray(se)){Z&&await X(se,W);return}if(Array.isArray(F)&&Z){R.split(" ");let Ae=[];for(let ge=0;ge<F.length;ge++){Ae.push(F[ge]);const de=document.createElement("canvas"),ce=de.getContext("2d");de.width=900,de.height=350,ce.fillStyle="#fafafa",ce.fillRect(0,0,de.width,de.height),ce.strokeStyle="#e0e0e0",ce.lineWidth=2,ce.strokeRect(0,0,de.width,de.height),ce.font="24px monospace";const Le=36,we=20,ne=de.width-we*2;((Re,_t)=>{const Ut=Re.split(" "),$t=[];let Wt="";for(let Ht of Ut){const qt=Wt+(Wt?" ":"")+Ht;ce.measureText(qt).width>_t&&Wt?($t.push(Wt),Wt=Ht):Wt=qt}return Wt&&$t.push(Wt),$t})(R,ne).forEach((Re,_t)=>{const Ut=we+(_t+1)*Le;let $t=we;Re.split(" ").forEach(Ht=>{const qt=ce.measureText(Ht).width;Ae.some(kn=>{const ar=Ht.replace(/[.,;!?]/g,"").toLowerCase(),$e=kn.replace(/[.,;!?]/g,"").toLowerCase();return ar===$e})&&(ce.fillStyle="rgba(255, 255, 0, 0.5)",ce.fillRect($t-2,Ut-18,qt+4,24)),ce.fillStyle="#333",ce.fillText(Ht,$t,Ut),$t+=ce.measureText(Ht+" ").width})}),b(de.toDataURL()),await new Promise(Re=>setTimeout(Re,200))}setTimeout(()=>{g(W.toString())},300)}}};return window.addEventListener("aiCountingHelp",re),()=>window.removeEventListener("aiCountingHelp",re)},[R,t]),L.useEffect(()=>{var F;const X=Yn.generateCountingPattern(t),re=Yn.getTextPassage(t);D(re),s(X.target||((F=X.targets)==null?void 0:F.join(", "))),l(X.instruction);let $=0;if(X.type==="word"){const W=new RegExp(`\\b${X.target}\\b`,"gi"),Z=re.match(W);$=Z?Z.length:0}else if(X.type==="letter"){const W=new RegExp(X.target,"gi"),Z=re.match(W);$=Z?Z.length:0}else X.type==="multi-letter"&&X.targets.forEach(W=>{const Z=new RegExp(W,"gi"),ee=re.match(Z);$+=ee?ee.length:0});h($);const M=w(re,null);b(M)},[t]);const S=async()=>{const X=Date.now()-I,re=parseInt(p,10)||0,$=u??0,M=Math.abs(re-$),F=`g1t${t}`,W=localStorage.getItem(`lastAIHelp_${F}`);if(W){const se=JSON.parse(W),Ae=Date.now()-se.timestamp,ge=re===se.suggestion?"accepted":"modified";await Pe.trackAIHelpResponse(F,se.type,se.suggestion,ge,re,Ae),localStorage.removeItem(`lastAIHelp_${F}`)}let Z=0;M===0?Z=2:M<=1?Z=1:Z=0,m.current+=1,await Pe.trackTaskAttempt(F,m.current,!0,X,re,$);const ee=localStorage.getItem("sessionId");if(ee&&!ee.startsWith("offline-"))try{await Hn(un(pt,"sessions",ee),{[`taskAccuracies.g1t${t}`]:Z===2?100:Z===1?70:0,[`taskTimes.g1t${t}`]:X,[`taskPoints.g1t${t}`]:Z,lastActivity:Zt()})}catch(se){console.error("Error storing accuracy:",se)}k(Z===2?"✓ Perfect! 2 points earned!":Z===1?`✓ Off by ${M} - 1 point earned!`:`✓ Off by ${M} - 0 points earned.`),setTimeout(()=>{e==null||e(`g1t${t}`,{attempts:m.current,totalTime:X,accuracy:Z===2?100:Z===1?70:0,userAnswer:re,correctAnswer:$,points:Z})},800)},x=Yn.generateCountingPattern(t).difficultyLabel,Q=t<=5?"easy":t<=10?"medium":"hard";return d.jsxs("div",{className:"task counting",children:[d.jsxs("h3",{children:["Research Content - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${Q}`,children:x}),d.jsxs("p",{className:"instruction",children:[d.jsx("strong",{children:o}),d.jsx("br",{}),d.jsx("span",{className:"hint",children:"(Case-insensitive)"})]}),d.jsxs("div",{className:"text-display text-to-count","data-counting-text":R,children:[d.jsx("div",{className:"count-target","data-pattern":i,style:{display:"none"},children:i}),A?d.jsx("img",{src:A,alt:"Text passage for counting",style:{width:"100%",maxWidth:"900px",height:"auto",maxHeight:"350px",objectFit:"contain",border:"none",userSelect:"none",pointerEvents:"none"},onContextMenu:X=>X.preventDefault(),draggable:!1}):d.jsx("div",{dangerouslySetInnerHTML:{__html:O}})]}),d.jsxs("div",{className:"input-section",children:[d.jsx("label",{children:"Your answer:"}),d.jsx("input",{type:"number",min:"0",max:"999",value:p,onChange:X=>g(X.target.value),placeholder:"Enter count"})]}),d.jsx("button",{onClick:S,className:"submit-btn",style:{display:"block",margin:"20px auto 0"},children:"Submit"}),v&&d.jsx("div",{className:`feedback ${v.includes("2 points")?"correct":v.includes("0 points")?"incorrect":"partial"}`,children:v})]})}function dd({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[i,s]=L.useState(5),[o,l]=L.useState(0),[u,h]=L.useState(null),[p]=L.useState(Date.now()),[g,v]=L.useState(1),[k,R]=L.useState(!0),[D,O]=L.useState(!1),[T,I]=L.useState(!1),[A,b]=L.useState(!1),[V,j]=L.useState(!1),E=L.useRef(null),_=L.useRef(0);L.useEffect(()=>{const $=Yn.generateSliderPattern(t);s($.target),v($.step),R($.showValue),l(0),h(null),_.current=0},[t]),L.useEffect(()=>{const $=M=>{const{action:F,value:W,animate:Z}=M.detail;if(F==="moveSlider")if(I(!0),Z){const ee=parseFloat(o),se=parseFloat(W),Ae=1e3,ge=30;let de=0;const ce=setInterval(()=>{de++;const Le=de/ge,we=1-Math.pow(1-Le,3),ne=ee+(se-ee)*we;l(parseFloat(ne.toFixed(2))),de>=ge&&(clearInterval(ce),I(!1),l(parseFloat(se.toFixed(2))))},Ae/ge)}else l(parseFloat(W.toFixed(2))),I(!1)};return window.addEventListener("aiSliderHelp",$),()=>window.removeEventListener("aiSliderHelp",$)},[o]);const m=$=>{if(T)return;const M=E.current;if(!M)return;$.preventDefault();const F=M.getBoundingClientRect(),W=o/10,Z=F.left+F.width*W,ee=$.clientX||$.touches&&$.touches[0].clientX;Math.abs(ee-Z)<30&&(b(!0),j(!0))},w=$=>{if(!A||T)return;const M=E.current;if(!M)return;const F=M.getBoundingClientRect(),W=$.clientX||$.touches&&$.touches[0].clientX,ee=Math.max(0,Math.min(1,(W-F.left)/F.width))*10,se=Math.round(ee/g)*g;l(parseFloat(se.toFixed(2)))},S=()=>{b(!1)};L.useEffect(()=>{if(A){const $=F=>w(F),M=()=>S();return document.addEventListener("mousemove",$),document.addEventListener("mouseup",M),document.addEventListener("touchmove",$),document.addEventListener("touchend",M),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",M),document.removeEventListener("touchmove",$),document.removeEventListener("touchend",M)}}},[A,g,T]);const C=async()=>{const $=Date.now()-p,M=parseFloat(o),F=Math.abs(M-i),W=`g2t${t}`,Z=localStorage.getItem(`lastAIHelp_${W}`);if(Z){const Ae=JSON.parse(Z),ge=Date.now()-Ae.timestamp,de=M===Ae.suggestion?"accepted":"modified";await Pe.trackAIHelpResponse(W,Ae.type,Ae.suggestion,de,M,ge),localStorage.removeItem(`lastAIHelp_${W}`)}let ee=0;F===0?ee=2:F<=1?ee=1:ee=0,_.current+=1,await Pe.trackTaskAttempt(W,_.current,!0,$,M,i);const se=localStorage.getItem("sessionId");if(se&&!se.startsWith("offline-"))try{await Hn(un(pt,"sessions",se),{[`taskDifferences.g2t${t}`]:F,[`taskTimes.g2t${t}`]:$,[`taskPoints.g2t${t}`]:ee,lastActivity:Zt()})}catch(Ae){console.error("Error storing difference:",Ae)}h(ee===2?"✓ Perfect! 2 points earned!":ee===1?`✓ Off by ${F.toFixed(2)} - 1 point earned!`:`✓ Off by ${F.toFixed(2)} - 0 points earned.`),setTimeout(()=>{e(`g2t${t}`,{attempts:_.current,totalTime:$,accuracy:ee===2?100:ee===1?70:0,userAnswer:M,correctAnswer:i,points:ee})},800)},x=Yn.generateSliderPattern(t),Q=x.difficultyLabel,X=x.difficulty,re=()=>{const $=[];for(let M=0;M<=10;M++)$.push(d.jsxs("div",{style:{position:"absolute",left:`${M*10}%`,transform:"translateX(-50%)",textAlign:"center"},children:[d.jsx("div",{style:{width:"2px",height:"12px",background:"#666",margin:"0 auto"}}),d.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"2px"},children:M})]},M));return $};return d.jsxs("div",{className:`task slider ${T?"ai-controlled":""}`,children:[d.jsxs("h3",{children:["Material Creation - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${X}`,children:Q}),d.jsxs("p",{className:"instruction",children:["Move the slider to:"," ",d.jsx("strong",{className:"target-value","data-target-value":i,children:i}),d.jsx("br",{}),d.jsx("span",{style:{fontSize:"14px",color:"#666",fontStyle:"italic"},children:!V&&"Hold and drag the slider handle to move it"})]}),d.jsxs("div",{className:"slider-container",children:[d.jsxs("div",{className:"range-labels",children:[d.jsx("span",{children:"0"}),d.jsx("span",{children:"10"})]}),d.jsxs("div",{style:{position:"relative",padding:"20px 0 30px 0"},children:[d.jsx("div",{style:{position:"absolute",width:"100%",height:"20px",top:"0"},children:re()}),d.jsx("div",{style:{position:"relative",marginTop:"20px"},children:d.jsx("input",{ref:E,type:"range",min:"0",max:"10",step:g,value:o,onChange:$=>{!A&&!T&&(l(parseFloat($.target.value)),j(!0))},className:"slider-input",style:{width:"100%",cursor:A?"grabbing":"grab"},onMouseDown:m,onTouchStart:m})})]}),d.jsx("div",{className:"current-value",children:k?parseFloat(o).toFixed(x.precision):"??"})]}),d.jsx("button",{onClick:C,className:"submit-btn",disabled:T,style:{display:"block",margin:"20px auto 0"},children:"Submit"}),u&&d.jsx("div",{className:`feedback ${u.includes("2 points")?"correct":u.includes("0 points")?"incorrect":"partial"}`,children:u})]})}function hd({taskNum:t,onComplete:e,isPractice:n=!1,currentTaskId:r}){const[i,s]=L.useState(""),[o,l]=L.useState(""),[u,h]=L.useState(null),[p]=L.useState(Date.now()),[g,v]=L.useState(""),[k,R]=L.useState(!1),D=L.useRef(0),O=V=>{const j=document.createElement("canvas"),E=j.getContext("2d");return j.width=600,j.height=150,E.fillStyle="#f5f5f5",E.fillRect(0,0,j.width,j.height),E.font='bold 40px "Courier New", monospace',E.fillStyle="#333",E.textAlign="center",E.textBaseline="middle",E.fillText(V,j.width/2,j.height/2),j.toDataURL()};L.useEffect(()=>{const j=Yn.generateTypingPattern(t).pattern;s(j);const E=O(j);v(E)},[t]),L.useEffect(()=>{l(""),h(null),D.current=0},[t]),L.useEffect(()=>{const V=j=>{const{action:E,text:_,typeSpeed:m}=j.detail;if(E==="autoType"&&_){R(!0),l("");let w="",S=0;const C=setInterval(()=>{S<_.length?(w+=_[S],l(w),S++):(clearInterval(C),R(!1))},m||50);return()=>clearInterval(C)}};return window.addEventListener("aiTypingHelp",V),()=>window.removeEventListener("aiTypingHelp",V)},[]);const T=async()=>{const V=Date.now()-p,j=`g3t${t}`,E=localStorage.getItem(`lastAIHelp_${j}`);if(E){const C=JSON.parse(E),x=Date.now()-C.timestamp,Q=o===C.suggestion?"accepted":"modified";await Pe.trackAIHelpResponse(j,C.type,C.suggestion,Q,o,x),localStorage.removeItem(`lastAIHelp_${j}`)}const m=((C,x)=>{const Q=C.length,X=x.length,re=Array(Q+1).fill(null).map(()=>Array(X+1).fill(0));for(let $=0;$<=Q;$++)re[$][0]=$;for(let $=0;$<=X;$++)re[0][$]=$;for(let $=1;$<=Q;$++)for(let M=1;M<=X;M++)C[$-1]===x[M-1]?re[$][M]=re[$-1][M-1]:re[$][M]=Math.min(re[$-1][M]+1,re[$][M-1]+1,re[$-1][M-1]+1);return re[Q][X]})(o,i);let w=0;m===0?w=2:m===1?w=1:w=0,D.current+=1,await Pe.trackTaskAttempt(j,D.current,!0,V,o,i);const S=localStorage.getItem("sessionId");if(S&&!S.startsWith("offline-"))try{await Hn(un(pt,"sessions",S),{[`taskAccuracies.g3t${t}`]:w===2?100:w===1?70:0,[`taskTimes.g3t${t}`]:V,[`taskPoints.g3t${t}`]:w,lastActivity:Zt()})}catch(C){console.error("Error storing accuracy:",C)}h(w===2?"✓ Perfect! 2 points earned!":w===1?"✓ 1 typo - 1 point earned!":`✓ ${m} errors - 0 points earned.`),setTimeout(()=>{e(`g3t${t}`,{attempts:D.current,totalTime:V,accuracy:w===2?100:w===1?70:0,userAnswer:o,correctAnswer:i,points:w})},800)},I=Yn.generateTypingPattern(t),A=I.difficultyLabel,b=I.difficulty;return d.jsxs("div",{className:"task typing",style:{maxWidth:"100%"},children:[d.jsxs("h3",{children:["Student Engagement - Level ",t]}),d.jsx("div",{className:`difficulty-badge ${b}`,children:A}),d.jsx("p",{className:"instruction",children:"Type this pattern exactly:"}),d.jsxs("div",{className:"pattern-display",children:[d.jsx("div",{className:"typing-pattern","data-typing-pattern":i,style:{display:"none"},children:i}),g?d.jsx("img",{src:g,alt:"Pattern to type",style:{width:"100%",maxWidth:"600px",height:"auto",userSelect:"none",pointerEvents:"none"},onContextMenu:V=>V.preventDefault(),draggable:!1}):d.jsx("span",{className:"pattern-text",children:i})]}),d.jsx("div",{className:"input-section",style:{width:"90%",maxWidth:"900px",margin:"20px auto 0"},children:d.jsx("input",{type:"text",inputMode:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,value:o,onChange:V=>!k&&l(V.target.value),placeholder:"Type here...",className:"typing-input",disabled:k,style:{backgroundColor:k?"#e3f2fd":"white",transition:"background-color 0.3s",width:"100%",maxWidth:"100%",fontFamily:'"Courier New", monospace',fontSize:"28px",padding:"12px 14px",border:"2px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box"}})}),d.jsx("button",{onClick:T,className:"submit-btn",disabled:k,style:{display:"block",margin:"20px auto 0"},children:"Submit"}),u&&d.jsx("div",{className:`feedback ${u.includes("2 points")?"correct":u.includes("0 points")?"incorrect":"partial"}`,children:u})]})}function cI({current:t,completed:e,onSwitch:n,limitMode:r,taskPoints:i={},categoryMultipliers:s={},starGoals:o={},categoryPoints:l={},timeRemaining:u=null}){const h=()=>{const T=l.materials||0,I=1+(l.research||0)*.15,A=parseFloat(localStorage.getItem("engagementInterest")||"0")||0;return T*I+A};parseFloat(localStorage.getItem("engagementInterest")||"0"),1+(l.research||0)*.15;const p=[];for(let T=1;T<=3;T++)for(let I=1;I<=50;I++){const A=["Research","Materials","Engage"][T-1];p.push({id:`g${T}t${I}`,label:`${A} ${I}`,game:T})}const g=T=>{const I=T.id[1],A=parseInt(T.id.substring(3));if(A===1)return!0;const b=`g${I}t${A-1}`;return e[b]===!0},v={2:p.filter(T=>T.game===2),1:p.filter(T=>T.game===1),3:p.filter(T=>T.game===3)},k={1:"#9C27B0",2:"#4CAF50",3:"#f44336"},R={1:"📚",2:"🎯",3:"✉️"},D={1:"Research",2:"Materials",3:"Engagement"},O={1:"research",2:"materials",3:"engagement"};return d.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"25px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"20px"},children:[d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"25px"},children:[2,1,3].map(T=>{const I=v[T],A=I.filter(m=>e[m.id]).length,b=O[T],V=A+1,j=T==="1"?(l.research||0)*.15:0,E=T==="3"?(l.engagement||0)*.0015:0,_=j>0||E>0;return d.jsxs("div",{style:{background:`linear-gradient(135deg, ${k[T]}10 0%, ${k[T]}05 100%)`,borderRadius:"12px",border:`2px solid ${k[T]}20`,padding:"20px",position:"relative",overflow:"hidden",boxShadow:_?`0 0 20px ${k[T]}20`:"none",transition:"all 0.3s ease"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"15px"},children:[d.jsx("span",{style:{fontSize:"28px"},children:R[T]}),d.jsxs("div",{style:{flex:1},children:[d.jsx("h3",{style:{margin:0,color:k[T],fontSize:"18px",fontWeight:"bold"},children:D[T]}),d.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"2px"},children:["Level ",Math.min(V,15)]})]}),l&&l[b]>0&&d.jsxs("div",{style:{background:k[T],color:"white",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"bold"},children:[l[b]," pts"]})]}),T==="1"&&(l.research||0)>0&&d.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"#fff3cd",color:"#856404",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",border:"1px solid #ffc107"},children:["+",(l.research*15).toFixed(0),"%"]}),T==="3"&&(l.engagement||0)>0&&d.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"#fff3cd",color:"#856404",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",border:"1px solid #ffc107"},children:["+",((l.engagement||0)*.15).toFixed(1),"% interest/task"]}),d.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:I.filter(m=>parseInt(m.id.substring(3))<=V).map(m=>{const w=g(m),S=e[m.id],C=t===m.id,x=parseInt(m.id.substring(3)),Q=i[m.id]||0;return d.jsxs("button",{disabled:!w||S,onClick:()=>w&&!S&&n(m.id),style:{position:"relative",width:"40px",height:"40px",padding:"0",fontSize:"14px",fontWeight:C?"bold":"500",border:`2px solid ${C?k[T]:S?`${k[T]}40`:"#e0e0e0"}`,borderRadius:"8px",background:C?k[T]:S?`${k[T]}10`:"white",color:C?"white":S?k[T]:"#333",cursor:w&&!S?"pointer":"not-allowed",transition:"all 0.2s ease",opacity:S?.7:1,boxShadow:C?`0 2px 8px ${k[T]}40`:"none"},onMouseEnter:X=>{w&&!C&&!S&&(X.currentTarget.style.transform="translateY(-2px)",X.currentTarget.style.boxShadow=`0 4px 12px ${k[T]}30`)},onMouseLeave:X=>{w&&!C&&!S&&(X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="none")},title:S?`Level ${x} completed (${Q} pts)`:w?`Start Level ${x}`:`Complete Level ${x-1} first`,children:[x,S&&d.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:k[T],color:"white",width:"16px",height:"16px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:"✓"}),S&&Q>0&&d.jsx("div",{style:{position:"absolute",bottom:"2px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"2px"},children:[...Array(Q)].map((X,re)=>d.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:k[T]}},re))})]},m.id)})})]},T)})}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",background:"#f8f9fa",borderRadius:"8px",flexWrap:"wrap",gap:"20px"},children:[u!==null&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"⏱️"}),d.jsxs("div",{children:[d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:u<60?"#f44336":"#333"},children:[Math.floor(u/60),":",(u%60).toString().padStart(2,"0")]}),u<180&&u>0&&d.jsx("div",{style:{fontSize:"11px",color:"#ff9800"},children:"Hurry up!"})]})]}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"2px"},children:"Tasks Completed"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:Object.keys(e).length})]}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"2px"},children:"Student Learning"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2196F3"},children:Math.round(h())}),d.jsxs("div",{style:{fontSize:"10px",color:"#999"},children:["Multiplier = ",countingMultiplier.toFixed(2),", Interest ="," ",typingInterest.toFixed(2)]})]}),t&&d.jsxs("div",{style:{padding:"8px 16px",background:t.startsWith("g1")?"#9C27B0":t.startsWith("g2")?"#4CAF50":"#f44336",color:"white",borderRadius:"20px",fontSize:"14px",fontWeight:"bold"},children:["Current:"," ",t.replace("g1t","Research ").replace("g2t","Materials ").replace("g3t","Engage ")]})]})]})}function dI({practiceCompleted:t={},onPracticeComplete:e,onStartMainGame:n,onSelectPractice:r,isAdmin:i=!1}){const[s,o]=L.useState(null),l=(v,k)=>{if(k&&k.points===2){typeof e=="function"&&e(v,k);const R=document.createElement("div");R.className="notification-enter",R.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #4CAF50; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",R.textContent="Perfect! Practice task completed. Returning to menu...",document.body.appendChild(R),setTimeout(()=>{o(null),document.body.contains(R)&&document.body.removeChild(R)},1500)}else{const R=(k==null?void 0:k.points)||0,D=document.createElement("div");D.className="notification-enter",D.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #ff9800; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",D.textContent=`Practice requires 100% accuracy. You scored ${R===1?"50%":"0%"}. Try again!`,document.body.appendChild(D),setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},3e3)}},u=t.g2t1&&t.g1t1&&t.g3t1,h=()=>d.jsxs("div",{className:"practice-menu",children:[d.jsxs("h2",{children:["Practice Mode ",!i&&"(Required)"]}),!i&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffebee 100%)",borderRadius:"12px",padding:"16px",marginBottom:"25px",border:"2px solid #f57c00",boxShadow:"0 4px 6px rgba(245, 124, 0, 0.1)",textAlign:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:"⚠️"}),d.jsx("strong",{style:{color:"#e65100",fontSize:"18px"},children:"100% PERFECT ACCURACY REQUIRED"})]}),d.jsxs("div",{style:{color:"#e65100",fontSize:"14px"},children:["You must score 2/2 points (exact answer) on all three practice tasks to proceed.",d.jsx("br",{}),d.jsx("strong",{children:"No partial credit in practice mode!"})]}),d.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"12px"},children:[d.jsxs("span",{style:{padding:"4px 12px",background:t.g2t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g2t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g2t1?"#4CAF50":"#ffb74d"}`},children:["Materials ",t.g2t1?"✓":"Required"]}),d.jsxs("span",{style:{padding:"4px 12px",background:t.g1t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g1t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g1t1?"#4CAF50":"#ffb74d"}`},children:["Research ",t.g1t1?"✓":"Required"]}),d.jsxs("span",{style:{padding:"4px 12px",background:t.g3t1?"#e8f5e9":"white",borderRadius:"20px",fontSize:"13px",color:t.g3t1?"#4CAF50":"#f57c00",fontWeight:"600",border:`1px solid ${t.g3t1?"#4CAF50":"#ffb74d"}`},children:["Engagement ",t.g3t1?"✓":"Required"]})]})]}),d.jsx("p",{className:"practice-hint",style:{textAlign:"center",fontSize:"16px",color:"#666",marginBottom:"30px"},children:"Try each task type before starting the main challenge. No time pressure!"}),d.jsxs("div",{className:"practice-cards",children:[d.jsxs("div",{className:"practice-card materials",children:[d.jsx("h3",{children:"🎯 Materials"}),d.jsx("p",{children:"Hold and drag slider to match target values"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Base points - directly added to score"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{o("g2t1"),r&&r("g2t1")},className:t.g2t1?"completed":"",disabled:!1,children:t.g2t1?"✓ Completed":"Try Materials"})})]}),d.jsxs("div",{className:"practice-card research",children:[d.jsx("h3",{children:"📚 Research"}),d.jsx("p",{children:"Count words or letters in text passages"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Worth 15% multiplier per point in main game"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{o("g1t1"),r&&r("g1t1")},className:t.g1t1?"completed":"",disabled:!1,children:t.g1t1?"✓ Completed":"Try Research"})})]}),d.jsxs("div",{className:"practice-card engagement",children:[d.jsx("h3",{children:"✉️ Engagement"}),d.jsx("p",{children:"Type patterns exactly as shown"}),d.jsx("p",{style:{fontSize:"13px",color:"#666",marginTop:"10px"},children:"Worth 0.15% compound interest per point"}),d.jsx("div",{className:"practice-buttons",children:d.jsx("button",{onClick:()=>{o("g3t1"),r&&r("g3t1")},className:t.g3t1?"completed":"",disabled:!1,children:t.g3t1?"✓ Completed":"Try Engagement"})})]})]}),d.jsxs("div",{style:{marginTop:"25px",padding:"15px",background:"#f5f5f5",borderRadius:"8px",textAlign:"center"},children:[d.jsx("h4",{style:{margin:"0 0 10px 0",color:"#333",fontSize:"16px"},children:"Practice Progress:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[d.jsxs("div",{style:{padding:"8px 15px",background:t.g2t1?"#4CAF50":"#e0e0e0",color:t.g2t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Materials ",t.g2t1&&"✓"]}),d.jsxs("div",{style:{padding:"8px 15px",background:t.g1t1?"#9C27B0":"#e0e0e0",color:t.g1t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Research ",t.g1t1&&"✓"]}),d.jsxs("div",{style:{padding:"8px 15px",background:t.g3t1?"#f44336":"#e0e0e0",color:t.g3t1?"white":"#666",borderRadius:"20px",fontSize:"14px"},children:["Engagement ",t.g3t1&&"✓"]})]}),d.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#666"},children:[d.jsx("strong",{children:"100% accuracy required"})," to complete each practice task"]})]}),d.jsx("div",{style:{textAlign:"center",marginTop:"30px"},children:d.jsx("button",{className:"start-main-game-btn",onClick:n,style:{opacity:!i&&!u?.5:1,cursor:!i&&!u?"not-allowed":"pointer"},disabled:!i&&!u,children:i?"Start Main Game (Admin)":u?"Start Main Game - You're Ready! 🚀":"Complete Practice First"})})]});if(!s)return h();const p=s[1],g=1;return d.jsxs("div",{className:"practice-container",children:[d.jsx("button",{className:"back-to-menu",onClick:()=>o(null),children:"← Back to Practice Menu"}),d.jsxs("div",{style:{textAlign:"center",padding:"10px",background:"#fff3cd",borderRadius:"6px",margin:"10px 0",fontSize:"14px",color:"#856404"},children:[d.jsx("strong",{children:"Practice Mode:"})," 100% accuracy required. Will auto-return after completion."]}),d.jsxs("div",{className:"practice-task-wrapper",children:[p==="1"&&d.jsx(cd,{taskNum:g,onComplete:l,isPractice:!0,currentTaskId:s}),p==="2"&&d.jsx(dd,{taskNum:g,onComplete:l,isPractice:!0,currentTaskId:s}),p==="3"&&d.jsx(hd,{taskNum:g,onComplete:l,isPractice:!0,currentTaskId:s})]})]})}class hI{constructor(){this.totalAIUsage=0,this.usageCount={materials:0,research:0,engagement:0},this.taskUsageCount={}}getUniversalAttemptNumber(){return this.totalAIUsage}shouldAIBeCorrect(e){let n;return e===1||e===2||e===4||e===5?n=!0:e===3?n=!1:n=Math.random()<.75,n}getTaskUsageCount(e){return this.taskUsageCount[e]||(this.taskUsageCount[e]=0),this.taskUsageCount[e]}incrementTaskUsage(e,n){this.totalAIUsage++,this.usageCount[n]++,this.taskUsageCount[e]||(this.taskUsageCount[e]=0),this.taskUsageCount[e]++}helpWithSlider(e,n){this.incrementTaskUsage(n,"materials");const r=this.getUniversalAttemptNumber();let i;if(this.shouldAIBeCorrect(r))i=e;else if(r===3){const s=Math.random()<.5?-1:1;i=Math.max(0,Math.min(10,e+s))}else if(Math.random()<.5){const s=Math.random()<.5?-1:1;i=Math.max(0,Math.min(10,e+s))}else{const s=(Math.random()<.5?-1:1)*(2+Math.random()*2);i=Math.max(0,Math.min(10,e+s))}return{action:"moveSlider",value:i,animate:!0}}helpWithCounting(e,n,r){this.incrementTaskUsage(r,"research");const i=this.getUniversalAttemptNumber(),s=this.shouldAIBeCorrect(i);return n.length===1||n.includes(" and ")||n.includes(",")?this.helpWithLetterCounting(e,n,i,s):this.helpWithWordCounting(e,n,i,s)}helpWithLetterCounting(e,n,r,i){let s=[];n.includes(" and ")||n.includes(",")?s=n.match(/[a-z]/gi)||[]:s=[n];let o=0;s.forEach(h=>{const p=new RegExp(h,"gi"),g=e.match(p);o+=g?g.length:0});let l=o,u=[...s];if(!i){r===3||Math.random()<.5?l=o+1:l=o+Math.floor(Math.random()*3)+2,l=Math.max(0,l);const p="abcdefghijklmnopqrstuvwxyz".split("").filter(v=>!s.includes(v.toLowerCase())),g=Math.floor(Math.random()*2)+1;for(let v=0;v<g&&p.length>0;v++){const k=Math.floor(Math.random()*p.length);u.push(p[k]),p.splice(k,1)}}return{action:"highlightAndCount",highlightWords:[],suggestedCount:l,animate:!0,isMultiLetter:!0,targetLetters:u}}helpWithWordCounting(e,n,r,i){const s=e.split(/\s+/),o=[];let l=0,u=0;if(s.forEach(h=>{h.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&u++}),i)s.forEach(h=>{h.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&(o.push(h),l++)});else if(r===3){l=u+1,l=Math.max(0,l),s.forEach(p=>{p.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&o.push(p)});const h=s.filter(p=>p.replace(/[.,;!?]/g,"").toLowerCase()!==n.toLowerCase());if(h.length>0&&o.length<l){const p=h[Math.floor(Math.random()*h.length)];o.push(p)}}else{Math.random()<.5?l=u+1:l=u+Math.floor(Math.random()*3)+2,l=Math.max(0,l),s.forEach(p=>{p.replace(/[.,;!?]/g,"").toLowerCase()===n.toLowerCase()&&o.push(p)});const h=s.filter(p=>p.replace(/[.,;!?]/g,"").toLowerCase()!==n.toLowerCase());for(;o.length<l&&h.length>0;){const p=Math.floor(Math.random()*h.length),g=h[p];o.includes(g)||o.push(g),h.splice(p,1)}}return{action:"highlightAndCount",highlightWords:o,suggestedCount:l,animate:!0}}helpWithTyping(e,n){this.incrementTaskUsage(n,"engagement");const r=this.getUniversalAttemptNumber();let i=e;const s={0:["o","O"],o:["0"],O:["0"],1:["l","I","i"],l:["1","I","i"],I:["1","l","i"],i:["1","l","I"],e:["3"],3:["e"],a:["@"],"@":["a"],s:["5","$"],S:["5","$"],5:["s","S"],$:["s","S"],g:["9"],9:["g"],b:["6"],6:["b"],z:["2"],2:["z"],B:["8"],8:["B"]},o=l=>{const u=l.split(""),h=u.map((p,g)=>s[p]?g:-1).filter(p=>p!==-1);if(h.length>0){const p=h[Math.floor(Math.random()*h.length)],g=u[p],v=s[g];v&&v.length>0&&(u[p]=v[Math.floor(Math.random()*v.length)])}else{const p=["transpose","duplicate","missing"],g=p[Math.floor(Math.random()*p.length)],v=Math.floor(Math.random()*u.length);switch(g){case"transpose":v<u.length-1&&([u[v],u[v+1]]=[u[v+1],u[v]]);break;case"duplicate":u.splice(v,0,u[v]);break;case"missing":u.splice(v,1);break}}return u.join("")};if(this.shouldAIBeCorrect(r))i=e;else if(r===3)i=o(e);else if(Math.random()<.5)i=o(e);else{let l=e;const u=Math.floor(Math.random()*3)+2;for(let h=0;h<u;h++)l=o(l);i=l}return{action:"autoType",text:i,typeSpeed:50,perfect:this.shouldAIBeCorrect(r)}}}const on=new hI;function fI({bonusPrompts:t=0,currentTask:e="",categoryPoints:n=null,timeRemaining:r=null,calculateStudentLearning:i=()=>0}){const[s,o]=L.useState(!0),[l,u]=L.useState(0);L.useEffect(()=>{const S=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");o(S.hasAI!==!1)},[]);const[h,p]=L.useState([{sender:"bot",text:s?"Hello! I'm your AI teaching assistant. Click the help buttons below for task assistance!":"Hello! This is the chat interface. AI assistance is not available for this session."}]),[g,v]=L.useState(""),[k,R]=L.useState(!1),[D,O]=L.useState({materials:0,research:0,engagement:0}),T=L.useRef(null),I=()=>{var S;(S=T.current)==null||S.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{I()},[h]);const A=()=>e?e.startsWith("g1")?"research":e.startsWith("g2")?"materials":e.startsWith("g3")?"engagement":null:null,b=(S=null)=>{const C=S||A();if(!C){p(Q=>[...Q,{sender:"bot",text:"Please start a task first, then I can help you!"}]);return}const x=Date.now();if(x-D[C]<3e3){p(Q=>[...Q,{sender:"bot",text:"Please wait a moment before requesting help again!"}]);return}switch(O(Q=>({...Q,[C]:x})),C){case"materials":V();break;case"research":j();break;case"engagement":_();break;default:p(Q=>[...Q,{sender:"bot",text:"I'm not sure which task you're on. Please try again!"}])}},V=()=>{var X,re;const S=((X=document.querySelector("[data-target-value]"))==null?void 0:X.getAttribute("data-target-value"))||((re=document.querySelector(".target-value"))==null?void 0:re.textContent)||5,C=on.helpWithSlider(parseFloat(S),e),x=on.getUniversalAttemptNumber(),Q=on.shouldAIBeCorrect(x);Pe.trackAITaskHelp(e,"slider",C.value,Q,x),localStorage.setItem(`lastAIHelp_${e}`,JSON.stringify({type:"slider",suggestion:C.value,timestamp:Date.now(),wasCorrect:Q})),window.dispatchEvent(new CustomEvent("aiSliderHelp",{detail:C})),u(on.totalAIUsage),p($=>[...$,{sender:"bot",text:`📊 Helping with materials... Suggested value: ${C.value.toFixed(2)}`}])},j=()=>{var x;const S=document.querySelector(".text-to-count"),C=document.querySelector(".count-target");if(S&&C){const Q=S.getAttribute("data-counting-text")||"";let X=((x=C.getAttribute("data-pattern"))==null?void 0:x.replace(/['"]/g,"").trim())||"";const re=on.helpWithCounting(Q,X,e),$=re.suggestedCount;window.dispatchEvent(new CustomEvent("aiCountingHelp",{detail:re}));const M=on.getUniversalAttemptNumber(),F=on.shouldAIBeCorrect(M);Pe.trackAITaskHelp(e,"counting",$,F,M),localStorage.setItem(`lastAIHelp_${e}`,JSON.stringify({type:"counting",suggestion:$,timestamp:Date.now(),wasCorrect:F,highlightedWords:re.highlightWords||[],targetLetters:re.targetLetters||[]})),u(on.totalAIUsage);const W=re.isMultiLetter?"letters/characters":"words";p(Z=>[...Z,{sender:"bot",text:`🔬 Helping with research...
Found ${$} ${W}`}])}},E=()=>{const S=["📊 Strategic Order: Start with Research tasks for the 15% multiplier per point, then do Engagement for compound interest that builds over time, finally complete Materials for maximum base points!","🎯 Pro Strategy: Research → Engagement → Materials. Build your multipliers first, then let interest compound, and maximize base points at the end!","💡 Optimal Workflow: 1) Research multiplies everything (×1.15 per point), 2) Engagement adds 0.15% interest after EVERY task, 3) Materials are pure points - save them for last when multipliers are active!","🚀 Best Practice: Complete Research early (multiplier effect), then Engagement (compounds over time), finally Materials. Each Research point makes ALL your Materials worth 15% more!","📈 Planning Tip: Think of it as investing - Research is your growth multiplier, Engagement is compound interest, Materials are your principal. Build multipliers before collecting points!"],C=S[Math.floor(Math.random()*S.length)];p(x=>[...x,{sender:"bot",text:C}]),Pe.trackUserAction("planning_help_requested",{response:C,currentTask:e,timestamp:Date.now()})},_=()=>{const S=document.querySelector("[data-typing-pattern]");if(S){const C=S.getAttribute("data-typing-pattern");if(C){const x=on.helpWithTyping(C,e),Q=on.getUniversalAttemptNumber(),X=x.perfect;Pe.trackAITaskHelp(e,"typing",x.text,X,Q),localStorage.setItem(`lastAIHelp_${e}`,JSON.stringify({type:"typing",suggestion:x.text,timestamp:Date.now(),wasCorrect:X,originalPattern:C})),window.dispatchEvent(new CustomEvent("aiTypingHelp",{detail:x})),u(on.totalAIUsage),p(re=>[...re,{sender:"bot",text:`✉️ Helping with engagement... Typing: "${x.text.substring(0,30)}${x.text.length>30?"...":""}"`}])}}else p(C=>[...C,{sender:"bot",text:"Please navigate to the engagement tab first!"}])},m=()=>{if(!g.trim())return;if(!s){p(x=>[...x,{sender:"user",text:g},{sender:"bot",text:"AI assistance is not available for this session."}]),v("");return}const S=g.toLowerCase().trim(),C=g;p(x=>[...x,{sender:"user",text:g}]),v(""),R(!0),setTimeout(()=>{let x="",Q="general";if(S.includes("help"))if(Q="help_request",S.includes("material")||S.includes("slider")){b("materials"),R(!1);return}else if(S.includes("research")||S.includes("count")){b("research"),R(!1);return}else if(S.includes("engagement")||S.includes("typ")){b("engagement"),R(!1);return}else x="Click the help buttons below for task assistance!";else if(S.includes("strategy")||S.includes("plan")||S.includes("order")){Q="strategy";const X=["📊 Strategic Order: Start with Research tasks for the 15% multiplier per point, then do Engagement for compound interest that builds over time, finally complete Materials for maximum base points!","🎯 Pro Strategy: Research → Engagement → Materials. Build your multipliers first, then let interest compound, and maximize base points at the end!","💡 Optimal Workflow: 1) Research multiplies everything (×1.15 per point), 2) Engagement adds 0.15% interest after EVERY task, 3) Materials are pure points - save them for last when multipliers are active!","🚀 Best Practice: Complete Research early (multiplier effect), then Engagement (compounds over time), finally Materials. Each Research point makes ALL your Materials worth 15% more!","📈 Planning Tip: Think of it as investing - Research is your growth multiplier, Engagement is compound interest, Materials are your principal. Build multipliers before collecting points!"];x=X[Math.floor(Math.random()*X.length)]}else if(S.includes("tip")||S.includes("advice"))Q="advice",x="Strategic tip: Do Research tasks first for the multiplier effect, then Materials for base points, finally Engagement for compound interest!";else{const X=["Keep pushing! You're doing great!","Remember: Materials × Research × Engagement = Success!","Focus on accuracy for those 2-point rewards!","The checkpoint at minute 10 can give huge bonuses!","Try the help buttons below for task assistance!"];x=X[Math.floor(Math.random()*X.length)]}Pe.trackUserAction("chat_message",{query:C,queryType:Q,response:x,currentTask:e,categoryPoints:n,studentLearning:i(),aiUsageCount:on.totalAIUsage}),p(X=>[...X,{sender:"bot",text:x}]),R(!1)},800)},w=A();return d.jsxs("div",{className:"chat-container-sidebar",style:{height:"100%",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{className:"chat-header",children:[d.jsx("h3",{children:s?"AI Teaching Assistant":"Chat Interface"}),d.jsx("div",{style:{fontSize:"11px",color:"#888",marginTop:"2px"},children:s?"Unlimited help (reliability varies by task)":"AI assistance disabled for this session"}),d.jsxs("div",{style:{marginTop:"10px",padding:"8px",background:"#e3f2fd",borderRadius:"6px",border:"1px solid #2196F3"},children:[d.jsxs("div",{style:{fontSize:"12px",color:"#1976d2",fontWeight:"bold"},children:["Student Learning: ",Math.round(i())," pts"]}),d.jsxs("div",{style:{fontSize:"10px",color:"#666",marginTop:"2px"},children:[n.materials||0," ×"," ",(1+(n.research||0)*.15).toFixed(2)," + Interest"]})]})]}),d.jsxs("div",{className:"messages-sidebar",children:[h.map((S,C)=>d.jsxs("div",{className:`message ${S.sender}`,children:[d.jsxs("div",{className:"message-sender",children:[S.sender==="user"?"You":s?"AI":"System",":"]}),d.jsx("div",{className:"message-text",children:S.text})]},C)),k&&s&&d.jsxs("div",{className:"message bot",children:[d.jsx("div",{className:"message-sender",children:"AI:"}),d.jsx("div",{className:"message-text typing",children:"..."})]}),d.jsx("div",{ref:T})]}),d.jsxs("div",{className:"chat-input-sidebar",children:[d.jsx("input",{type:"text",placeholder:s?"Ask about strategy and tips here...":"Chat disabled - no AI available",value:g,onChange:S=>v(S.target.value),onKeyPress:S=>S.key==="Enter"&&m(),disabled:!s}),d.jsx("button",{onClick:m,disabled:!g.trim()||!s,children:"Send"})]}),s&&d.jsxs("div",{style:{padding:"15px",borderTop:"1px solid #e0e0e0",background:"#f8f9fa"},children:[d.jsxs("div",{style:{fontSize:"11px",color:"#666",textAlign:"center",marginBottom:"8px",padding:"4px",background:"white",borderRadius:"4px"},children:["AI Usage: ",l," total attempts",l===2&&d.jsx("span",{style:{color:"#ff9800",marginLeft:"8px"},children:"(Next will be off by 1)"}),l>=5&&d.jsx("span",{style:{color:"#2196F3",marginLeft:"8px"},children:"(75% accuracy mode)"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",marginBottom:"10px"},children:[d.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[d.jsxs("button",{onClick:()=>b(),disabled:!w,style:{padding:"12px",background:w?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"8px",cursor:w?"pointer":"not-allowed",fontWeight:"bold",fontSize:"14px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[d.jsx("span",{style:{fontSize:"18px"},children:"🤖"}),w?"Help Task":"Start task first"]}),d.jsxs("button",{onClick:E,style:{padding:"12px",background:"#FF9800",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[d.jsx("span",{style:{fontSize:"18px"},children:"📊"}),"Help Plan"]})]}),d.jsx("button",{onClick:()=>b("research"),disabled:!e.startsWith("g1"),style:{padding:"10px",background:e.startsWith("g1")?"#9C27B0":"#e0e0e0",color:e.startsWith("g1")?"white":"#999",border:"none",borderRadius:"6px",cursor:e.startsWith("g1")?"pointer":"not-allowed",fontWeight:"bold",fontSize:"12px"},children:"📚 Research"}),d.jsx("button",{onClick:()=>b("materials"),disabled:!e.startsWith("g2"),style:{padding:"10px",background:e.startsWith("g2")?"#4CAF50":"#e0e0e0",color:e.startsWith("g2")?"white":"#999",border:"none",borderRadius:"6px",cursor:e.startsWith("g2")?"pointer":"not-allowed",fontWeight:"bold",fontSize:"12px"},children:"🎯 Materials"}),d.jsx("button",{onClick:()=>b("engagement"),disabled:!e.startsWith("g3"),style:{padding:"10px",background:e.startsWith("g3")?"#f44336":"#e0e0e0",color:e.startsWith("g3")?"white":"#999",border:"none",borderRadius:"6px",cursor:e.startsWith("g3")?"pointer":"not-allowed",fontWeight:"bold",fontSize:"12px"},children:"✉️ Engage"})]}),d.jsx("div",{style:{fontSize:"11px",color:"#666",textAlign:"center",marginBottom:"8px",padding:"4px",background:"white",borderRadius:"4px"},children:w?d.jsx("span",{style:{color:"#4CAF50"},children:"✓ AI ready to help"}):d.jsx("span",{style:{color:"#999"},children:"⏸ Navigate to a task to enable AI help"})})]}),!s&&d.jsxs("div",{style:{padding:"15px",borderTop:"1px solid #e0e0e0",background:"#f5f5f5",textAlign:"center",color:"#666",fontSize:"14px"},children:[d.jsx("div",{style:{marginBottom:"5px"},children:"📝 No AI Assistant"}),d.jsx("div",{style:{fontSize:"12px"},children:"Complete tasks using your own judgment"})]})]})}const Cl={generateCode(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,8);return`${t}-${e}`.toUpperCase()},async createCode(t={}){return{success:!0,code:this.generateCode(),data:t}},async markCodeAsUsed(t,e){if(!t)return{success:!1,error:"No code provided"};try{const n={code:t,status:"used",usedAt:Zt(),sessionId:e,createdAt:Zt()};return await JT(un(pt,"accessCodes",t),n),{success:!0}}catch(n){return console.error("Error marking code as used:",n),{success:!1,error:n.message}}},async checkCodeUsage(t){if(!t)return{used:!1};try{const e=await XT(un(pt,"accessCodes",t));if(e.exists()){const n=e.data();return{used:n.status==="used",sessionId:n.sessionId,usedAt:n.usedAt}}return{used:!1}}catch(e){return console.error("Error checking code usage:",e),{used:!1,error:e.message}}},getCodeFromURL(){const t=new URLSearchParams(window.location.search);return t.get("code")||t.get("c")||null},async verifyQualtricsCode(t){return{valid:!1,reason:"Qualtrics codes not yet supported"}}};function pI({onLoginSuccess:t}){const[e,n]=L.useState(""),[r,i]=L.useState(!1),[s,o]=L.useState(""),[l,u]=L.useState(!1),h={legacy8:/^\d{8}$/,legacy10:/^\d{10}$/,standard:/^30\d{8}$/},p={"ADMIN-MASTER":{role:"master_admin",name:"Master Administrator",hasAI:!1,isMasterInterface:!0},"ADMIN-REGULAR":{role:"admin",semesterDuration:72e4,name:"Admin Regular Mode",hasAI:!0,checkpointSemester2:!0},"ADMIN-FAST":{role:"admin",semesterDuration:12e4,name:"Admin Fast Mode",hasAI:!0,checkpointSemester2:!0},"ADMIN-1-CP":{role:"admin",semesterDuration:12e4,name:"Admin Section 1 WITH Checkpoint",hasAI:!1,checkpointSemester2:!0},"ADMIN-1-NCP":{role:"admin",semesterDuration:12e4,name:"Admin Section 1 NO Checkpoint",hasAI:!1,checkpointSemester2:!1},"ADMIN-2-CP":{role:"admin",semesterDuration:12e4,name:"Admin Section 2 WITH Checkpoint",hasAI:!0,checkpointSemester2:!0},"ADMIN-2-NCP":{role:"admin",semesterDuration:12e4,name:"Admin Section 2 NO Checkpoint",hasAI:!0,checkpointSemester2:!1}},g=["3040748714","3040729812","3040859968","3040852909","3040869211","3040849958","3039838870","15177695","3040849997","3039845630","3040682661","26416809","3039850622","3040869510","3031977170","3040806629","3040848528","3039840443","3040848749","3040849893","3039850830","3039850713"],v=["3040850023","22900589","3039850570","3040882302","3040815651","3040701758","3040852077","3036343361","3040869458","3040705047","3040702343","3039842887","3040848593","3040702603","3039840222","3039840209","3040861190","18565110","3040869302","3040814338","3039754031"],k=["3040705476","3040697715","3039753992","3040729513","3040681595","3040850010","3032682772","3039842484","3040869445","3040814455","3039840781","3040696831","3040705125","3034184066","3039843004","3039842835","3040860072","3040871018","3039839026","3040814429","3040869094","3040748064","3040875945","3040701589","3040682193","3040729422","3040836165","21798975","3038626424","3039753017","3039840287","3040806382"],R=["25958106","3040814351","3040848697","3040684039","3040869289","22971551","3040837218","3040864570","3040705099","3034288430","3040848541","3040864531","3040869237","3032342054","3040682479","3039840170","3032397447","3039850856","3039840118","3040729552","3040683181","3040861073","3031968434","3040882575","3035320237","3040823815","3039842575","24261697","23420611","3032000089","3040882341"],D=[...g,...v,...k,...R],O=A=>{const b=g.includes(A)||v.includes(A),V=k.includes(A)||R.includes(A),j=g.includes(A)||k.includes(A);return{section:b?"01A":V?"02A":"unknown",hasAI:V,checkpointSemester2:j,displayName:`Student ${A} (${b?"01A":"02A"}-${j?"CP":"NCP"})`}},T=A=>{if(p[A])return{valid:!0,type:"master",data:p[A]};for(const[b,V]of Object.entries(h))if(V.test(A)){if(D.includes(A)){const j=O(A);return{valid:!0,type:"student",format:b,condition:j}}return{valid:!1,error:"Student ID not found in registry"}}return{valid:!1,error:"Invalid ID format. Must be 8-10 digit Student ID"}},I=async A=>{if(A.preventDefault(),!e.trim()){o("Please enter your Student ID");return}i(!0),o("");try{const b=T(e.trim());if(!b.valid){o(b.error||"Invalid Student ID"),i(!1);return}let V={timestamp:new Date().toISOString()};if(b.type==="master"){if(V={...V,studentIdentifier:e,role:b.data.role,semesterDuration:b.data.semesterDuration,displayName:b.data.name,hasAI:b.data.hasAI,checkpointSemester2:b.data.checkpointSemester2,isMasterCode:!0,isMasterInterface:b.data.isMasterInterface||!1},b.data.isMasterInterface){sessionStorage.setItem("gameConfig",JSON.stringify({role:"master_admin",displayName:b.data.name})),window.location.href=`${window.location.origin}?master=true`;return}}else{const E=b.condition;V={...V,studentIdentifier:e,role:"student",semesterDuration:72e4,displayName:E.displayName,section:E.section,hasAI:E.hasAI,checkpointSemester2:E.checkpointSemester2,isMasterCode:!1}}const j=await Cl.createCode(V);j.success?(sessionStorage.setItem("gameConfig",JSON.stringify({semesterDuration:V.semesterDuration,role:V.role,studentId:e,displayName:V.displayName,section:V.section,hasAI:V.hasAI,checkpointSemester2:V.checkpointSemester2})),window.location.href=`${window.location.origin}?code=${j.code}`):o("Failed to generate access code. Please try again.")}catch(b){console.error("Login error:",b),o("System error. Please try again.")}finally{i(!1)}};return d.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",padding:"20px"},children:[d.jsxs("div",{style:{background:"white",padding:"48px",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",maxWidth:"480px",width:"100%"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[d.jsxs("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1a202c",marginBottom:"8px",lineHeight:"1.2"},children:["Scheduling Challenge:",d.jsx("br",{}),"Can you beat Park?"]}),d.jsx("p",{style:{fontSize:"16px",color:"#718096",marginTop:"12px"},children:"Enter your Student ID to access the game"})]}),d.jsxs("form",{onSubmit:I,children:[d.jsxs("div",{style:{marginBottom:"24px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#2d3748",fontWeight:"600",fontSize:"14px",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Berkeley Student ID:"}),d.jsx("input",{type:"text",value:e,onChange:A=>n(A.target.value),disabled:r,style:{width:"100%",padding:"14px 16px",fontSize:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",boxSizing:"border-box",fontFamily:"'SF Mono', Monaco, 'Courier New', monospace",transition:"all 0.2s ease",background:"#f7fafc",outline:"none"},onFocus:A=>{A.target.style.borderColor="#2196F3",A.target.style.background="white",A.target.style.boxShadow="0 0 0 3px rgba(33, 150, 243, 0.1)"},onBlur:A=>{A.target.style.borderColor="#e2e8f0",A.target.style.background="#f7fafc",A.target.style.boxShadow="none"}}),d.jsx("div",{style:{marginTop:"8px",fontSize:"13px",color:"#a0aec0",lineHeight:"1.4"},children:"Valid formats: 8 digits or 10 digits (303xxxxxxx)"})]}),s&&d.jsxs("div",{style:{background:"#fed7d7",color:"#c53030",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",fontSize:"14px",display:"flex",alignItems:"center",border:"1px solid #fc8181"},children:[d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",style:{marginRight:"8px",flexShrink:0},children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s]}),d.jsx("button",{type:"submit",disabled:r,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:"600",background:r?"#cbd5e0":"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:r?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:r?"none":"0 4px 6px rgba(33, 150, 243, 0.25)",transform:r?"none":"translateY(0)"},onMouseDown:A=>{r||(A.target.style.transform="translateY(2px)",A.target.style.boxShadow="0 2px 4px rgba(33, 150, 243, 0.25)")},onMouseUp:A=>{r||(A.target.style.transform="translateY(0)",A.target.style.boxShadow="0 4px 6px rgba(33, 150, 243, 0.25)")},onMouseOver:A=>{r||(A.target.style.background="#1976D2")},onMouseOut:A=>{r||(A.target.style.background="#2196F3")},children:r?d.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsxs("svg",{className:"animate-spin",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"8px",animation:"spin 1s linear infinite"},children:[d.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeOpacity:"0.25"}),d.jsx("path",{d:"M4 12a8 8 0 018-8",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})]}),"Verifying Student ID..."]}):"Access Game"})]}),d.jsxs("div",{style:{marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:[d.jsx("p",{style:{fontSize:"14px",color:"#718096",marginBottom:"12px"},children:"Having trouble? Contact your instructor:"}),d.jsxs("p",{style:{fontSize:"16px",color:"#2196F3",fontWeight:"500"},children:["Park Sinchaisri",d.jsx("br",{}),d.jsx("a",{href:"mailto:parksinchaisri@haas.berkeley.edu",style:{color:"#2196F3",textDecoration:"none",borderBottom:"1px solid #2196F3",fontSize:"15px"},children:"parksinchaisri@haas.berkeley.edu"})]}),l&&d.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f7fafc",borderRadius:"8px",fontSize:"11px",color:"#4a5568",lineHeight:"1.8"},children:[d.jsx("strong",{children:"Test Codes:"}),d.jsxs("div",{style:{marginTop:"8px",fontFamily:"monospace"},children:[d.jsx("div",{children:"ADMIN-1-CP (No AI, With Checkpoint)"}),d.jsx("div",{children:"ADMIN-1-NCP (No AI, No Checkpoint)"}),d.jsx("div",{children:"ADMIN-2-CP (AI, With Checkpoint)"}),d.jsx("div",{children:"ADMIN-2-NCP (AI, No Checkpoint)"}),d.jsx("div",{children:"ADMIN-REGULAR (Original)"}),d.jsx("div",{children:"ADMIN-FAST (2 min test)"})]})]})]})]}),d.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]})}const Ng={async checkDailyLimit(t){var r;if(!t)return{allowed:!0};const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);try{const i=ns(pt,"sessions"),s=GT(i,kg("studentId","==",t),kg("startTime",">=",n)),o=await kv(s);if(!o.empty){const l=o.docs[0].data(),u=(r=l.startTime)!=null&&r.toDate?l.startTime.toDate():new Date(l.clientStartTime);return{allowed:!1,reason:"daily_limit",existingSession:l,nextAvailable:new Date(n.getTime()+24*60*60*1e3)}}return{allowed:!0}}catch(i){console.error("Error checking daily limit:",i);const s=`played_${t}_${n.toISOString().split("T")[0]}`;return localStorage.getItem(s)?{allowed:!1,reason:"daily_limit",nextAvailable:new Date(n.getTime()+24*60*60*1e3)}:{allowed:!0}}},async markDailyPlay(t){const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),r=`played_${t}_${n.toISOString().split("T")[0]}`;localStorage.setItem(r,"true");const i=new Date(Date.now()-7*24*60*60*1e3);for(let s=0;s<localStorage.length;s++){const o=localStorage.key(s);if(o&&o.startsWith("played_")){const l=o.split("_")[2];l&&new Date(l)<i&&localStorage.removeItem(o)}}},async checkAccess(){try{const t=Cl.getCodeFromURL();if(!t)return{allowed:!1,reason:"Please login with your student ID",requiresCode:!0};const e=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),n=e.role==="admin";if(!n&&e.studentId){const r=await this.checkDailyLimit(e.studentId);if(!r.allowed&&!r.refreshGranted){const s=r.nextAvailable;return{allowed:!1,reason:`You have already completed today's session. Please come back in ${Math.ceil((s-Date.now())/(1e3*60*60))} hours (after midnight).`,dailyLimitReached:!0,nextAvailable:s}}if(sessionStorage.getItem("activeSessionId"))return{allowed:!1,reason:"Page refresh is not allowed during the game. Your session has been terminated.",refreshAttempt:!0}}return e.studentId?(n||await this.markDailyPlay(e.studentId),{allowed:!0,newSession:!0,code:t,codeData:{status:"new",metadata:e},isAdmin:n}):{allowed:!1,reason:"Please login with your Berkeley student ID",requiresCode:!0}}catch(t){console.error("Error in checkAccess:",t);const e=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");return e.role==="admin"?{allowed:!0,newSession:!0,code:Cl.getCodeFromURL(),codeData:{status:"error_bypass",metadata:e},isAdmin:!0}:{allowed:!1,reason:"System error. Please try again.",requiresCode:!0}}},async createSession(t=null,e=null,n=!1){try{const r=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),i=r.role==="admin",s={id:crypto.randomUUID(),accessCode:t,studentId:r.studentId||null,role:r.role||"student",semesterDuration:r.semesterDuration||72e4,displayName:r.displayName||"Student",startTime:Zt(),clientStartTime:new Date().toISOString(),status:"active",completedTasks:{},isPractice:n,isAdminSession:i,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`,section:r.section,hasAI:r.hasAI,checkpointSemester2:r.checkpointSemester2},l=(await Al(ns(pt,"sessions"),s)).id;return localStorage.setItem("sessionId",l),sessionStorage.setItem("activeSessionId",l),i||(window.addEventListener("beforeunload",u=>{u.preventDefault(),u.returnValue="Your progress will be lost if you leave this page.",this.handleSessionAbandonment()}),document.addEventListener("visibilitychange",()=>{!i&&document.hidden&&eventTracker.logEvent("tab_switch",{sessionId:l,timestamp:Date.now(),hidden:!0})})),l}catch(r){console.error("Error creating session:",r);const i=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");if(i.role==="admin"){const s="offline-"+Date.now();localStorage.setItem("sessionId",s),sessionStorage.setItem("activeSessionId",s);const o={id:s,accessCode:t,startTime:Date.now(),status:"active",isOffline:!0,studentId:i.studentId||null,role:i.role||"admin"};return localStorage.setItem("offlineSession",JSON.stringify(o)),s}throw r}},async handleSessionAbandonment(){const t=localStorage.getItem("sessionId");if(t&&!t.startsWith("offline-"))try{await Hn(un(pt,"sessions",t),{status:"abandoned",abandonedAt:Zt(),abandonReason:"page_unload"})}catch(e){console.error("Error marking session as abandoned:",e)}sessionStorage.removeItem("activeSessionId"),sessionStorage.removeItem("gameConfig")}};function gI(){const[t,e]=L.useState(""),[n,r]=L.useState(!1),[i,s]=L.useState(""),[o,l]=L.useState(!1),u=async()=>{r(!0),s(""),l(!1);try{const p=await Cl.createCode({createdBy:"admin",timestamp:new Date().toISOString()});p.success?e(p.code):s("Failed to generate code: "+p.error)}catch(p){s("Error: "+p.message)}finally{r(!1)}},h=()=>{const p=`${window.location.origin}?code=${t}`;navigator.clipboard.writeText(p),l(!0),setTimeout(()=>l(!1),2e3)};return d.jsxs("div",{style:{padding:"40px",maxWidth:"800px",margin:"0 auto",fontFamily:"system-ui, -apple-system, sans-serif"},children:[d.jsx("h1",{style:{color:"#333",marginBottom:"10px"},children:"Admin Dashboard"}),d.jsx("p",{style:{color:"#666",marginBottom:"30px"},children:"Generate access codes for participants"}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"30px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[d.jsx("button",{onClick:u,disabled:n,style:{padding:"12px 30px",fontSize:"16px",background:n?"#ccc":"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:n?"not-allowed":"pointer",fontWeight:"bold"},children:n?"Generating...":"Generate New Access Code"}),t&&d.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"white",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[d.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"Generated Code"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#666",fontSize:"14px"},children:"Access Code:"}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",background:"#f5f5f5",borderRadius:"4px",fontFamily:"monospace",fontSize:"18px",fontWeight:"bold"},children:t})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#666",fontSize:"14px"},children:"Full URL:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"stretch"},children:[d.jsx("input",{type:"text",value:`${window.location.origin}?code=${t}`,readOnly:!0,style:{flex:1,padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontFamily:"monospace",fontSize:"14px",background:"#f9f9f9"}}),d.jsx("button",{onClick:h,style:{padding:"10px 20px",background:o?"#4CAF50":"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap"},children:o?"✓ Copied!":"Copy URL"})]})]}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"4px",fontSize:"14px",color:"#1976d2"},children:[d.jsx("strong",{children:"Note:"})," This code is valid for 24 hours and can only be used once."]})]}),i&&d.jsx("div",{style:{marginTop:"20px",padding:"15px",background:"#ffebee",color:"#c62828",borderRadius:"4px"},children:i})]}),d.jsxs("div",{style:{marginTop:"40px",padding:"20px",background:"#f5f5f5",borderRadius:"6px",fontSize:"14px",color:"#666"},children:[d.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"How to use:"}),d.jsxs("ol",{style:{margin:"10px 0",paddingLeft:"20px"},children:[d.jsx("li",{children:"Generate a code using the button above"}),d.jsx("li",{children:"Copy the full URL"}),d.jsx("li",{children:"Share the URL with participants"}),d.jsx("li",{children:"Each participant can use their unique code once"})]})]})]})}function mI({sessionId:t,completedLevels:e,totalTime:n,gameMode:r}){const[i,s]=L.useState(""),[o,l]=L.useState(!1);L.useEffect(()=>{u()},[]);const u=()=>{const p=Date.now().toString(36).toUpperCase(),g=e.toString().padStart(2,"0"),v=r.limit==="time"?"T":"A",k=r.accuracy==="strict"?"S":"L";Math.floor(n/60).toString().padStart(2,"0");const O=`GAME-${`${t}-${g}-${n}`.split("").reduce((T,I)=>T+I.charCodeAt(0),0).toString(36).toUpperCase().slice(-3)}-${g}-${v}${k}-${p}`;s(O)},h=()=>{navigator.clipboard.writeText(i),l(!0),setTimeout(()=>l(!1),3e3)};return d.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"30px",marginTop:"30px",color:"white",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[d.jsx("h2",{style:{marginBottom:"20px",fontSize:"24px"},children:"🎊 Your Completion Code"}),d.jsx("p",{style:{marginBottom:"20px",opacity:.9,fontSize:"16px"},children:"Copy this code and paste it into the Qualtrics survey to verify your completion:"}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"20px",marginBottom:"20px",backdropFilter:"blur(10px)"},children:[d.jsx("div",{style:{fontFamily:"monospace",fontSize:"28px",fontWeight:"bold",letterSpacing:"2px",marginBottom:"15px",wordBreak:"break-all",textShadow:"2px 2px 4px rgba(0,0,0,0.2)"},children:i}),d.jsx("button",{onClick:h,style:{padding:"12px 30px",fontSize:"16px",fontWeight:"bold",background:o?"#4CAF50":"white",color:o?"white":"#764ba2",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:o?"✓ Copied!":"📋 Copy Code"})]}),d.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"6px",padding:"15px",fontSize:"14px",lineHeight:"1.5"},children:[d.jsx("strong",{children:"⚠️ Important:"})," This code is your proof of completion. Make sure to copy it before closing this window!"]}),d.jsxs("details",{style:{marginTop:"20px",textAlign:"left"},children:[d.jsx("summary",{style:{cursor:"pointer",opacity:.8,fontSize:"12px",marginBottom:"10px"},children:"Code Details ▼"}),d.jsxs("div",{style:{fontSize:"12px",opacity:.7,background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px",fontFamily:"monospace"},children:[d.jsxs("div",{children:["Levels Completed: ",e,"/45"]}),d.jsxs("div",{children:["Game Mode: ",r.limit==="time"?"Time Challenge":"Task Attempts"]}),d.jsxs("div",{children:["Accuracy Mode: ",r.accuracy==="strict"?"Strict (100%)":"Lenient"]}),d.jsxs("div",{children:["Total Time: ",Math.floor(n/60),"m ",n%60,"s"]}),d.jsxs("div",{children:["Generated: ",new Date().toLocaleString()]})]})]})]})}function yI(){const[t,e]=L.useState([]),[n,r]=L.useState(!0),[i,s]=L.useState(null),[o,l]=L.useState(!1),[u,h]=L.useState(""),p=["3040748714","3040729812","3040859968","3040852909","3040869211","3040849958","3039838870","15177695","3040849997","3039845630","3040682661","26416809","3039850622","3040869510","3031977170","3040806629","3040848528","3039840443","3040848749","3040849893","3039850830","3039850713"],g=["3040850023","22900589","3039850570","3040882302","3040815651","3040701758","3040852077","3036343361","3040869458","3040705047","3040702343","3039842887","3040848593","3040702603","3039840222","3039840209","3040861190","18565110","3040869302","3040814338","3039754031"],v=["3040705476","3040697715","3039753992","3040729513","3040681595","3040850010","3032682772","3039842484","3040869445","3040814455","3039840781","3040696831","3040705125","3034184066","3039843004","3039842835","3040860072","3040871018","3039839026","3040814429","3040869094","3040748064","3040875945","3040701589","3040682193","3040729422","3040836165","21798975","3038626424","3039753017","3039840287","3040806382"],k=["25958106","3040814351","3040848697","3040684039","3040869289","22971551","3040837218","3040864570","3040705099","3034288430","3040848541","3040864531","3040869237","3032342054","3040682479","3039840170","3032397447","3039850856","3039840118","3040729552","3040683181","3040861073","3031968434","3040882575","3035320237","3040823815","3039842575","24261697","23420611","3032000089","3040882341"],R=m=>p.includes(m)?{section:"01A-CP",hasCheckpoint:!0}:g.includes(m)?{section:"01A-NCP",hasCheckpoint:!1}:v.includes(m)?{section:"02A-CP",hasCheckpoint:!0}:k.includes(m)?{section:"02A-NCP",hasCheckpoint:!1}:m.includes("ADMIN")||m.includes("admin")?{section:"ADMIN",hasCheckpoint:!1}:{section:"Unknown",hasCheckpoint:!1};L.useEffect(()=>{D()},[]);const D=async()=>{r(!0);try{const m=await kv(ns(pt,"sessions")),w={};m.forEach(x=>{var X;const Q=x.data();if(!(Q.role==="admin"||Q.role==="master_admin")&&Q.studentId){const re=R(Q.studentId);w[Q.studentId]||(w[Q.studentId]={studentId:Q.studentId,sessions:[],latestAccess:null,totalAccesses:0,displayName:`Student ${Q.studentId}`,section:re.section,hasCheckpoint:re.hasCheckpoint,hasPlayed:!0}),w[Q.studentId].sessions.push({id:x.id,timestamp:(X=Q.startTime)!=null&&X.toDate?Q.startTime.toDate():new Date(Q.clientStartTime),status:Q.status,completedTasks:Object.keys(Q.completedTasks||{}).length,finalScore:Q.finalScore||0,currentSemester:Q.currentSemester||1})}}),Object.values(w).forEach(x=>{var Q;x.sessions.sort((X,re)=>re.timestamp-X.timestamp),x.latestAccess=((Q=x.sessions[0])==null?void 0:Q.timestamp)||null,x.totalAccesses=x.sessions.length});const S=[];[...p,...g,...v,...k].forEach(x=>{if(w[x])S.push(w[x]);else{const Q=R(x);S.push({studentId:x,sessions:[],latestAccess:null,totalAccesses:0,displayName:`Student ${x}`,section:Q.section,hasCheckpoint:Q.hasCheckpoint,hasPlayed:!1})}}),S.sort((x,Q)=>x.hasPlayed&&!Q.hasPlayed?-1:!x.hasPlayed&&Q.hasPlayed?1:x.latestAccess&&Q.latestAccess?Q.latestAccess-x.latestAccess:x.studentId.localeCompare(Q.studentId)),e(S)}catch(m){console.error("Error loading student data:",m)}finally{r(!1)}},O=async m=>{l(!0);try{const S=new Date().toISOString().split("T")[0],C=`played_${m}_${S}`;localStorage.removeItem(C),await Al(ns(pt,"accessRefreshes"),{studentId:m,refreshedBy:"MASTER_ADMIN",refreshedAt:Zt(),reason:"Manual refresh by admin"}),alert(`Access refreshed for student ${m}. They can now play again today.`),await D()}catch(w){console.error("Error refreshing access:",w),alert(`Failed to refresh access: ${w.message}`)}finally{l(!1)}},T=t.filter(m=>m.studentId.toLowerCase().includes(u.toLowerCase())),I=m=>m?new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).format(m):"Never",A=m=>{const w=new Date;return w.setHours(0,0,0,0),m.sessions.filter(S=>{const C=new Date(S.timestamp);return C.setHours(0,0,0,0),C.getTime()===w.getTime()}).length},b=t.filter(m=>!m.section.includes("ADMIN")).length,V=t.filter(m=>!m.section.includes("ADMIN")&&A(m)>0).length,j=t.filter(m=>!m.section.includes("ADMIN")).reduce((m,w)=>m+w.totalAccesses,0),E=t.filter(m=>!m.section.includes("ADMIN")&&A(m)>=1).length,_=t.filter(m=>!m.section.includes("ADMIN")&&!m.hasPlayed).length;return d.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[d.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"30px",borderRadius:"12px",marginBottom:"30px",color:"white"},children:[d.jsx("h1",{style:{margin:"0 0 10px 0"},children:"🔐 Master Admin Dashboard"}),d.jsx("p",{style:{margin:0,opacity:.9},children:"Manage student access and view activity logs"})]}),d.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[d.jsx("input",{type:"text",placeholder:"Search by Student ID...",value:u,onChange:m=>h(m.target.value),style:{flex:1,padding:"10px 15px",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"14px"}}),d.jsx("button",{onClick:D,disabled:n,style:{padding:"10px 20px",background:"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"🔄 Refresh Data"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"15px",marginTop:"20px"},children:[d.jsxs("div",{style:{padding:"15px",background:"#e3f2fd",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2196F3"},children:b}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Total Students"})]}),d.jsxs("div",{style:{padding:"15px",background:"#e8f5e9",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"},children:V}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Played Today"})]}),d.jsxs("div",{style:{padding:"15px",background:"#fff3e0",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ff9800"},children:j}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Total Sessions"})]}),d.jsxs("div",{style:{padding:"15px",background:"#fce4ec",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e91e63"},children:E}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Needs Refresh"})]}),d.jsxs("div",{style:{padding:"15px",background:"#f3e5f5",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#9c27b0"},children:_}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Never Played"})]})]})]}),d.jsx("div",{style:{background:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"#f5f5f5"},children:[d.jsx("th",{style:{padding:"15px",textAlign:"left",fontWeight:"600"},children:"Student ID"}),d.jsx("th",{style:{padding:"15px",textAlign:"left",fontWeight:"600"},children:"Section"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Status"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Latest Access"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Today"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Total"}),d.jsx("th",{style:{padding:"15px",textAlign:"center",fontWeight:"600"},children:"Actions"})]})}),d.jsx("tbody",{children:n?d.jsx("tr",{children:d.jsx("td",{colSpan:"7",style:{padding:"40px",textAlign:"center"},children:"Loading student data..."})}):T.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"7",style:{padding:"40px",textAlign:"center"},children:"No students found"})}):T.map(m=>{const w=A(m),S=w>=1,C=m.section==="ADMIN";return d.jsxs("tr",{style:{borderBottom:"1px solid #e0e0e0",background:i===m.studentId?"#f0f8ff":m.hasPlayed?C?"#fff9c4":"white":"#fafafa"},children:[d.jsx("td",{style:{padding:"15px",fontFamily:"monospace"},children:m.studentId}),d.jsx("td",{style:{padding:"15px"},children:d.jsx("span",{style:{padding:"4px 8px",background:C?"#ffeb3b":m.section.includes("01A")?"#e3f2fd":m.section.includes("02A")?"#f3e5f5":"#f5f5f5",borderRadius:"4px",fontSize:"12px",fontWeight:C?"bold":"normal",color:C?"#333":"inherit"},children:m.section})}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:m.hasPlayed?C?d.jsx("span",{style:{padding:"4px 8px",background:"#ffeb3b",color:"#333",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:"Admin Test"}):d.jsx("span",{style:{padding:"4px 8px",background:"#e8f5e9",color:"#2e7d32",borderRadius:"12px",fontSize:"12px"},children:"Active"}):d.jsx("span",{style:{padding:"4px 8px",background:"#e0e0e0",color:"#666",borderRadius:"12px",fontSize:"12px"},children:"Never Played"})}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:I(m.latestAccess)}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:d.jsx("span",{style:{padding:"4px 8px",background:S?"#ffebee":w>0?"#e8f5e9":"#f5f5f5",color:S?"#c62828":w>0?"#2e7d32":"#999",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:w})}),d.jsx("td",{style:{padding:"15px",textAlign:"center",fontWeight:"bold"},children:m.totalAccesses}),d.jsx("td",{style:{padding:"15px",textAlign:"center"},children:!C&&d.jsx("button",{onClick:()=>{s(m.studentId),confirm(`Reset access for Student ${m.studentId} (${m.section})?

This will allow them to play again today.`)&&O(m.studentId)},disabled:o,style:{padding:"6px 12px",background:S?"#ff9800":"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:S?"🔄 Refresh":"✓ OK"})})]},m.studentId)})})]})}),d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#f5f5f5",borderRadius:"8px",fontSize:"12px",color:"#666",textAlign:"center"},children:["Access automatically resets at midnight PST. Use refresh button to manually grant access.",d.jsx("br",{}),"Total roster: ",b," students across 4 conditions (01A-CP, 01A-NCP, 02A-CP, 02A-NCP)"]})]})}function vI(t,e){const n=t.length,r=e.length,i=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let s=0;s<=n;s++)i[s][0]=s;for(let s=0;s<=r;s++)i[0][s]=s;for(let s=1;s<=n;s++)for(let o=1;o<=r;o++)t[s-1]===e[o-1]?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o]+1,i[s][o-1]+1,i[s-1][o-1]+1);return i[n][r]}function _I(){if(window.location.search.includes("master=true")&&JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="master_admin")return d.jsx(yI,{});if(window.location.search.includes("admin=true"))return d.jsx(gI,{});const e=new URLSearchParams(window.location.search).get("admin")==="berkeley2024",[n,r]=L.useState("landing"),[i,s]=L.useState(null),[o,l]=L.useState(null),[u,h]=L.useState("g2t1"),[p,g]=L.useState({}),[v,k]=L.useState(0),[R,D]=L.useState(null),[O,T]=L.useState(!1),[I,A]=L.useState(""),[b,V]=L.useState(!0),[j,E]=L.useState(0),[_,m]=L.useState({}),[w,S]=L.useState(0),[C,x]=L.useState(0),[Q,X]=L.useState(!1),[re,$]=L.useState(null),[M,F]=L.useState(!1),[W,Z]=L.useState(30),[ee,se]=L.useState(!1),[Ae,ge]=L.useState(5),[de,ce]=L.useState(!1),[Le,we]=L.useState(0),[ne,ke]=L.useState(1),[Ge]=L.useState(2),[Re,_t]=L.useState([]),[Ut,$t]=L.useState(null),[Wt,Ht]=L.useState(!1),[qt,or]=L.useState(0),[kn,ar]=L.useState(null),[$e,fs]=L.useState({g2t1:!1,g1t1:!1,g3t1:!1}),[qo,st]=L.useState(1200),[et,Br]=L.useState(1200),[su,Go]=L.useState(0),[Se,Rn]=L.useState({materials:0,research:0,engagement:0,bonus:0}),[ou,ps]=L.useState({}),[gs,Qo]=L.useState({}),ms=L.useRef(Date.now()),On=L.useRef(null);L.useRef(null);const lr=L.useRef(null),Gt=L.useRef(null),pn=L.useRef(Date.now());L.useRef(1200),L.useRef(1200),L.useEffect(()=>{ys()},[]),L.useEffect(()=>{const H=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),K=H.role==="admin";if(K)return;const q=()=>{M&&(F(!1),Z(30),lr.current&&(clearInterval(lr.current),lr.current=null))},oe=()=>{},Ie=()=>{pn.current=Date.now(),ee&&(se(!1),ge(5),Gt.current&&(clearInterval(Gt.current),Gt.current=null))};let Oe;K||(Oe=setInterval(()=>{if(n==="challenge"&&!K&&Date.now()-pn.current>6e4&&!ee){se(!0);let ot=5;Gt.current=setInterval(()=>{if(ot--,ge(ot),ot<=0){ce(!0),clearInterval(Gt.current),Pe.logEvent("game_blocked",{reason:"idle",timestamp:Date.now(),studentId:H.studentId,section:H.section});const Ye=localStorage.getItem("sessionId");Ye&&!Ye.startsWith("offline-")&&Hn(un(pt,"sessions",Ye),{status:"blocked",blockedAt:Zt(),blockReason:"idle"})}},1e3)}},3e4));const tt=kt=>{!K&&n==="challenge"&&(kt.preventDefault(),kt.returnValue="⚠️ WARNING: If you leave this page, you CANNOT return to complete your session. Your progress will be permanently lost.",Pe.logEvent("refresh_attempt",{timestamp:Date.now(),studentId:H.studentId,currentMode:n}))};return window.addEventListener("focus",q),window.addEventListener("blur",oe),window.addEventListener("mousemove",Ie),window.addEventListener("keypress",Ie),window.addEventListener("click",Ie),window.addEventListener("beforeunload",tt),()=>{window.removeEventListener("focus",q),window.removeEventListener("blur",oe),window.removeEventListener("mousemove",Ie),window.removeEventListener("keypress",Ie),window.removeEventListener("click",Ie),window.removeEventListener("beforeunload",tt),Oe&&clearInterval(Oe),lr.current&&clearInterval(lr.current),Gt.current&&clearInterval(Gt.current)}},[n]);const gn=(H=Se)=>{const K=H.materials||0,q=H.research||0;H.engagement;const oe=1+q*.15,Ie=K*oe,Oe=parseFloat(localStorage.getItem("engagementInterest")||"0")||0,tt=Ie+Oe;return console.log(`📊 STUDENT LEARNING: ${tt.toFixed(1)} pts | Formula: ${K} × ${oe.toFixed(2)} + ${Oe.toFixed(1)} = ${tt.toFixed(1)}`),isNaN(tt)?0:tt},ys=async()=>{try{const H=new URLSearchParams(window.location.search);if(!(H.has("code")||H.has("c"))){r("studentLogin"),V(!1);return}const{allowed:q,reason:oe,resumeSession:Ie,newSession:Oe,code:tt,codeData:kt}=await Ng.checkAccess();if(!q){T(!0),A(oe),V(!1);return}if(Ie)D(Ie),localStorage.setItem("sessionId",Ie);else if(Oe){const ot=await Ng.createSession(tt,kt);D(ot)}await Pe.syncOfflineEvents(),V(!1)}catch{V(!1)}},Fn=()=>{const H=JSON.parse(sessionStorage.getItem("gameConfig")||"{}");if(!(ne===2&&H.checkpointSemester2))return;Ht(!0),gn()>=50?(or(300),Rn(Ie=>({...Ie,bonus:(Ie.bonus||0)+300}))):or(0),X(!0),$("checkpoint")},vs=()=>{const H=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),K=H.semesterDuration||12e5,q=Math.floor(K/1e3);st(q),Br(q),ms.current=Date.now(),On.current=setInterval(()=>{const Ie=Date.now()-ms.current,Oe=Math.floor(Ie/1e3);E(Oe);const tt=Math.max(0,q-Oe);if(Br(tt),ne===2&&H.checkpointSemester2){const ot=H.role==="admin"&&H.semesterDuration===12e4?60:360;Oe===ot&&!Wt&&Fn()}tt<=0&&(clearInterval(On.current),On.current=null,Ko("semester_complete"))},1e3)},Ur=H=>{const q=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin",oe=$e.g2t1&&$e.g1t1&&$e.g3t1;l(H),Pe.trackUserAction("practice_choice",{choice:H,timestamp:Date.now()}),H==="no"?!q&&!oe?(We("You must complete all three practice tasks first!"),r("practice")):_s():r("practice")},_s=()=>{if(!Ut){const H=Math.floor(Math.random()*1e6);$t(H),Yn.initializeSeed(H),R&&!R.startsWith("offline-")&&Hn(un(pt,"sessions",R),{randomSeed:H,[`semesterSeeds.semester${ne}`]:H})}localStorage.setItem("engagementInterest","0"),Rn({materials:0,research:0,engagement:0,bonus:0}),r("challenge"),g({}),k(0),S(0),x(0),h("g2t1"),Ht(!1),ps({}),Qo({}),vs(),m({g2t1:Date.now()}),Pe.setPageStartTime("g2t1"),Pe.logEvent("game_start",{practiceCompleted:o==="yes",timestamp:Date.now(),gameMode:i,currentSemester:ne,totalSemesters:Ge,isAdminMode:e})},zn=async(H,K)=>{pn.current=Date.now();let q=0;const oe=H.startsWith("g1")?"research":H.startsWith("g2")?"materials":"engagement";if(oe==="materials"){const pe=parseFloat(K.userValue||0),sn=parseFloat(K.targetValue||0),mn=Math.abs(pe-sn);mn===0?q=2:mn<=1?q=1:q=0}else if(oe==="research"){const pe=parseInt(K.userAnswer||0),sn=parseInt(K.correctAnswer||0),mn=Math.abs(pe-sn);mn===0?q=2:mn<=1?q=1:q=0}else if(oe==="engagement"){const pe=K.userAnswer||"",sn=K.correctAnswer||"";pe===sn?q=2:vI(pe,sn)===1?q=1:q=0}Rn(pe=>({...pe,[oe]:pe[oe]+q}));const Oe=.0015*(oe==="engagement"?Se.engagement+q:Se.engagement),tt=oe==="materials"?Se.materials+q:Se.materials,kt=1+(oe==="research"?Se.research+q:Se.research)*.15,ot=tt*kt,gi=parseFloat(localStorage.getItem("engagementInterest")||"0")+Oe*ot;localStorage.setItem("engagementInterest",gi.toString()),Qo(pe=>({...pe,[H]:q})),ps(pe=>({...pe,[H]:(pe[H]||0)+1}));const mi={...Se,[oe]:Se[oe]+q},ur=gn(mi);Go(ur);let Mt="";if(oe==="materials"){const pe=Math.abs((K.userValue||0)-(K.targetValue||0));pe===0?Mt="Perfect materials!":pe<=1?Mt=`Off by ${pe.toFixed(2)}`:Mt=`Off by ${pe.toFixed(2)}`}else if(oe==="research"){const pe=Math.abs((K.userAnswer||0)-(K.correctAnswer||0));pe===0?Mt="Perfect research!":pe<=1?Mt=`Off by ${pe}`:Mt=`Off by ${pe}`}else oe==="engagement"&&(q===2?Mt="Perfect engagement!":q===1?Mt="One typo":Mt="Multiple errors");We(`${Mt} | +${q} ${oe} pts | Goal: ${Math.round(ur)} pts`),g(pe=>({...pe,[H]:!0})),k(pe=>pe+1),x(pe=>pe+1),await Pe.trackTaskComplete(H,K.attempts,K.totalTime,K.accuracy||K.difference||0),await Pe.logEvent("task_complete",{taskId:H,...K,pointsEarned:q,categoryPoints:mi,studentLearningScore:ur,engagementInterest:gi,completionContext:{totalTasksCompleted:Object.keys(p).length+1,currentGameTime:j,switchesBeforeCompletion:w,bonusPromptsEarned:C+1,timeRemaining:et}}),R&&!R.startsWith("offline-")&&await Hn(un(pt,"sessions",R),{[`completedTasks.${H}`]:!0,[`taskPoints.${H}`]:q,categoryPoints:mi,studentLearningScore:ur,engagementInterest:gi,bonusPrompts:C+1,lastActivity:Zt()}),setTimeout(()=>{if(u!==H)return;const pe=H[1],sn=parseInt(H.substring(3));if(sn<50){const mn=`g${pe}t${sn+1}`;p[mn]||xs(mn,!0)}},800)},xs=async(H,K=!1)=>{if(!Q){if(p[H]&&!K){We("Task already completed! Choose a different task.");return}if(K||await Pe.trackUserAction("manual_tab_switch",{from:u,to:H,reason:"user_clicked"}),pn.current=Date.now(),ee&&(se(!1),ge(5),Gt.current&&(clearInterval(Gt.current),Gt.current=null)),u!==H&&!K&&S(q=>q+1),await Pe.trackPageSwitch(u,H,K),_[u]){const q=Date.now()-_[u];await Pe.logEvent("task_time",{taskId:u,timeSpent:q,completed:p[u]||!1,leftForTask:H})}h(H),m(q=>({...q,[H]:Date.now()})),Pe.setPageStartTime(H)}},We=H=>{const K=document.createElement("div");K.className="notification-enter",K.style.cssText="position: fixed; bottom: 20px; left: 20px; background: #2196F3; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10000; max-width: 400px;",K.textContent=H,document.body.appendChild(K),setTimeout(()=>{K.className="notification-exit",setTimeout(()=>{document.body.contains(K)&&document.body.removeChild(K)},500)},3e3)},Ko=async(H="semester_complete")=>{On.current&&clearInterval(On.current);const K=Math.floor((Date.now()-ms.current-Le)/1e3),q=gn(),oe=Se.bonus||0,Ie=Math.round(q)+oe;await Pe.logEvent("game_complete",{totalTime:K,totalSwitches:w,completedTasks:Object.keys(p).length,completedLevels:v,completionReason:H,gameMode:i,currentSemester:ne,categoryPoints:Se,studentLearningScore:q,totalBonus:oe,finalScore:Ie,finalContext:{practiceCompleted:o==="yes",totalPrompts:3+C,isAdminMode:e}}),R&&!R.startsWith("offline-")&&await Hn(un(pt,"sessions",R),{status:"completed",completedAt:Zt(),finalTime:K,totalSwitches:w,completionReason:H,currentSemester:ne,finalScore:Ie,studentLearningScore:q}),r("complete")},Qt=(H,K)=>{if(K&&K.points&&K.points===2)fs(q=>({...q,[H]:!0})),We("Perfect! Practice task completed."),setTimeout(()=>{ar(null)},1500);else{const q=(K==null?void 0:K.points)||0;We(`Practice requires 100% accuracy. You scored ${q===1?"50%":"0%"}. Try again!`),setTimeout(()=>{ar(null)},2e3)}},$r=()=>{const H=u[1],K=parseInt(u.substring(3)),q=n==="practice";return H==="1"?d.jsx(cd,{taskNum:K,onComplete:q?Qt:zn,currentTaskId:u,isPractice:q}):H==="2"?d.jsx(dd,{taskNum:K,onComplete:q?Qt:zn,currentTaskId:u,isPractice:q}):d.jsx(hd,{taskNum:K,onComplete:q?Qt:zn,currentTaskId:u,isPractice:q})};if(b)return d.jsx("div",{className:"app",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:d.jsx("h2",{children:"Loading..."})});if(n==="studentLogin")return d.jsx(pI,{onLoginSuccess:H=>{window.location.href=`${window.location.origin}?code=${H}`}});if(O)return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{maxWidth:"600px",margin:"50px auto",padding:"30px",background:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[d.jsx("h2",{style:{color:"#f44336",marginBottom:"20px"},children:"Access Denied"}),d.jsx("p",{style:{fontSize:"18px",marginBottom:"20px"},children:I}),d.jsx("div",{style:{padding:"15px",background:"#ffebee",borderRadius:"8px",border:"1px solid #f44336"},children:d.jsx("p",{style:{color:"#c62828",margin:0},children:"If you believe this is an error, please contact your instructor."})})]})});if(n==="semesterBreak"){const H=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),K=ne===2&&H.checkpointSemester2;return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{maxWidth:"700px",margin:"50px auto",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[d.jsxs("h1",{style:{color:"#2196F3",marginBottom:"30px"},children:["🎉 Semester ",ne-1," Complete!"]}),d.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsx("h3",{style:{color:"#1976d2",marginBottom:"10px"},children:"Take a Break!"}),d.jsxs("p",{style:{fontSize:"16px",color:"#666",marginBottom:"0"},children:["Great job completing Semester ",ne-1,"! Take a moment to rest your eyes, stretch, or grab some water before continuing."]})]}),K&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #fff3cd 0%, #ffebee 100%)",padding:"25px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #ff9800"},children:[d.jsx("h3",{style:{color:"#f57c00",marginBottom:"15px"},children:"📚 Midterm Checkpoint Coming!"}),d.jsxs("div",{style:{fontSize:"16px",color:"#666",textAlign:"left"},children:[d.jsx("p",{style:{marginBottom:"10px"},children:d.jsx("strong",{children:"Semester 2 includes a midterm exam at the 6-minute mark!"})}),d.jsxs("ul",{style:{marginLeft:"20px",marginBottom:"10px"},children:[d.jsx("li",{children:"Your students will be tested at the midpoint"}),d.jsxs("li",{children:["If student learning ≥ 50 points:"," ",d.jsx("strong",{children:"+300 bonus points!"})]}),d.jsx("li",{children:"Build up your teaching effectiveness early to maximize the bonus"})]}),d.jsx("p",{style:{background:"white",padding:"10px",borderRadius:"4px",textAlign:"center",fontWeight:"bold",color:"#f57c00"},children:"Goal: Reach 50+ Student Learning by minute 10"})]})]}),Re.length>0&&d.jsxs("div",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",marginBottom:"30px"},children:[d.jsx("h4",{style:{color:"#666",marginBottom:"10px"},children:"Your Performance So Far:"}),Re.map((q,oe)=>d.jsxs("div",{style:{marginBottom:"8px",fontSize:"16px"},children:["Semester ",oe+1,": ",d.jsxs("strong",{children:[q.finalScore," points"]})]},oe))]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsxs("button",{onClick:()=>{r("challenge"),vs(),m({g2t1:Date.now()}),Pe.setPageStartTime("g2t1"),Pe.logEvent("semester_start",{semester:ne,timestamp:Date.now(),hasCheckpoint:K})},style:{padding:"15px 40px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.3s"},onMouseOver:q=>{q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.15)"},onMouseOut:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:["I'm Ready - Start Semester ",ne]}),d.jsx("p",{style:{marginTop:"15px",fontSize:"14px",color:"#999"},children:"Click when you're ready to continue. The timer will start immediately."})]})]})})}if(n==="landing"){i||s({accuracy:"lenient",limit:"time"});const H=JSON.parse(sessionStorage.getItem("gameConfig")||"{}"),K=H.role==="admin";return d.jsx("div",{className:"app",children:d.jsx("div",{className:"landing-container",children:d.jsxs("div",{className:"landing-card",style:{padding:"40px",maxWidth:"900px"},children:[d.jsxs("h1",{style:{color:"#333",marginBottom:"30px",fontSize:"32px",textAlign:"left"},children:["Can you beat Park? - Semester ",ne,"/",Ge]}),d.jsxs("div",{className:"game-info",style:{textAlign:"left"},children:[d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#4CAF50",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"🎯"})," Materials"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Create teaching materials - each point directly contributes to your goal points!"})]}),d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#9C27B0",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"📚"})," Research"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Research amplifies your materials! Each point adds +15% multiplier to all materials points."})]}),d.jsxs("div",{style:{marginBottom:"35px",textAlign:"left"},children:[d.jsxs("h3",{style:{color:"#f44336",fontSize:"20px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"✉️"})," Engagement"]}),d.jsx("p",{style:{marginLeft:"34px",fontSize:"16px",lineHeight:"1.6",color:"#555"},children:"Build interest that compounds! Each point adds 0.15% interest after every task completion."})]}),d.jsxs("div",{style:{background:"#f0f8ff",borderRadius:"8px",padding:"25px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsxs("h3",{style:{color:"#2196F3",fontSize:"20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"📊"})," Student Learning Formula"]}),d.jsxs("div",{style:{background:"white",padding:"18px",borderRadius:"6px",fontFamily:"monospace",fontSize:"18px",textAlign:"center",marginBottom:"20px",border:"1px solid #e0e0e0",lineHeight:"1.8"},children:["Goal = ",d.jsx("strong",{children:"Materials"}),d.jsx("br",{}),"× (1 + 0.15×",d.jsx("strong",{children:"Research"}),")",d.jsx("br",{}),"+"," ",d.jsx("strong",{children:"Engagement"})," Interest"]}),d.jsxs("ul",{style:{color:"#333",lineHeight:"2",margin:"0",paddingLeft:"25px",fontSize:"15px",textAlign:"left"},children:[d.jsx("li",{children:"Exact answer = 2 points, Within 1 = 1 point, Otherwise = 0 points"}),d.jsx("li",{children:"Strategic timing matters - early multipliers compound!"}),d.jsx("li",{children:"Maximize student learning through strategic teaching!"}),ne===2&&d.jsxs("li",{children:["At minute ",K?"1":"10",": Exam checkpoint with bonus opportunity (50+ Student Learning = 300 bonus)"]})]})]}),H.hasAI&&d.jsxs("div",{style:{background:"#fff3cd",borderRadius:"6px",padding:"15px",marginBottom:"20px",border:"1px solid #ffc107"},children:[d.jsx("h3",{style:{color:"#856404",fontSize:"16px",marginBottom:"10px"},children:"AI Assistant Available:"}),d.jsxs("ul",{style:{color:"#856404",lineHeight:"1.6",margin:"0",paddingLeft:"20px",fontSize:"14px"},children:[d.jsx("li",{children:"Click the help buttons below each task for AI assistance"}),d.jsx("li",{children:"Unlimited use but reliability varies"}),d.jsx("li",{children:'Type "strategy" or "order" in chat for strategic advice!'})]})]}),ne===2&&d.jsxs("div",{style:{background:"#fff3cd",borderRadius:"6px",padding:"15px",marginBottom:"20px",border:"2px solid #ffc107"},children:[d.jsx("h3",{style:{color:"#856404",fontSize:"16px",marginBottom:"10px"},children:"📚 Semester 2: Midterm Checkpoint!"}),d.jsx("p",{style:{color:"#856404",fontSize:"14px",margin:0},children:"At the 10-minute mark, if you have 50+ student learning points, you'll earn a 300-point bonus!"})]})]}),!K&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%)",borderRadius:"12px",padding:"20px",marginTop:"20px",marginBottom:"20px",border:"2px solid #d32f2f",boxShadow:"0 4px 6px rgba(211, 47, 47, 0.1)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"12px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:"⚠️"}),d.jsx("h3",{style:{color:"#b71c1c",margin:0,fontSize:"18px",fontWeight:"600"},children:"ONE ATTEMPT ONLY - NO RESTART"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{color:"#d32f2f",fontSize:"18px"},children:"❌"}),d.jsxs("span",{style:{fontSize:"14px",color:"#c62828"},children:[d.jsx("strong",{children:"No refresh/close"})," - Session ends"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{color:"#d32f2f",fontSize:"18px"},children:"❌"}),d.jsxs("span",{style:{fontSize:"14px",color:"#c62828"},children:[d.jsx("strong",{children:"No tab switching"})," - 30s warning"]})]})]}),d.jsx("div",{style:{background:"white",padding:"10px",borderRadius:"6px",textAlign:"center",fontSize:"14px",color:"#b71c1c",fontWeight:"600"},children:"⏰ Ensure 40 minutes uninterrupted before starting"})]}),d.jsxs("button",{className:"start-button",onClick:()=>r("practiceChoice"),children:["Start Semester ",ne]}),e&&d.jsxs("div",{style:{marginTop:"20px",padding:"10px",background:"#ffcccb",borderRadius:"6px",border:"2px solid #ff0000",fontWeight:"bold",color:"#d00"},children:["ADMIN MODE: ",qo/60," minute timer, checkpoint at 1 minute"]}),Re.length>0&&d.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("strong",{children:"Previous Semesters:"}),Re.map((q,oe)=>d.jsxs("div",{style:{marginTop:"5px"},children:["Semester ",oe+1,": ",q.finalScore," points"]},oe))]})]})})})}if(n==="practiceChoice"){const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin";return d.jsx("div",{className:"app",children:d.jsx("div",{className:"landing-container",children:d.jsxs("div",{className:"landing-card",children:[d.jsx("h2",{style:{color:"#333",marginBottom:"20px"},children:K?"Practice Mode (Optional for Admin)":"Practice Mode (Required)"}),d.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:K?"As an admin, you can skip practice or try it first.":"You must complete all three practice tasks before starting the main game."}),d.jsx("p",{style:{color:"#888",fontSize:"14px",marginBottom:"30px",fontStyle:"italic"},children:"Practice lets you try each teaching task without time pressure."}),!K&&d.jsxs("div",{style:{background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",borderRadius:"12px",padding:"20px",marginBottom:"20px",border:"2px solid #1976d2",boxShadow:"0 4px 6px rgba(25, 118, 210, 0.1)"},children:[d.jsxs("h4",{style:{color:"#0d47a1",margin:"0 0 16px 0",fontSize:"18px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"20px"},children:"📋"}),"Required Practice Tasks (100% accuracy needed):"]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:$e.g2t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${$e.g2t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"🎯"}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Materials"})}),$e.g2t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:"✓"}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:$e.g1t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${$e.g1t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"📚"}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Research"})}),$e.g1t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:"✓"}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:$e.g3t1?"#e8f5e9":"white",borderRadius:"8px",border:`1px solid ${$e.g3t1?"#4CAF50":"#e0e0e0"}`},children:[d.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"✉️"}),d.jsx("span",{style:{flex:1,fontSize:"15px",color:"#424242"},children:d.jsx("strong",{children:"Engagement"})}),$e.g3t1?d.jsx("span",{style:{color:"#4CAF50",fontSize:"20px",fontWeight:"bold"},children:"✓"}):d.jsx("span",{style:{background:"#fff3cd",color:"#f57c00",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"PENDING"})]})]}),d.jsx("div",{style:{marginTop:"16px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.8)",borderRadius:"6px",fontSize:"13px",color:"#0d47a1",textAlign:"center",fontStyle:"italic"},children:"💡 Each task must be completed perfectly to proceed"})]}),d.jsxs("div",{style:{display:"flex",gap:"20px",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>Ur("yes"),style:{padding:"15px 30px",background:"#4CAF50",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:K?"Try Practice Mode":"Start Required Practice"}),K&&d.jsx("button",{onClick:()=>Ur("no"),style:{padding:"15px 30px",background:"#2196F3",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer"},children:"Skip Practice (Admin)"})]})]})})})}if(n==="practice"){const K=JSON.parse(sessionStorage.getItem("gameConfig")||"{}").role==="admin";if(!kn)return d.jsxs("div",{className:"app",children:[d.jsx("h1",{children:"Teaching Simulation - Practice Mode"}),d.jsx(dI,{practiceCompleted:$e,onPracticeComplete:Qt,onSelectPractice:ar,onStartMainGame:()=>{const Ie=$e.g2t1&&$e.g1t1&&$e.g3t1;!K&&!Ie?We("You must complete all three practice tasks first!"):_s()},isAdmin:K})]});const q=kn[1],oe=1;return d.jsx("div",{className:"app",children:d.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[d.jsx("button",{onClick:()=>ar(null),style:{marginBottom:"20px",padding:"10px 20px",background:"#666",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"← Back to Practice Menu"}),d.jsxs("div",{style:{textAlign:"center",padding:"10px",background:"#fff3cd",borderRadius:"6px",margin:"10px 0",fontSize:"14px",color:"#856404"},children:[d.jsx("strong",{children:"Practice Mode:"})," 100% accuracy required. Will auto-return after completion."]}),q==="1"&&d.jsx(cd,{taskNum:oe,onComplete:Qt,currentTaskId:kn,isPractice:!0}),q==="2"&&d.jsx(dd,{taskNum:oe,onComplete:Qt,currentTaskId:kn,isPractice:!0}),q==="3"&&d.jsx(hd,{taskNum:oe,onComplete:Qt,currentTaskId:kn,isPractice:!0})]})})}if(n==="complete"){const H=Math.floor(j/60),K=j%60,q=Math.round(gn()),oe=Se.bonus||0,Ie=q+oe,Oe={semester:ne,totalTime:j,completedLevels:v,categoryPoints:Se,switches:w,gameMode:i,randomSeed:Ut,studentLearningScore:q,finalScore:Ie},tt=async()=>{const ot=[...Re,Oe];_t(ot),localStorage.setItem("engagementInterest","0"),Rn({materials:0,research:0,engagement:0,bonus:0}),R&&!R.startsWith("offline-")&&await Hn(un(pt,"sessions",R),{[`semesterHistory.semester${ne}`]:Oe,currentSemester:ne+1,lastActivity:Zt()}),ke(ne+1),r("semesterBreak"),g({}),k(0),S(0),x(0),E(0),we(0),h("g2t1"),Ht(!1);const Ye=Math.floor(Math.random()*1e6);$t(Ye),Yn.initializeSeed(Ye)},kt=ne>=Ge;return d.jsxs("div",{className:"app",children:[d.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[d.jsx("div",{style:{textAlign:"center",marginBottom:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196F3"},children:d.jsxs("h2",{style:{color:"#2196F3",margin:0},children:["Semester ",ne," of ",Ge," Complete!"]})}),kt&&d.jsx(mI,{sessionId:R,completedLevels:v,totalTime:j,gameMode:i}),d.jsxs("div",{style:{textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginTop:"20px"},children:[d.jsxs("h2",{style:{color:"#333",marginBottom:"20px"},children:["📊 Semester ",ne," Performance"]}),d.jsxs("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#2196F3",marginBottom:"30px"},children:["Final Score: ",Ie," points"]}),d.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"2px solid #2196F3"},children:[d.jsxs("h3",{style:{margin:"0 0 15px 0",color:"#1976d2"},children:["Student Learning Score: ",q]}),d.jsxs("div",{style:{fontSize:"16px",color:"#666"},children:["= ",Se.materials||0," (Materials) ×"," ",(1+(Se.research||0)*.15).toFixed(2)," ","(Research)",parseFloat(localStorage.getItem("engagementInterest")||"0")>0&&` + ${parseFloat(localStorage.getItem("engagementInterest")||"0").toFixed(2)} (Interest)`]}),oe>0&&d.jsxs("div",{style:{marginTop:"10px",fontSize:"16px",color:"#1976d2"},children:["+ ",oe," Checkpoint Bonus"]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"30px"},children:[d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Total Time"}),d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:[H,"m ",K,"s"]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Student Learning"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:q})]}),(ne===2||oe>0)&&d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Checkpoint Bonus"}),d.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:["+",oe]})]}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"2px solid #e0e0e0"},children:[d.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"5px"},children:"Tasks Completed"}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#333"},children:v})]})]}),d.jsx("h3",{style:{color:"#666",marginBottom:"15px"},children:"Teaching Performance by Category"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px",marginBottom:"30px"},children:[d.jsxs("div",{style:{background:"#f0f8f0",padding:"15px",borderRadius:"6px",border:"2px solid #4CAF5020"},children:[d.jsx("div",{style:{color:"#4CAF50",fontWeight:"bold",marginBottom:"5px"},children:"🎯 Materials"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Se.materials||0}),d.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Base points"})]}),d.jsxs("div",{style:{background:"#f8f0ff",padding:"15px",borderRadius:"6px",border:"2px solid #9C27B020"},children:[d.jsx("div",{style:{color:"#9C27B0",fontWeight:"bold",marginBottom:"5px"},children:"📚 Research"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Se.research||0}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["+",(Se.research||0)*15,"% multiplier"]})]}),d.jsxs("div",{style:{background:"#fff0f0",padding:"15px",borderRadius:"6px",border:"2px solid #f4433620"},children:[d.jsx("div",{style:{color:"#f44336",fontWeight:"bold",marginBottom:"5px"},children:"✉️ Engagement"}),d.jsx("div",{style:{fontSize:"20px",fontWeight:"bold"},children:Se.engagement||0}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["+",((Se.engagement||0)*.15).toFixed(1),"% interest/task"]})]})]})]}),ne===2&&Se.bonus>0&&d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffc107"},children:[d.jsxs("strong",{style:{color:"#856404"},children:["📚 Exam Season Bonus:"," "]}),d.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#856404"},children:["+",Se.bonus," points"]})]}),Re.length>0&&d.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[d.jsx("h4",{style:{color:"#666",marginBottom:"15px"},children:"Progress Over Semesters"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"10px"},children:[...Re,Oe].map((ot,Ye)=>d.jsxs("div",{style:{padding:"10px",background:Ye===Re.length?"#e3f2fd":"white",borderRadius:"6px",border:"1px solid #e0e0e0",textAlign:"center"},children:[d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Semester ",Ye+1]}),d.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#333"},children:ot.finalScore})]},Ye))})]})]}),d.jsx("div",{style:{marginTop:"30px",textAlign:"center"},children:kt?d.jsxs("div",{style:{padding:"20px",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",textAlign:"center"},children:[d.jsx("h3",{style:{color:"#856404",marginBottom:"10px"},children:"⚠️ All semesters complete!"}),d.jsx("p",{style:{color:"#856404",marginBottom:"0"},children:"Return to the Qualtrics survey and enter your completion code to finish the study."})]}):d.jsxs("button",{onClick:tt,style:{padding:"15px 40px",background:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:["Start Semester ",ne+1," →"]})})]})}return d.jsxs("div",{className:"app",children:[Q&&re==="checkpoint"&&d.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.8)",zIndex:999999,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"12px",textAlign:"center",maxWidth:"700px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[d.jsx("h2",{style:{color:"#4CAF50",marginBottom:"25px",fontSize:"28px"},children:"📚 Midterm Exam Results!"}),d.jsxs("div",{style:{fontSize:"18px",marginBottom:"25px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[d.jsx("p",{style:{marginBottom:"15px"},children:"The midterm exam has arrived! Let's see how your students performed..."}),d.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#1976d2",padding:"15px",background:"white",borderRadius:"6px",margin:"15px 0"},children:["Student Learning Score: ",Math.round(gn())," ","pts"]})]}),d.jsxs("div",{style:{marginBottom:"25px",padding:"20px",background:"#e3f2fd",borderRadius:"8px",textAlign:"left"},children:[d.jsx("h3",{style:{marginBottom:"15px",textAlign:"center"},children:"Your Teaching Performance:"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[d.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px",textAlign:"center"},children:[d.jsx("div",{style:{color:"#4CAF50",fontWeight:"bold"},children:"Materials"}),d.jsxs("div",{style:{fontSize:"20px"},children:[Se.materials," pts"]})]}),d.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px",textAlign:"center"},children:[d.jsx("div",{style:{color:"#9C27B0",fontWeight:"bold"},children:"Research"}),d.jsxs("div",{style:{fontSize:"20px"},children:[Se.research," pts"]}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["×",(1+Se.research*.15).toFixed(2)]})]}),d.jsxs("div",{style:{padding:"10px",background:"white",borderRadius:"6px",textAlign:"center"},children:[d.jsx("div",{style:{color:"#f44336",fontWeight:"bold"},children:"Engagement"}),d.jsxs("div",{style:{fontSize:"20px"},children:[Se.engagement," pts"]}),d.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["+",(Se.engagement*.15).toFixed(1),"% interest"]})]})]})]}),d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",padding:"20px",borderRadius:"8px",marginBottom:"25px",background:qt>0?"linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%)":"linear-gradient(135deg, #fff3cd 0%, #ffe082 100%)",border:`2px solid ${qt>0?"#4CAF50":"#ff9800"}`,color:qt>0?"#2e7d32":"#f57c00"},children:ne===2?qt>0?d.jsxs(d.Fragment,{children:["🎉 Excellent Teaching! +",qt," bonus points earned!"]}):d.jsxs(d.Fragment,{children:["📚 Goal was 50+ points (you had"," ",Math.round(gn()),"). Keep teaching!"]}):d.jsx(d.Fragment,{children:"Checkpoint reached! Keep going!"})}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#f5f5f5",borderRadius:"6px",fontSize:"14px",color:"#666",textAlign:"left"},children:[d.jsx("strong",{children:"Tips for the rest of the semester:"}),d.jsxs("ul",{style:{margin:"10px 0 0 20px",lineHeight:"1.6"},children:[d.jsx("li",{children:"You have about 6 minutes remaining"}),d.jsx("li",{children:"Focus on accuracy - every point counts!"}),d.jsx("li",{children:"Research multiplies everything, Engagement compounds over time"}),d.jsx("li",{children:"Materials give direct points - use them strategically"})]})]}),d.jsx("button",{onClick:()=>{X(!1),$(null)},style:{padding:"12px 35px",background:"#2196F3",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 3px 6px rgba(0,0,0,0.15)",transition:"all 0.3s"},onMouseOver:H=>{H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 5px 10px rgba(0,0,0,0.2)"},onMouseOut:H=>{H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="0 3px 6px rgba(0,0,0,0.15)"},children:"Continue Teaching →"}),d.jsx("p",{style:{marginTop:"10px",color:"#999",fontSize:"12px"},children:"The timer is paused. Click to continue when ready."})]})}),de&&d.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.9)",zIndex:999999,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"10px",textAlign:"center",maxWidth:"500px"},children:[d.jsx("h2",{style:{color:"#f44336",marginBottom:"20px"},children:"Session Ended"}),d.jsx("p",{style:{marginBottom:"30px"},children:"Your session has been terminated due to inactivity or switching away from the game."}),d.jsx("p",{style:{color:"#c62828",fontWeight:"bold"},children:"You cannot restart. This was your only attempt."})]})}),M&&d.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",background:"#ff9800",color:"white",padding:"15px 20px",borderRadius:"8px",zIndex:1e4,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[d.jsx("strong",{children:"⚠️ Focus Warning"}),d.jsx("br",{}),"Game will be blocked in ",W," seconds"]}),ee&&d.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{background:"white",padding:"30px",borderRadius:"10px",textAlign:"center",maxWidth:"400px"},children:[d.jsx("h3",{style:{color:"#ff9800",marginBottom:"15px"},children:"Are you still there?"}),d.jsxs("p",{style:{marginBottom:"20px"},children:["Auto-closing in ",Ae," seconds due to inactivity"]}),d.jsx("button",{onClick:()=>{se(!1),ge(5),pn.current=Date.now()},style:{padding:"10px 20px",background:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Continue Playing"})]})}),d.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[d.jsxs("h1",{style:{marginBottom:"30px",textAlign:"center"},children:["Can you beat Park? - Semester ",ne,"/",Ge]}),d.jsx(cI,{current:u,completed:p,onSwitch:xs,limitMode:"time",taskPoints:gs,categoryMultipliers:{},starGoals:{},categoryPoints:Se,timeRemaining:et}),d.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"stretch",marginTop:"20px",minHeight:"650px",width:"100%"},children:[d.jsx("div",{style:{flex:"0 0 66.666%",minHeight:"650px",display:"flex",alignItems:"center",justifyContent:"center",background:"white",borderRadius:"8px",border:"1px solid #e0e0e0",overflow:"visible"},children:d.jsx("div",{className:"task-container",style:{width:"100%",minHeight:"650px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible"},children:$r()})}),d.jsx("div",{style:{flex:"0 0 33.333%",background:"white",borderRadius:"8px",border:"1px solid #e0e0e0",overflow:"visible",height:"680px",display:"flex",flexDirection:"column"},children:d.jsx(fI,{bonusPrompts:C,currentTask:u,categoryPoints:Se,categoryMultipliers:{},starGoals:{},timeRemaining:et,calculateStudentLearning:gn,onAIHelp:H=>{window.dispatchEvent(new CustomEvent("aiHelp",{detail:H}))}})})]})]})]})}qy(document.getElementById("root")).render(d.jsx(L.StrictMode,{children:d.jsx(_I,{})}));
//# sourceMappingURL=index-Dqt4DGP7.js.map
